var R=(e=>(e.CHANNEL_CREATED="channelCreated",e.CONFIG_ERROR="configError",e.STORY_INDEX_INVALIDATED="storyIndexInvalidated",e.STORY_SPECIFIED="storySpecified",e.SET_CONFIG="setConfig",e.SET_STORIES="setStories",e.SET_INDEX="setIndex",e.SET_CURRENT_STORY="setCurrentStory",e.CURRENT_STORY_WAS_SET="currentStoryWasSet",e.FORCE_RE_RENDER="forceReRender",e.FORCE_REMOUNT="forceRemount",e.PRELOAD_ENTRIES="preloadStories",e.STORY_PREPARED="storyPrepared",e.DOCS_PREPARED="docsPrepared",e.STORY_CHANGED="storyChanged",e.STORY_UNCHANGED="storyUnchanged",e.STORY_RENDERED="storyRendered",e.STORY_MISSING="storyMissing",e.STORY_ERRORED="storyErrored",e.STORY_THREW_EXCEPTION="storyThrewException",e.STORY_RENDER_PHASE_CHANGED="storyRenderPhaseChanged",e.PLAY_FUNCTION_THREW_EXCEPTION="playFunctionThrewException",e.UPDATE_STORY_ARGS="updateStoryArgs",e.STORY_ARGS_UPDATED="storyArgsUpdated",e.RESET_STORY_ARGS="resetStoryArgs",e.SET_GLOBALS="setGlobals",e.UPDATE_GLOBALS="updateGlobals",e.GLOBALS_UPDATED="globalsUpdated",e.REGISTER_SUBSCRIPTION="registerSubscription",e.PREVIEW_KEYDOWN="previewKeydown",e.PREVIEW_BUILDER_PROGRESS="preview_builder_progress",e.SELECT_STORY="selectStory",e.STORIES_COLLAPSE_ALL="storiesCollapseAll",e.STORIES_EXPAND_ALL="storiesExpandAll",e.DOCS_RENDERED="docsRendered",e.SHARED_STATE_CHANGED="sharedStateChanged",e.SHARED_STATE_SET="sharedStateSet",e.NAVIGATE_URL="navigateUrl",e.UPDATE_QUERY_PARAMS="updateQueryParams",e.REQUEST_WHATS_NEW_DATA="requestWhatsNewData",e.RESULT_WHATS_NEW_DATA="resultWhatsNewData",e.SET_WHATS_NEW_CACHE="setWhatsNewCache",e.TOGGLE_WHATS_NEW_NOTIFICATIONS="toggleWhatsNewNotifications",e.TELEMETRY_ERROR="telemetryError",e))(R||{}),{CHANNEL_CREATED:G,CONFIG_ERROR:H,CURRENT_STORY_WAS_SET:w,DOCS_PREPARED:W,DOCS_RENDERED:m,FORCE_RE_RENDER:O,FORCE_REMOUNT:b,GLOBALS_UPDATED:k,NAVIGATE_URL:M,PLAY_FUNCTION_THREW_EXCEPTION:B,PRELOAD_ENTRIES:F,PREVIEW_BUILDER_PROGRESS:X,PREVIEW_KEYDOWN:x,REGISTER_SUBSCRIPTION:V,RESET_STORY_ARGS:K,SELECT_STORY:$,SET_CONFIG:Q,SET_CURRENT_STORY:z,SET_GLOBALS:v,SET_INDEX:q,SET_STORIES:j,SHARED_STATE_CHANGED:J,SHARED_STATE_SET:Z,STORIES_COLLAPSE_ALL:ee,STORIES_EXPAND_ALL:re,STORY_ARGS_UPDATED:te,STORY_CHANGED:ne,STORY_ERRORED:se,STORY_INDEX_INVALIDATED:oe,STORY_MISSING:Ee,STORY_PREPARED:ae,STORY_RENDER_PHASE_CHANGED:ie,STORY_RENDERED:Se,STORY_SPECIFIED:_e,STORY_THREW_EXCEPTION:Re,STORY_UNCHANGED:le,UPDATE_GLOBALS:he,UPDATE_QUERY_PARAMS:Te,UPDATE_STORY_ARGS:Oe,REQUEST_WHATS_NEW_DATA:Ae,RESULT_WHATS_NEW_DATA:ue,SET_WHATS_NEW_CACHE:de,TOGGLE_WHATS_NEW_NOTIFICATIONS:ce,TELEMETRY_ERROR:De}=R;const{global:A}=__STORYBOOK_MODULE_GLOBAL__;var{LOGLEVEL:u}=A,o={trace:1,debug:2,info:3,warn:4,error:5,silent:10},d=u,E=o[d]||o.info,a={trace:(e,...r)=>{E<=o.trace&&console.trace(e,...r)},debug:(e,...r)=>{E<=o.debug&&console.debug(e,...r)},info:(e,...r)=>{E<=o.info&&console.info(e,...r)},warn:(e,...r)=>{E<=o.warn&&console.warn(e,...r)},error:(e,...r)=>{E<=o.error&&console.error(e,...r)},log:(e,...r)=>{E<o.silent&&console.log(e,...r)}},c=e=>e.transports!==void 0,D=()=>Math.random().toString(16).slice(2),N=class{constructor(e={}){this.sender=D(),this.events={},this.data={},this.transports=[],this.isAsync=e.async||!1,c(e)?(this.transports=e.transports||[],this.transports.forEach(r=>{r.setHandler(t=>this.handleEvent(t))})):this.transports=e.transport?[e.transport]:[],this.transports.forEach(r=>{r.setHandler(t=>this.handleEvent(t))})}get hasTransport(){return this.transports.length>0}addListener(e,r){this.events[e]=this.events[e]||[],this.events[e].push(r)}emit(e,...r){let t={type:e,args:r,from:this.sender},s={};r.length>=1&&r[0]&&r[0].options&&(s=r[0].options);let n=()=>{this.transports.forEach(T=>{T.send(t,s)}),this.handleEvent(t)};this.isAsync?setImmediate(n):n()}last(e){return this.data[e]}eventNames(){return Object.keys(this.events)}listenerCount(e){let r=this.listeners(e);return r?r.length:0}listeners(e){return this.events[e]||void 0}once(e,r){let t=this.onceListener(e,r);this.addListener(e,t)}removeAllListeners(e){e?this.events[e]&&delete this.events[e]:this.events={}}removeListener(e,r){let t=this.listeners(e);t&&(this.events[e]=t.filter(s=>s!==r))}on(e,r){this.addListener(e,r)}off(e,r){this.removeListener(e,r)}handleEvent(e){let r=this.listeners(e.type);r&&r.length&&r.forEach(t=>{t.apply(e,e.args)}),this.data[e.type]=e.args}onceListener(e,r){let t=(...s)=>(this.removeListener(e,t),r(...s));return t}};const{global:i}=__STORYBOOK_MODULE_GLOBAL__;function C(){let e={setHandler:()=>{},send:()=>{}};return new N({transport:e})}var L=class{constructor(){this.getChannel=()=>{if(!this.channel){let e=C();return this.setChannel(e),e}return this.channel},this.getServerChannel=()=>{if(!this.serverChannel)throw new Error("Accessing non-existent serverChannel");return this.serverChannel},this.ready=()=>this.promise,this.hasChannel=()=>!!this.channel,this.hasServerChannel=()=>!!this.serverChannel,this.setChannel=e=>{this.channel=e,this.resolve()},this.setServerChannel=e=>{this.serverChannel=e},this.promise=new Promise(e=>{this.resolve=()=>e(this.getChannel())})}},S="__STORYBOOK_ADDONS_PREVIEW";function g(){return i[S]||(i[S]=new L),i[S]}var I=g(),f=(e,r)=>e.length===r.length&&e.every((t,s)=>t===r[s]),l=()=>new Error("Storybook preview hooks can only be called inside decorators and story functions.");function h(){return i.STORYBOOK_HOOKS_CONTEXT||null}function P(){let e=h();if(e==null)throw l();return e}function p(e,r,t){let s=P();if(s.currentPhase==="MOUNT"){t!=null&&!Array.isArray(t)&&a.warn(`${e} received a final argument that is not an array (instead, received ${t}). When specified, the final argument must be an array.`);let n={name:e,deps:t};return s.currentHooks.push(n),r(n),n}if(s.currentPhase==="UPDATE"){let n=s.getNextHook();if(n==null)throw new Error("Rendered more hooks than during the previous render.");return n.name!==e&&a.warn(`Storybook has detected a change in the order of Hooks${s.currentDecoratorName?` called by ${s.currentDecoratorName}`:""}. This will lead to bugs and errors if not fixed.`),t!=null&&n.deps==null&&a.warn(`${e} received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.`),t!=null&&n.deps!=null&&t.length!==n.deps.length&&a.warn(`The final argument passed to ${e} changed size between renders. The order and size of this array must remain constant.
Previous: ${n.deps}
Incoming: ${t}`),(t==null||n.deps==null||!f(t,n.deps))&&(r(n),n.deps=t),n}throw l()}function _(e,r,t){let{memoizedState:s}=p(e,n=>{n.memoizedState=r()},t);return s}function Ne(e,r){return _("useMemo",e,r)}function Ce(e,r){return _("useCallback",()=>e,r)}function y(e,r){return _(e,()=>({current:r}),[])}function Y(){let e=h();if(e!=null&&e.currentPhase!=="NONE")e.hasUpdates=!0;else try{I.getChannel().emit(O)}catch{a.warn("State updates of Storybook preview hooks work only in browser")}}function U(e,r){let t=y(e,typeof r=="function"?r():r),s=n=>{t.current=typeof n=="function"?n(t.current):n,Y()};return[t.current,s]}function Le(e){return U("useState",e)}export{Ne as a,Ce as b,Le as u};
