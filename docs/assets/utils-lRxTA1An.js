var H=Object.defineProperty;var T=(e,t,a)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var D=(e,t,a)=>T(e,typeof t!="symbol"?t+"":t,a);import{r as l}from"./iframe-DrAFbx-1.js";import{S as A,U as E,E as M,G as n,a as d,D as B}from"./image-window-loader-B_8mPMRZ.js";import{y as o}from"./index-D_kXk1yT.js";import{s as v}from"./marked.esm-BFtelUbM.js";import{n as b}from"./throttle-DevZGRQD.js";import{u as $}from"./index.esm-Bs9lJmGf.js";import{n as R}from"./flatten-CD7Jkdwx.js";o.seed(1337);function U(e){return!!e}function x(e,t){var i;const a=e.data;if(typeof a==typeof t.data)return{...t,data:a};switch(t.kind){case n.Uri:return b(a)?{...t,data:a[0]}:{...t,data:(a==null?void 0:a.toString())??""};case n.Boolean:return b(a)?{...t,data:a[0]!==void 0}:e.kind===n.Boolean?{...t,data:e.data}:{...t,data:!!U(a)};case n.Image:return b(a)?{...t,data:[a[0]]}:{...t,data:[(a==null?void 0:a.toString())??""]};case n.Number:return{...t,data:0};case n.Text:case n.Markdown:return b(a)?{...t,data:a[0].toString()??""}:{...t,data:((i=e.data)==null?void 0:i.toString())??""};case n.Custom:return t}B()}function O(e){const{getContent:t,...a}=e;return a}const X=v("div")({name:"ColumnAddButton",class:"c4uqbye",propsAsIs:!1}),z=v("div")({name:"BeautifulStyle",class:"b1bsqg7n",propsAsIs:!1}),Y=v("span")({name:"PropName",class:"piiq54i",propsAsIs:!1}),J=v("p")({name:"Description",class:"d1k3yj19",propsAsIs:!1}),Q=v("p")({name:"MoreInfo",class:"m1j0dy02",propsAsIs:!1}),Z=e=>{const{title:t,children:a,description:i,className:u,scale:r}=e,{ref:C,width:k,height:g}=$();return l.createElement(z,{className:u+(A.value?" firefox":"")},l.createElement("h1",null,t),i,l.createElement("div",{style:{scale:r},className:"sizer"},l.createElement("div",{className:"sizer-clip",ref:C},l.createElement("div",{style:{position:"relative",width:k??100,height:g??100}},a))))};function P(e,t){return{title:`Column ${e}`,id:`Column ${e}`,group:t?`Group ${Math.round(e/3)}`:void 0,icon:d.HeaderString,hasMenu:!1,getContent:()=>{const a=o.lorem.word();return{kind:n.Text,data:a,displayData:a,allowOverlay:!0,readonly:!0}}}}function N(e,t){const a=[{title:"First name",id:"First name",group:t?"Name":void 0,icon:d.HeaderString,hasMenu:!1,getContent:()=>{const r=o.name.firstName();return{kind:n.Text,displayData:r,data:r,allowOverlay:!0,readonly:!0}}},{title:"Last name",id:"Last name",group:t?"Name":void 0,icon:d.HeaderString,hasMenu:!1,getContent:()=>{const r=o.name.lastName();return{kind:n.Text,displayData:r,data:r,allowOverlay:!0,readonly:!0}}},{title:"Avatar",id:"Avatar",group:t?"Info":void 0,icon:d.HeaderImage,hasMenu:!1,getContent:()=>{const r=Math.round(Math.random()*100);return{kind:n.Image,data:[`https://picsum.photos/id/${r}/900/900`],displayData:[`https://picsum.photos/id/${r}/40/40`],allowOverlay:!0,readonly:!0}}},{title:"Email",id:"Email",group:t?"Info":void 0,icon:d.HeaderString,hasMenu:!1,getContent:()=>{const r=o.internet.email();return{kind:n.Text,displayData:r,data:r,allowOverlay:!0,readonly:!0}}},{title:"Title",id:"Title",group:t?"Info":void 0,icon:d.HeaderString,hasMenu:!1,getContent:()=>{const r=o.name.jobTitle();return{kind:n.Text,displayData:r,data:r,allowOverlay:!0,readonly:!0}}},{title:"More Info",id:"More Info",group:t?"Info":void 0,icon:d.HeaderUri,hasMenu:!1,getContent:()=>{const r=o.internet.url();return{kind:n.Uri,displayData:r,data:r,hoverEffect:!0,allowOverlay:!0,readonly:!0,onClickUri:C=>{window.open(r,"_blank"),C.preventDefault()}}}}];if(e<a.length)return a.slice(0,e);const i=e-a.length,u=[...new Array(i)].map((r,C)=>P(C+a.length,t));return[...a,...u]}class S{constructor(){D(this,"cachedContent",new Map)}get(t,a){const i=this.cachedContent.get(t);if(i!==void 0)return i[a]}set(t,a,i){let u=this.cachedContent.get(t);u===void 0&&this.cachedContent.set(t,u=[]),u[a]=i}}function ee(e,t=!0,a=!1){const i=l.useRef(new S),[u,r]=l.useState(()=>N(e,a));l.useEffect(()=>{r(N(e,a))},[a,e]);const C=l.useCallback((c,m)=>{r(s=>{const h=s.findIndex(I=>I.title===c.title),y=[...s];return y.splice(h,1,{...s[h],width:m}),y})},[]),k=l.useMemo(()=>u.map(O),[u]),g=l.useRef(u);g.current=u;const p=l.useCallback(([c,m])=>{let s=i.current.get(c,m);return s===void 0&&(s=g.current[c].getContent(),!t&&E(s)&&(s={...s,readonly:t}),i.current.set(c,m,s)),s},[t]),w=l.useCallback(([c,m],s)=>{i.current.set(c,m,s)},[]),f=l.useCallback(([c,m],s)=>{let h=i.current.get(c,m);if(h===void 0&&(h=u[c].getContent()),M(s)&&M(h)){const y=x(s,h);i.current.set(c,m,{...y,displayData:typeof y.data=="string"?y.data:y.displayData,lastUpdated:performance.now()})}},[u]);return{cols:k,getCellContent:p,onColumnResize:C,setCellValue:f,setCellValueRaw:w}}const te=v("kbd")({name:"KeyName",class:"kcvwzr4",propsAsIs:!1}),ae={smoothScrollX:!0,smoothScrollY:!0,getCellsForSelection:!0,width:"100%"};function ne(e){switch(e.kind){case n.Boolean:return{...e,data:!1};case n.Image:return{...e,data:[],displayData:[]};case n.Drilldown:case n.Bubble:return{...e,data:[]};case n.Uri:case n.Markdown:return{...e,data:""};case n.Text:return{...e,data:"",displayData:""};case n.Number:return{...e,data:0,displayData:""}}return e}function G(){return[{title:"Row ID",width:120,icon:d.HeaderRowID,hasMenu:!1,getContent:()=>({kind:n.RowID,data:o.datatype.uuid(),allowOverlay:!0})},{title:"Protected",width:120,icon:d.HeaderCode,hasMenu:!1,getContent:()=>({kind:n.Protected,data:o.finance.bitcoinAddress(),allowOverlay:!1})},{title:"Loading",width:120,icon:d.HeaderString,hasMenu:!1,getContent:()=>({kind:n.Loading,allowOverlay:!1,skeletonWidth:70,skeletonWidthVariability:25})},{title:"Text",width:120,icon:d.HeaderCode,hasMenu:!1,getContent:()=>{const e=o.name.firstName();return{kind:n.Text,data:e,displayData:e,allowOverlay:!0,hoverEffect:!0,themeOverride:{cellVerticalPadding:8,cellHorizontalPadding:8},hoverEffectTheme:{bgColor:"#f4f4f4",fullSize:!0}}}},{title:"Number",width:120,icon:d.HeaderNumber,hasMenu:!1,getContent:()=>{const e=o.datatype.number(100);return{kind:n.Number,data:e,displayData:`${e}`,allowOverlay:!0,hoverEffect:!0,themeOverride:{cellVerticalPadding:8,cellHorizontalPadding:8},hoverEffectTheme:{bgColor:"#f4f4f4",fullSize:!0}}}},{title:"Boolean",width:120,icon:d.HeaderBoolean,hasMenu:!1,getContent:()=>{const e=Math.random(),t=e<.1?void 0:e<.2?null:e<.6;return{kind:n.Boolean,data:t,allowOverlay:!1,readonly:!1}}},{title:"Image",width:120,icon:d.HeaderImage,hasMenu:!1,getContent:()=>({kind:n.Image,data:[`${o.image.animals(40,40)}?random=${o.datatype.number(1e5)}`],allowOverlay:!0,readonly:!0})},{title:"Uri",width:120,icon:d.HeaderUri,hasMenu:!1,getContent:()=>{const e=o.internet.url();return{kind:n.Uri,data:e,allowOverlay:!0,hoverEffect:!0,onClickUri:()=>{window.open(e,"_blank")}}}},{title:"Markdown",width:120,icon:d.HeaderMarkdown,hasMenu:!1,getContent:()=>{const e=`# Title
Hello my name is *${o.name.firstName()}*

## TODO:
Try out [Glide](https://www.glideapps.com/)
`;return{kind:n.Markdown,data:e,allowOverlay:!0}}},{title:"Bubble",width:120,icon:d.HeaderArray,hasMenu:!1,getContent:()=>({kind:n.Bubble,data:[o.lorem.word(),o.lorem.word(),o.lorem.word(),o.lorem.words(2),o.lorem.words(2),o.lorem.words(2)],allowOverlay:!0})},{title:"Drilldown",width:120,icon:d.HeaderArray,hasMenu:!1,getContent:()=>({kind:n.Drilldown,data:[{text:o.address.cityName(),img:`${o.image.nature(40,40)}?random=${o.datatype.number(1e5)}`},{text:o.address.cityName(),img:`${o.image.nature(40,40)}?random=${o.datatype.number(1e5)}`}],allowOverlay:!0})}]}function re(){const e=l.useRef(new S),[t,a]=l.useState(G),i=l.useCallback((p,w)=>{a(f=>{const c=f.findIndex(s=>s.title===p.title),m=[...f];return m.splice(c,1,{...f[c],width:w}),m})},[]),u=l.useMemo(()=>t.map(O),[t]),[r,C]=l.useState(0),k=l.useCallback(([p,w])=>{R(r);let f=e.current.get(p,w);return f===void 0&&(f=t[p].getContent(),e.current.set(p,w,f)),f},[t,r]),g=l.useCallback(([p,w],f,c,m)=>{var h;let s=e.current.get(p,w);if(s===void 0&&(s=t[p].getContent()),M(f)&&M(s)){const y=x(f,s);e.current.set(p,w,{...y,displayData:c===!0?void 0:((h=y.data)==null?void 0:h.toString())??""}),m===!0&&C(I=>I+1)}},[t]);return{cols:u,getCellContent:k,onColumnResize:i,setCellValue:g}}export{Z as B,X as C,J as D,te as K,Q as M,Y as P,re as a,z as b,ne as c,ae as d,ee as u};
