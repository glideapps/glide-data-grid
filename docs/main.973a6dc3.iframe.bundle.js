(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return GridCellKind})),__webpack_require__.d(__webpack_exports__,"c",(function(){return GridColumnIcon})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isEditableGridCell})),__webpack_require__.d(__webpack_exports__,"h",(function(){return isTextEditableGridCell})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isInnerOnlyCell})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isReadWriteCell})),__webpack_require__.d(__webpack_exports__,"d",(function(){return InnerGridCellKind})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CompactSelection}));var _common_support__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(46);let _Symbol$iterator,GridCellKind,GridColumnIcon,InnerGridCellKind,emptyCompactSelection;function isEditableGridCell(cell){return cell.kind!==GridCellKind.Loading&&cell.kind!==GridCellKind.Bubble&&cell.kind!==GridCellKind.RowID&&cell.kind!==GridCellKind.Protected&&cell.kind!==GridCellKind.Drilldown&&cell.kind!==GridCellKind.Custom&&(Object(_common_support__WEBPACK_IMPORTED_MODULE_0__.d)(cell),!0)}function isTextEditableGridCell(cell){return cell.kind!==GridCellKind.Loading&&cell.kind!==GridCellKind.Bubble&&cell.kind!==GridCellKind.RowID&&cell.kind!==GridCellKind.Protected&&cell.kind!==GridCellKind.Drilldown&&cell.kind!==GridCellKind.Boolean&&cell.kind!==GridCellKind.Image&&cell.kind!==GridCellKind.Custom&&(Object(_common_support__WEBPACK_IMPORTED_MODULE_0__.d)(cell),!0)}function isInnerOnlyCell(cell){return cell.kind===InnerGridCellKind.Marker||cell.kind===InnerGridCellKind.NewRow}function isReadWriteCell(cell){return!(!isEditableGridCell(cell)||cell.kind===GridCellKind.Image||cell.kind===GridCellKind.Boolean)&&(cell.kind===GridCellKind.Text||cell.kind===GridCellKind.Number||cell.kind===GridCellKind.Markdown||cell.kind===GridCellKind.Uri?!0!==cell.readonly:void Object(_common_support__WEBPACK_IMPORTED_MODULE_0__.b)(cell))}!function(GridCellKind){GridCellKind.Uri="uri",GridCellKind.Text="text",GridCellKind.Image="image",GridCellKind.RowID="row-id",GridCellKind.Number="number",GridCellKind.Bubble="bubble",GridCellKind.Boolean="boolean",GridCellKind.Loading="loading",GridCellKind.Markdown="markdown",GridCellKind.Drilldown="drilldown",GridCellKind.Protected="protected",GridCellKind.Custom="custom"}(GridCellKind||(GridCellKind={})),function(GridColumnIcon){GridColumnIcon.HeaderRowID="headerRowID",GridColumnIcon.HeaderCode="headerCode",GridColumnIcon.HeaderNumber="headerNumber",GridColumnIcon.HeaderString="headerString",GridColumnIcon.HeaderBoolean="headerBoolean",GridColumnIcon.HeaderAudioUri="headerAudioUri",GridColumnIcon.HeaderVideoUri="headerVideoUri",GridColumnIcon.HeaderEmoji="headerEmoji",GridColumnIcon.HeaderImage="headerImage",GridColumnIcon.HeaderUri="headerUri",GridColumnIcon.HeaderPhone="headerPhone",GridColumnIcon.HeaderMarkdown="headerMarkdown",GridColumnIcon.HeaderDate="headerDate",GridColumnIcon.HeaderTime="headerTime",GridColumnIcon.HeaderEmail="headerEmail",GridColumnIcon.HeaderReference="headerReference",GridColumnIcon.HeaderIfThenElse="headerIfThenElse",GridColumnIcon.HeaderSingleValue="headerSingleValue",GridColumnIcon.HeaderLookup="headerLookup",GridColumnIcon.HeaderTextTemplate="headerTextTemplate",GridColumnIcon.HeaderMath="headerMath",GridColumnIcon.HeaderRollup="headerRollup",GridColumnIcon.HeaderJoinStrings="headerJoinStrings",GridColumnIcon.HeaderSplitString="headerSplitString",GridColumnIcon.HeaderGeoDistance="headerGeoDistance",GridColumnIcon.HeaderArray="headerArray",GridColumnIcon.RowOwnerOverlay="rowOwnerOverlay",GridColumnIcon.ProtectedColumnOverlay="protectedColumnOverlay"}(GridColumnIcon||(GridColumnIcon={})),function(InnerGridCellKind){InnerGridCellKind.NewRow="new-row",InnerGridCellKind.Marker="marker"}(InnerGridCellKind||(InnerGridCellKind={})),_Symbol$iterator=Symbol.iterator;class CompactSelection{constructor(items){this.items=items,this.offset=amount=>{if(0===amount)return this;const newItems=this.items.map((x=>[x[0]+amount,x[1]+amount]));return new CompactSelection(newItems)},this.add=selection=>{const slice="number"==typeof selection?[selection,selection+1]:selection,newItems=function mergeRanges(input){if(0===input.length)return[];const ranges=[...input],stack=[];return ranges.sort((function(a,b){return a[0]-b[0]})),stack.push([...ranges[0]]),ranges.slice(1).forEach((range=>{const top=stack[stack.length-1];top[1]<range[0]?stack.push([...range]):top[1]<range[1]&&(top[1]=range[1])})),stack}([...this.items,slice]);return new CompactSelection(newItems)},this.remove=selection=>{const items=[...this.items];for(const[i,slice]of items.entries()){const[start,end]=slice;if(start<=selection&&end>selection){const left=[start,selection],right=[selection+1,end],toAdd=[];left[0]!==left[1]&&toAdd.push(left),right[0]!==right[1]&&toAdd.push(right),items.splice(i,1,...toAdd);break}}return new CompactSelection(items)},this.first=()=>{if(0!==this.items.length)return this.items[0][0]},this.last=()=>{if(0!==this.items.length)return this.items.slice(-1)[0][1]-1},this.hasIndex=index=>{for(let i=0;i<this.items.length;i++){const[start,end]=this.items[i];if(index>=start&&index<end)return!0}return!1},this.hasAll=index=>{for(let x=index[0];x<index[1];x++)if(!this.hasIndex(x))return!1;return!0}}get length(){let len=0;for(const[start,end]of this.items)len+=end-start;return len}*[_Symbol$iterator](){for(const[start,end]of this.items)for(let x=start;x<end;x++)yield x}}CompactSelection.empty=()=>{var _emptyCompactSelectio;return null!==(_emptyCompactSelectio=emptyCompactSelection)&&void 0!==_emptyCompactSelectio?_emptyCompactSelectio:emptyCompactSelection=new CompactSelection([])},CompactSelection.fromSingleSelection=selection=>CompactSelection.empty().add(selection)},10:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"r",(function(){return useMappedColumns})),__webpack_require__.d(__webpack_exports__,"n",(function(){return isGroupEqual})),__webpack_require__.d(__webpack_exports__,"m",(function(){return getStickyWidth})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getEffectiveColumns})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getColumnIndexForX})),__webpack_require__.d(__webpack_exports__,"l",(function(){return getRowIndexForY})),__webpack_require__.d(__webpack_exports__,"i",(function(){return drawWithLastUpdate})),__webpack_require__.d(__webpack_exports__,"p",(function(){return prepTextCell})),__webpack_require__.d(__webpack_exports__,"h",(function(){return drawTextCell})),__webpack_require__.d(__webpack_exports__,"f",(function(){return drawNewRowCell})),__webpack_require__.d(__webpack_exports__,"o",(function(){return prepMarkerRowCell})),__webpack_require__.d(__webpack_exports__,"e",(function(){return drawMarkerRowCell})),__webpack_require__.d(__webpack_exports__,"g",(function(){return drawProtectedCell})),__webpack_require__.d(__webpack_exports__,"a",(function(){return drawBoolean})),__webpack_require__.d(__webpack_exports__,"b",(function(){return drawBubbles})),__webpack_require__.d(__webpack_exports__,"c",(function(){return drawDrilldownCell})),__webpack_require__.d(__webpack_exports__,"d",(function(){return drawImage})),__webpack_require__.d(__webpack_exports__,"q",(function(){return roundedPoly}));var _common_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);function useMappedColumns(columns,freezeColumns){return react__WEBPACK_IMPORTED_MODULE_1___default.a.useMemo((()=>columns.map(((c,i)=>({...c,sourceIndex:i,sticky:i<freezeColumns})))),[columns,freezeColumns])}function isGroupEqual(left,right){return(null!=left?left:"")===(null!=right?right:"")}function remapForDnDState(columns,dndState){let mappedCols=columns;if(void 0!==dndState){let writable=[...columns];const temp=mappedCols[dndState.src];dndState.src>dndState.dest?(writable.splice(dndState.src,1),writable.splice(dndState.dest,0,temp)):(writable.splice(dndState.dest+1,0,temp),writable.splice(dndState.src,1)),writable=writable.map(((c,i)=>({...c,sticky:columns[i].sticky}))),mappedCols=writable}return mappedCols}function getStickyWidth(columns,dndState){let result=0;const remapped=remapForDnDState(columns,dndState);for(let i=0;i<remapped.length;i++){const c=remapped[i];if(!c.sticky)break;result+=c.width}return result}function getEffectiveColumns(columns,cellXOffset,width,dndState,tx){const mappedCols=remapForDnDState(columns,dndState),sticky=[];for(const c of mappedCols){if(!c.sticky)break;sticky.push(c)}if(sticky.length>0)for(const c of sticky)width-=c.width;let endIndex=cellXOffset,curX=null!=tx?tx:0;for(;curX<=width&&endIndex<mappedCols.length;)curX+=mappedCols[endIndex].width,endIndex++;for(let i=cellXOffset;i<endIndex;i++){const c=mappedCols[i];c.sticky||sticky.push(c)}return sticky}function getColumnIndexForX(targetX,effectiveColumns,translateX){let x=0;for(const c of effectiveColumns){if(targetX<=(c.sticky?x:x+(null!=translateX?translateX:0))+c.width)return c.sourceIndex;x+=c.width}return-1}function getRowIndexForY(targetY,height,hasGroups,headerHeight,groupHeaderHeight,rows,rowHeight,cellYOffset,translateY,lastRowSticky){const totalHeaderHeight=headerHeight+groupHeaderHeight;if(hasGroups&&targetY<=groupHeaderHeight)return-2;if(targetY<=totalHeaderHeight)return-1;const lastRowHeight="number"==typeof rowHeight?rowHeight:rowHeight(rows-1);if(lastRowSticky&&targetY>height-lastRowHeight)return rows-1;const effectiveRows=rows-(lastRowSticky?1:0),ty=targetY-(null!=translateY?translateY:0);if("number"==typeof rowHeight){const target=Math.floor((ty-totalHeaderHeight)/rowHeight)+cellYOffset;if(target>=effectiveRows)return;return target}{let curY=totalHeaderHeight;for(let i=cellYOffset;i<effectiveRows;i++){const rh=rowHeight(i);if(ty<=curY+rh)return i;curY+=rh}return}}let metricsSize=0,metricsCache={};function measureTextCached(s,ctx,font){const key=`${s}_${null!=font?font:ctx.font}`;let metrics=metricsCache[key];return void 0===metrics&&(metrics=ctx.measureText(s),metricsCache[key]=metrics,metricsSize++),metricsSize>1e4&&(metricsCache={},metricsSize=0),metrics}function drawWithLastUpdate(args,lastUpdate,frameTime,draw){const{ctx:ctx,x:x,y:y,w:width,h:height,theme:theme}=args;let progress=Number.MAX_SAFE_INTEGER;let forcePrep=!1;if(void 0!==lastUpdate&&(progress=frameTime-lastUpdate,progress<500)){const fade=1-progress/500;ctx.globalAlpha=fade,ctx.fillStyle=theme.bgSearchResult,ctx.fillRect(x,y,width,height),ctx.globalAlpha=1,forcePrep=!0}return draw(forcePrep),progress<500}function prepTextCell(args,overrideColor){const{ctx:ctx,theme:theme}=args;ctx.fillStyle=null!=overrideColor?overrideColor:theme.textDark}function drawTextCell(args,data){const{ctx:ctx,x:x,y:y,w:w,h:h,theme:theme}=args;data=data.split(/\r?\n/)[0].slice(0,Math.round(w/4));if("rtl"===Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__.d)(data)){const textWidth=measureTextCached(data,ctx,`${theme.baseFontStyle} ${theme.fontFamily}`).width;ctx.fillText(data,x+w-theme.cellHorizontalPadding-textWidth+.5,y+h/2)}else ctx.fillText(data,x+theme.cellHorizontalPadding+.5,y+h/2)}function drawNewRowCell(args,data,isFirst){const{ctx:ctx,x:x,y:y,w:w,h:h,hoverAmount:hoverAmount,theme:theme}=args;ctx.beginPath(),ctx.globalAlpha=hoverAmount,ctx.rect(x,y,w,h),ctx.fillStyle=theme.bgHeaderHovered,ctx.fill(),ctx.globalAlpha=1,ctx.beginPath();const lineSize=isFirst?12:12*hoverAmount,xTranslate=isFirst?0:12*(1-hoverAmount)*.5,padPlus=theme.cellHorizontalPadding+4;lineSize>0&&(ctx.moveTo(x+padPlus+xTranslate,y+h/2),ctx.lineTo(x+padPlus+xTranslate+lineSize,y+h/2),ctx.moveTo(x+padPlus+xTranslate+.5*lineSize,y+h/2-.5*lineSize),ctx.lineTo(x+padPlus+xTranslate+.5*lineSize,y+h/2+.5*lineSize),ctx.lineWidth=2,ctx.strokeStyle=theme.bgIconHeader,ctx.lineCap="round",ctx.stroke()),ctx.fillStyle=theme.textMedium,ctx.fillText(data,24+x+theme.cellHorizontalPadding+.5,y+h/2),ctx.beginPath()}function drawCheckbox(ctx,theme,checked,x,y,width,height,highlighted){let hoverX=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-20,hoverY=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-20;const centerX=x+width/2,centerY=y+height/2,hovered=Math.abs(hoverX-width/2)<10&&Math.abs(hoverY-height/2)<10;checked?(ctx.beginPath(),roundedRect(ctx,centerX-9,centerY-9,18,18,4),ctx.fillStyle=highlighted?theme.accentColor:theme.textLight,ctx.fill(),ctx.beginPath(),ctx.moveTo(centerX-8+3.65005,centerY-8+7.84995),ctx.lineTo(centerX-8+6.37587,centerY-8+10.7304),ctx.lineTo(centerX-8+11.9999,centerY-8+4.74995),ctx.strokeStyle=theme.accentFg,ctx.lineJoin="round",ctx.lineCap="round",ctx.lineWidth=1.9,ctx.stroke()):(ctx.beginPath(),roundedRect(ctx,centerX-8.5,centerY-8.5,17,17,4),ctx.lineWidth=1,ctx.strokeStyle=hovered?theme.textMedium:theme.textLight,ctx.stroke())}function prepMarkerRowCell(args){const{ctx:ctx,theme:theme}=args;ctx.font=`9px ${theme.fontFamily}`}function drawMarkerRowCell(args,index,checked,markerKind){const{ctx:ctx,x:x,y:y,w:width,h:height,hoverAmount:hoverAmount,theme:theme}=args,checkedboxAlpha=checked?1:hoverAmount;if("number"!==markerKind&&checkedboxAlpha>0&&(ctx.globalAlpha=checkedboxAlpha,drawCheckbox(ctx,theme,checked,x,y,width,height,!0),ctx.globalAlpha=1),"number"===markerKind||"both"===markerKind&&!checked){const text=(index+1).toString(),start=x+(width-measureTextCached(text,ctx,`9px ${theme.fontFamily}`).width)/2;"both"===markerKind&&0!==hoverAmount&&(ctx.globalAlpha=1-hoverAmount),ctx.fillStyle=theme.textLight,ctx.fillText(text,start,y+height/2),0!==hoverAmount&&(ctx.globalAlpha=1)}}function drawProtectedCell(args){const{ctx:ctx,theme:theme,x:x,y:y,w:w,h:h,highlighted:highlighted}=args;highlighted||(ctx.beginPath(),ctx.rect(x+1,y+1,w-1,h-1),ctx.fillStyle=theme.bgCellMedium,ctx.fill()),ctx.beginPath();let xStart=x+theme.cellHorizontalPadding+2.5;const center=y+h/2,p=2.5*Math.cos(Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__.c)(30)),q=2.5*Math.sin(Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__.c)(30));for(let i=0;i<12;i++)ctx.moveTo(xStart,center-2.5),ctx.lineTo(xStart,center+2.5),ctx.moveTo(xStart+p,center-q),ctx.lineTo(xStart-p,center+q),ctx.moveTo(xStart-p,center-q),ctx.lineTo(xStart+p,center+q),xStart+=8;ctx.lineWidth=1.1,ctx.lineCap="square",ctx.strokeStyle=theme.textLight,ctx.stroke()}function roundedRect(ctx,x,y,width,height,radius){"number"==typeof radius&&(radius={tl:radius,tr:radius,br:radius,bl:radius}),ctx.moveTo(x+radius.tl,y),ctx.arcTo(x+width,y,x+width,y+radius.tr,radius.tr),ctx.arcTo(x+width,y+height,x+width-radius.br,y+height,radius.br),ctx.arcTo(x,y+height,x,y+height-radius.bl,radius.bl),ctx.arcTo(x,y,x+radius.tl,y,radius.tl)}function drawBoolean(args,data,canEdit){const{ctx:ctx,hoverAmount:hoverAmount,theme:theme,x:x,y:y,w:w,h:h,highlighted:highlighted,hoverX:hoverX,hoverY:hoverY}=args;ctx.globalAlpha=canEdit?.65+.35*hoverAmount:.4,drawCheckbox(ctx,theme,data,x,y,w,h,highlighted,hoverX,hoverY),ctx.globalAlpha=1}!async function clearCacheOnLoad(){var _document,_document$fonts;void 0!==(null===(_document=document)||void 0===_document||null===(_document$fonts=_document.fonts)||void 0===_document$fonts?void 0:_document$fonts.ready)&&(await document.fonts.ready,metricsSize=0,metricsCache={})}();function drawBubbles(args,data){const{x:x,y:y,w:w,h:h,theme:theme,ctx:ctx,highlighted:highlighted}=args;let renderX=x+theme.cellHorizontalPadding;const renderBoxes=[];for(const s of data){if(renderX>x+w)break;const textWidth=measureTextCached(s,ctx,`${theme.baseFontStyle} ${theme.fontFamily}`).width;renderBoxes.push({x:renderX,width:textWidth}),renderX+=textWidth+16+4}ctx.beginPath(),renderBoxes.forEach((rectInfo=>{roundedRect(ctx,rectInfo.x,y+(h-20)/2,rectInfo.width+16,20,10)})),ctx.fillStyle=highlighted?theme.bgBubbleSelected:theme.bgBubble,ctx.fill(),renderBoxes.forEach(((rectInfo,i)=>{ctx.beginPath(),ctx.fillStyle=theme.textBubble,ctx.fillText(data[i],rectInfo.x+8,y+h/2)}))}function drawDrilldownCell(args,data){const{x:x,y:y,w:w,h:h,theme:theme,ctx:ctx,imageLoader:imageLoader,col:col,row:row}=args;let renderX=x+theme.cellHorizontalPadding;const renderBoxes=[];for(const el of data){if(renderX>x+w)break;const textWidth=measureTextCached(el.text,ctx,`${theme.baseFontStyle} ${theme.fontFamily}`).width;let imgWidth=0;if(void 0!==el.img){void 0!==imageLoader.loadOrGetImage(el.img,col,row)&&(imgWidth=20)}const renderWidth=textWidth+imgWidth+16;renderBoxes.push({x:renderX,width:renderWidth}),renderX+=renderWidth+4}ctx.beginPath(),renderBoxes.forEach((rectInfo=>{roundedRect(ctx,Math.floor(rectInfo.x),y+(h-24)/2,Math.floor(rectInfo.width),24,6)})),ctx.shadowColor="rgba(24, 25, 34, 0.4)",ctx.shadowBlur=1,ctx.fillStyle=theme.bgCell,ctx.fill(),ctx.shadowColor="rgba(24, 25, 34, 0.2)",ctx.shadowOffsetY=1,ctx.shadowBlur=5,ctx.fillStyle=theme.bgCell,ctx.fill(),ctx.shadowOffsetY=0,ctx.shadowBlur=0,ctx.shadowBlur=0,ctx.beginPath(),renderBoxes.forEach((rectInfo=>{roundedRect(ctx,Math.floor(rectInfo.x)+.5,Math.floor(y+(h-24)/2)+.5,Math.round(rectInfo.width),24,6)})),ctx.strokeStyle=theme.drilldownBorder,ctx.lineWidth=1,ctx.stroke(),renderBoxes.forEach(((rectInfo,i)=>{const d=data[i];let drawX=rectInfo.x+8;if(void 0!==d.img){const img=imageLoader.loadOrGetImage(d.img,col,row);if(void 0!==img){const imgSize=16;let srcX=0,srcY=0,srcWidth=img.width,srcHeight=img.height;srcWidth>srcHeight?(srcX+=(srcWidth-srcHeight)/2,srcWidth=srcHeight):srcHeight>srcWidth&&(srcY+=(srcHeight-srcWidth)/2,srcHeight=srcWidth),ctx.beginPath(),roundedRect(ctx,drawX,y+h/2-imgSize/2,imgSize,imgSize,3),ctx.save(),ctx.clip(),ctx.drawImage(img,srcX,srcY,srcWidth,srcHeight,drawX,y+h/2-imgSize/2,imgSize,imgSize),ctx.restore(),drawX+=imgSize+4}}ctx.beginPath(),ctx.fillStyle=theme.textBubble,ctx.fillText(d.text,drawX,y+h/2)}))}function drawImage(args,data){const{x:x,y:y,h:h,col:col,row:row,theme:theme,ctx:ctx,imageLoader:imageLoader}=args;let drawX=x+theme.cellHorizontalPadding;for(const i of data){if(0===i.length)continue;const img=imageLoader.loadOrGetImage(i,col,row);if(void 0!==img){const imgHeight=h-2*theme.cellVerticalPadding,imgWidth=img.width*(imgHeight/img.height);roundedRect(ctx,drawX,y+theme.cellVerticalPadding,imgWidth,imgHeight,4),ctx.save(),ctx.clip(),ctx.drawImage(img,drawX,y+theme.cellVerticalPadding,imgWidth,imgHeight),ctx.restore(),drawX+=imgWidth+4}}}function roundedPoly(ctx,points,radiusAll){const asVec=function(p,pp){const vx=pp.x-p.x,vy=pp.y-p.y,vlen=Math.sqrt(vx*vx+vy*vy),vnx=vx/vlen,vny=vy/vlen;return{x:vx,y:pp.y-p.y,len:vlen,nx:vnx,ny:vny,ang:Math.atan2(vny,vnx)}};let radius=radiusAll;const len=points.length;let p1=points[len-1];for(let i=0;i<len;i++){let p2=points[i%len];const p3=points[(i+1)%len],v1=asVec(p2,p1),v2=asVec(p2,p3),sinA=v1.nx*v2.ny-v1.ny*v2.nx,sinA90=v1.nx*v2.nx-v1.ny*-v2.ny;let angle=Math.asin(sinA<-1?-1:sinA>1?1:sinA),radDirection=1,drawDirection=!1;sinA90<0?angle<0?angle=Math.PI+angle:(angle=Math.PI-angle,radDirection=-1,drawDirection=!0):angle>0&&(radDirection=-1,drawDirection=!0),radius=void 0!==p2.radius?p2.radius:radiusAll;const halfAngle=angle/2;let cRadius,lenOut=Math.abs(Math.cos(halfAngle)*radius/Math.sin(halfAngle));lenOut>Math.min(v1.len/2,v2.len/2)?(lenOut=Math.min(v1.len/2,v2.len/2),cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))):cRadius=radius;let x=p2.x+v2.nx*lenOut,y=p2.y+v2.ny*lenOut;x+=-v2.ny*cRadius*radDirection,y+=v2.nx*cRadius*radDirection,ctx.arc(x,y,cRadius,v1.ang+Math.PI/2*radDirection,v2.ang-Math.PI/2*radDirection,drawDirection),p1=p2,p2=p3}ctx.closePath()}},105:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return browserIsFirefox})),__webpack_require__.d(__webpack_exports__,"c",(function(){return browserIsSafari})),__webpack_require__.d(__webpack_exports__,"b",(function(){return browserIsOSX}));const{userAgent:userAgent}=window.navigator;class Lazy{constructor(fn){this.fn=void 0,this.val=void 0,this.fn=fn}get value(){var _this$val;return null!==(_this$val=this.val)&&void 0!==_this$val?_this$val:this.val=this.fn()}}const browserIsFirefox=userAgent.includes("Firefox"),browserIsSafari=userAgent.indexOf("Mac OS")>-1&&userAgent.indexOf("Safari")>-1&&userAgent.indexOf("Chrome")<0,browserIsOSX=function lazy(fn){return new Lazy(fn)}((()=>window.navigator.platform.toLowerCase().startsWith("mac")))},106:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),styled_components_browser_esm=__webpack_require__(7),throttle=__webpack_require__(194),throttle_default=__webpack_require__.n(throttle);const imgPool=[];function packColRowToNumber(col,row){return 65536*row+col}function unpackCol(packed){return packed%65536}function unpackRow(packed,col){return(packed-col)/65536}function unpackNumberToColRow(packed){const col=unpackCol(packed);return[col,unpackRow(packed,col)]}var image_window_loader=class image_window_loader_ImageWindowLoader{constructor(){this.imageLoaded=()=>{},this.loadedLocations=[],this.window={x:0,y:0,width:0,height:0},this.freezeCols=0,this.isInWindow=packed=>{const col=unpackCol(packed),row=unpackRow(packed,col);if(col<this.freezeCols)return!0;const w=this.window;return col>=w.x&&col<=w.x+w.width&&row>=w.y&&row<=w.y+w.height},this.cache={},this.sendLoaded=throttle_default()((()=>{this.imageLoaded(this.loadedLocations),this.loadedLocations=[]}),20),this.clearOutOfWindow=()=>{const keys=Object.keys(this.cache);for(let i=0;i<keys.length;i++){const key=keys[i],obj=this.cache[key];let keep=!1;for(let j=0;j<obj.cells.length;j++){const packed=obj.cells[j];if(this.isInWindow(packed)){keep=!0;break}}keep?obj.cells=obj.cells.filter(this.isInWindow):(obj.cancel(),delete this.cache[key])}}}setCallback(imageLoaded){this.imageLoaded=imageLoaded}setWindow(window,freezeCols){this.window.x===window.x&&this.window.y===window.y&&this.window.width===window.width&&this.window.height===window.height&&this.freezeCols===freezeCols||(this.window=window,this.freezeCols=freezeCols,this.clearOutOfWindow())}loadOrGetImage(url,col,row){const key=`${url}`,current=this.cache[key];if(void 0!==current){const packed=packColRowToNumber(col,row);return void 0!==current.img||current.cells.includes(packed)||current.cells.push(packed),current.img}{var _imgPool$pop;const img=null!==(_imgPool$pop=imgPool.pop())&&void 0!==_imgPool$pop?_imgPool$pop:new Image;let canceled=!1;const result={img:void 0,cells:[packColRowToNumber(col,row)],url:url,cancel:()=>{canceled||(canceled=!0,imgPool.unshift(img))}};return requestAnimationFrame((async()=>{try{img.src=url,await img.decode();const toWrite=this.cache[key];if(void 0!==toWrite&&!canceled){toWrite.img=img;for(const packed of toWrite.cells)this.loadedLocations.push(unpackNumberToColRow(packed));this.sendLoaded()}}catch(e){result.cancel()}})),void(this.cache[key]=result)}}},data_grid_lib=__webpack_require__(10),data_grid_types=__webpack_require__(1),support=__webpack_require__(46);const iconHead='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',headerUri=props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${fg}"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${fg}"/>\n</svg>\n  `},sprites={headerRowID:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}<rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${fg}"/></svg>`},headerNumber:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${fg}"/>\n  </svg>`},headerCode:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}<rect x="2" y="2" width="16" height="16" rx="4" fill="${bg}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${fg}"/></svg>`},headerString:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${fg}"/>\n</svg>`},headerBoolean:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n    <path\n        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"\n        fill="${bg}"\n    />\n    <path\n        fill-rule="evenodd"\n        clip-rule="evenodd"\n        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"\n        fill="${fg}"\n    />\n</svg>`},headerAudioUri:headerUri,headerVideoUri:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${fg}"/>\n</svg>`},headerEmoji:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${fg}"/>\n    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${fg}"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${fg}"/>\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${fg}"/>\n    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${fg}"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${fg}"/>\n  </svg>`},headerImage:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${fg}"/>\n</svg>`},headerUri:headerUri,headerPhone:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path fill="${fg}" d="M3 3h14v14H3z"/>\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${bg}"/>\n  </svg>`},headerMarkdown:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${fg}"/>\n  </svg>`},headerDate:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${fg}"/>\n</svg>`},headerTime:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${fg}"/>\n    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${fg}"/>\n  </svg>`},headerEmail:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${fg}"/>\n</svg>`},headerReference:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <rect x="2" y="8" width="10" height="8" rx="2" fill="${bg}"/>\n    <rect x="8" y="4" width="10" height="8" rx="2" fill="${bg}"/>\n    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${fg}"/>\n  </svg>`},headerIfThenElse:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path fill="${fg}" d="M4 3h12v14H4z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${bg}"/>\n</svg>`},headerSingleValue:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${fg}"/>\n  </svg>`},headerLookup:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${fg}"/>\n  </svg>`},headerTextTemplate:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${fg}"/>\n</svg>`},headerMath:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${fg}"/>\n  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${fg}"/>\n</svg>`},headerRollup:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${fg}"/>\n  </svg>`},headerJoinStrings:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${fg}"/>\n</svg>`},headerSplitString:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${fg}"/>\n  </svg>`},headerGeoDistance:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${fg}"/>\n</svg>`},headerArray:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${fg}"/>\n</svg>`},rowOwnerOverlay:props=>{const fg=props.fgColor;return`\n    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${props.bgColor}" stroke="${fg}" stroke-width="2"/>\n  </svg>`},protectedColumnOverlay:props=>{const fg=props.fgColor;return`\n    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${props.bgColor}" stroke="${fg}" stroke-width="2"/>\n  </svg>\n`},renameIcon:props=>{const bg=props.bgColor;return`${iconHead}\n    <path stroke="${bg}" stroke-width="2" d="M12 3v14"/>\n    <path stroke="${bg}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>\n    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${bg}"/>\n  </svg>\n`}},variantList=["normal","selected","special"];function makeExtraMapIndex(bgColor,fgColor){return`${bgColor}|${fgColor}`}function getColorsForIndex(str){const r=str.split("|");return Object(support.a)(2===r.length),r}function getColors(variant,theme){return"normal"===variant?[theme.bgIconHeader,theme.fgIconHeader]:"selected"===variant?["white",theme.accentColor]:[theme.accentColor,theme.bgHeader]}class data_grid_sprites_SpriteManager{constructor(headerIcons){this.colorMap=[],this.spriteCanvas=void 0,this.spriteList=void 0,this.headerIcons=void 0,this.headerIcons={...sprites,...null!=headerIcons?headerIcons:{}},this.spriteList=Object.keys(this.headerIcons)}drawSprite(sprite,variant,ctx,x,y,size,theme){if(void 0===this.spriteCanvas)throw new Error;const spriteIndex=this.spriteList.indexOf(sprite);if(-1===spriteIndex)throw new Error(`Unknown header icon: ${sprite}`);const[bgColor,fgColor]=getColors(variant,theme),variantIndex=this.colorMap.indexOf(makeExtraMapIndex(bgColor,fgColor)),xOffset=40*spriteIndex,yOffset=Math.max(0,40*variantIndex);ctx.drawImage(this.spriteCanvas,xOffset,yOffset,40,40,x,y,size,size)}async buildSpriteMap(theme,cols){const map=new Set;for(const v of variantList){const[bg,fg]=getColors(v,theme);map.add(makeExtraMapIndex(bg,fg))}for(const c of cols){var _c$themeOverride,_c$themeOverride2;if(void 0!==(null===(_c$themeOverride=c.themeOverride)||void 0===_c$themeOverride?void 0:_c$themeOverride.bgIconHeader)||void 0!==(null===(_c$themeOverride2=c.themeOverride)||void 0===_c$themeOverride2?void 0:_c$themeOverride2.fgIconHeader)){const finalTheme={...theme,...c.themeOverride};for(const v of variantList){const[bg,fg]=getColors(v,finalTheme);map.add(makeExtraMapIndex(bg,fg))}}}const newMap=[...map];newMap.sort();let hasDiff=!1;for(const[index,key]of newMap.entries())if(key!==this.colorMap[index]){hasDiff=!0;break}if(!hasDiff)return!1;this.colorMap=newMap,this.spriteCanvas=document.createElement("canvas"),this.spriteCanvas.width=40*this.spriteList.length,this.spriteCanvas.height=40*this.colorMap.length;const ctx=this.spriteCanvas.getContext("2d");if(null===ctx)return!1;let x=0;for(const key of this.spriteList){const sprite=this.headerIcons[key];let y=0;for(const ex of this.colorMap){const[bgColor,fgColor]=getColorsForIndex(ex),imgSource=new Image;imgSource.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(sprite({fgColor:fgColor,bgColor:bgColor}))}`,await imgSource.decode(),ctx.drawImage(imgSource,x,y,40,40),y+=40}x+=40}return!0}}var utils=__webpack_require__(20),range=__webpack_require__(123),range_default=__webpack_require__.n(range);const cache={};let div=null;function parseToRgba(color){const normalizedColor=color.toLowerCase().trim();if(void 0!==cache[normalizedColor])return cache[normalizedColor];div=div||function createDiv(){const d=document.createElement("div");return d.classList.add("color2k-parser"),d.style.opacity="0",d.style.pointerEvents="none",d.style.position="fixed",document.body.appendChild(d),d}(),div.style.color="#000",div.style.color=normalizedColor;const control=getComputedStyle(div).color;div.style.color="#fff",div.style.color=normalizedColor;const computedColor=getComputedStyle(div).color;if(computedColor!==control)throw new Error("Could not parse color");const result=computedColor.replace(/[^\d.,]/g,"").split(",").map(parseFloat);return result.length<4&&result.push(1),cache[normalizedColor]=result,result}function withAlpha(color,alpha){const[r,g,b]=parseToRgba(color);return`rgba(${r}, ${g}, ${b}, ${alpha})`}var cells=__webpack_require__(66);function drawCell(ctx,row,cell,col,x,y,w,h,highlighted,theme,drawCustomCell,imageLoader,hoverAmount,hoverInfo,frameTime,lastToken,enqueue){let hoverX,hoverY,result;void 0!==hoverInfo&&hoverInfo[0][0]===col&&hoverInfo[0][1]===row&&(hoverX=hoverInfo[1][0],hoverY=hoverInfo[1][1]);const args={ctx:ctx,theme:theme,col:col,row:row,cell:cell,x:x,y:y,w:w,h:h,highlighted:highlighted,hoverAmount:hoverAmount,hoverX:hoverX,hoverY:hoverY,imageLoader:imageLoader};return Object(data_grid_lib.i)(args,cell.lastUpdated,frameTime,(forcePrep=>{if(!(!Object(data_grid_types.f)(cell)&&!0===(null==drawCustomCell?void 0:drawCustomCell({ctx:ctx,cell:cell,theme:theme,rect:{x:x,y:y,width:w,height:h},col:col,row:row,hoverAmount:hoverAmount,hoverX:hoverX,hoverY:hoverY,highlighted:highlighted,imageLoader:imageLoader})))&&cell.kind!==data_grid_types.b.Custom){const r=cells.a[cell.kind];var _r$renderPrep;if(lastToken!==r||forcePrep)null===(_r$renderPrep=r.renderPrep)||void 0===_r$renderPrep||_r$renderPrep.call(r,args);r.render(args),result=r}}))&&(null==enqueue||enqueue([col,row])),result}function drawGridLines(ctx,effectiveCols,cellYOffset,translateX,translateY,width,height,groupHeaderHeight,totalHeaderHeight,getRowHeight,verticalBorder,lastRowSticky,rows,theme){var _theme$horizontalBord;let verticalOnly=arguments.length>14&&void 0!==arguments[14]&&arguments[14];const hColor=null!==(_theme$horizontalBord=theme.horizontalBorderColor)&&void 0!==_theme$horizontalBord?_theme$horizontalBord:theme.borderColor,vColor=theme.borderColor;ctx.beginPath(),ctx.moveTo(0,totalHeaderHeight+.5),ctx.lineTo(width,totalHeaderHeight+.5),ctx.strokeStyle=theme.bgHeader,ctx.lineWidth=1,ctx.stroke(),ctx.beginPath();let x=.5;for(let index=0;index<effectiveCols.length;index++){const c=effectiveCols[index];if(0===c.width)continue;x+=c.width;const tx=c.sticky?x:x+translateX;(index===effectiveCols.length-1||verticalBorder(index+1))&&(ctx.moveTo(tx,groupHeaderHeight),ctx.lineTo(tx,height)),vColor!==hColor&&(ctx.strokeStyle=vColor,ctx.stroke(),ctx.beginPath())}const stickyHeight=getRowHeight(rows-1),stickyRowY=height-stickyHeight+.5;if(lastRowSticky&&(ctx.moveTo(0,stickyRowY),ctx.lineTo(width,stickyRowY)),!0!==verticalOnly){let y=totalHeaderHeight+.5,row=cellYOffset,isHeader=!0;const target=lastRowSticky?height-stickyHeight:height;for(;y+translateY<=target;){const ty=isHeader?y:y+translateY;(!lastRowSticky||row!==rows-1||Math.abs(ty-stickyRowY)>1)&&(ctx.moveTo(0,ty),ctx.lineTo(width,ty)),y+=getRowHeight(row),isHeader=!1,row++}}ctx.strokeStyle=hColor,ctx.stroke(),ctx.beginPath()}function getActionBoundsForGroup(box,actions){const result=[];let x=box.x+box.width-26*actions.length;const y=box.y+box.height/2-13;for(let i=0;i<actions.length;i++)result.push({x:x,y:y,width:26,height:26}),x+=26;return result}function pointInRect(rect,x,y){return x>=rect.x&&x<=rect.x+rect.width&&y>=rect.y&&y<=rect.y+rect.height}function getHeaderMenuBounds(x,y,width,height){return{x:x+width-30,y:Math.max(y,y+height/2-15),width:30,height:Math.min(30,height)}}function drawGridHeaders(ctx,effectiveCols,enableGroups,hovered,width,translateX,headerHeight,groupHeaderHeight,selectedColumns,dragAndDropState,isResizing,selectedCell,outerTheme,spriteManager,hoverValues,verticalBorder,getGroupDetails,damage,drawHeaderCallback){var _hovered$3;const totalHeaderHeight=headerHeight+groupHeaderHeight;if(totalHeaderHeight<=0)return;ctx.fillStyle=outerTheme.bgHeader,ctx.fillRect(0,0,width,totalHeaderHeight);const[hCol,hRow]=null!==(_hovered$3=null==hovered?void 0:hovered[0])&&void 0!==_hovered$3?_hovered$3:[],font=`${outerTheme.headerFontStyle} ${outerTheme.fontFamily}`;ctx.font=font,walkColumns(effectiveCols,0,translateX,0,totalHeaderHeight,((c,x,_y,clipX)=>{var _c$group,_hoverValues$find$hov,_hoverValues$find;if(void 0!==damage&&!damage.some((d=>-1===d[1]&&d[0]===c.sourceIndex)))return;const diff=Math.max(0,clipX-x);ctx.save(),ctx.beginPath(),ctx.rect(x+diff,groupHeaderHeight,c.width-diff,headerHeight),ctx.clip();const groupTheme=getGroupDetails(null!==(_c$group=c.group)&&void 0!==_c$group?_c$group:"").overrideTheme,theme=void 0===c.themeOverride&&void 0===groupTheme?outerTheme:{...outerTheme,...groupTheme,...c.themeOverride};theme.bgHeader!==outerTheme.bgHeader&&(ctx.fillStyle=theme.bgHeader,ctx.fill());const f=`${theme.headerFontStyle} ${theme.fontFamily}`;font!==f&&(ctx.font=f);const selected=selectedColumns.hasIndex(c.sourceIndex),noHover=void 0!==dragAndDropState||isResizing,hoveredBoolean=!noHover&&-1===hRow&&hCol===c.sourceIndex,hover=noHover?0:null!==(_hoverValues$find$hov=null===(_hoverValues$find=hoverValues.find((s=>s.item[0]===c.sourceIndex&&-1===s.item[1])))||void 0===_hoverValues$find?void 0:_hoverValues$find.hoverAmount)&&void 0!==_hoverValues$find$hov?_hoverValues$find$hov:0,hasSelectedCell=void 0!==selectedCell&&selectedCell.cell[0]===c.sourceIndex,bgFillStyle=selected?theme.accentColor:hasSelectedCell?theme.bgHeaderHasFocus:theme.bgHeader,y=enableGroups?groupHeaderHeight:0,xOffset=0===c.sourceIndex?0:1;selected?(ctx.fillStyle=bgFillStyle,ctx.fillRect(x+xOffset,y,c.width-xOffset,headerHeight)):(hasSelectedCell||hover>0)&&(ctx.beginPath(),ctx.rect(x+xOffset,y,c.width-xOffset,headerHeight),hasSelectedCell&&(ctx.fillStyle=theme.bgHeaderHasFocus,ctx.fill()),hover>0&&(ctx.globalAlpha=hover,ctx.fillStyle=theme.bgHeaderHovered,ctx.fill(),ctx.globalAlpha=1)),function data_grid_render_drawHeader(ctx,x,y,width,height,c,selected,theme,isHovered,hasSelectedCell,hoverAmount,spriteManager,drawHeaderCallback){const menuBounds=getHeaderMenuBounds(x,y,width,height);if(void 0!==drawHeaderCallback&&drawHeaderCallback({ctx:ctx,theme:theme,rect:{x:x,y:y,width:width,height:height},column:c,isSelected:selected,hoverAmount:hoverAmount,isHovered:isHovered,hasSelectedCell:hasSelectedCell,spriteManager:spriteManager,menuBounds:menuBounds}))return;const fillStyle=selected?theme.textHeaderSelected:theme.textHeader;let drawX=x+8;if(void 0!==c.icon){let variant=selected?"selected":"normal";"highlight"===c.style&&(variant=selected?"selected":"special"),spriteManager.drawSprite(c.icon,variant,ctx,drawX,y+(height-20)/2,20,theme),void 0!==c.overlayIcon&&spriteManager.drawSprite(c.overlayIcon,selected?"selected":"special",ctx,drawX+9,y+((height-18)/2+6),18,theme),drawX+=26}if(isHovered&&!0===c.hasMenu&&width>35){const fadeWidth=35,fadeStartPercent=(width-fadeWidth)/width,fadeEndPercent=(width-.7*fadeWidth)/width,grad=ctx.createLinearGradient(x,0,x+width,0),trans=withAlpha(fillStyle,0);grad.addColorStop(0,fillStyle),grad.addColorStop(fadeStartPercent,fillStyle),grad.addColorStop(fadeEndPercent,trans),grad.addColorStop(1,trans),ctx.fillStyle=grad}else ctx.fillStyle=fillStyle;if(ctx.fillText(c.title,drawX,y+height/2+1),isHovered&&!0===c.hasMenu){ctx.beginPath();const triangleX=menuBounds.x+menuBounds.width/2-5.5,triangleY=menuBounds.y+menuBounds.height/2-3;Object(data_grid_lib.q)(ctx,[{x:triangleX,y:triangleY},{x:triangleX+11,y:triangleY},{x:triangleX+5.5,y:triangleY+6}],1),ctx.fillStyle=fillStyle,ctx.fill()}}(ctx,x,y,c.width,headerHeight,c,selected,theme,hoveredBoolean,hasSelectedCell,hover,spriteManager,drawHeaderCallback),ctx.restore()})),enableGroups&&function drawGroups(ctx,effectiveCols,width,translateX,groupHeaderHeight,hovered,theme,spriteManager,_hoverValues,verticalBorder,getGroupDetails,damage){var _hovered$;const[hCol,hRow]=null!==(_hovered$=null==hovered?void 0:hovered[0])&&void 0!==_hovered$?_hovered$:[];let finalX=0;walkGroups(effectiveCols,width,translateX,groupHeaderHeight,((span,groupName,x,y,w,h)=>{var _groupTheme$textGroup;if(void 0!==damage&&!damage.some((d=>-2===d[1]&&d[0]>=span[0]&&d[0]<=span[1])))return;ctx.save(),ctx.beginPath(),ctx.rect(x,y,w,h),ctx.clip();const group=getGroupDetails(groupName),groupTheme=void 0===(null==group?void 0:group.overrideTheme)?theme:{...theme,...group.overrideTheme},isHovered=-2===hRow&&void 0!==hCol&&hCol>=span[0]&&hCol<=span[1],fillColor=isHovered?groupTheme.bgHeaderHovered:groupTheme.bgHeader;if(fillColor!==theme.bgHeader&&(ctx.fillStyle=fillColor,ctx.fill()),ctx.fillStyle=null!==(_groupTheme$textGroup=groupTheme.textGroupHeader)&&void 0!==_groupTheme$textGroup?_groupTheme$textGroup:groupTheme.textHeader,void 0!==group){let drawX=x;if(void 0!==group.icon&&(spriteManager.drawSprite(group.icon,"normal",ctx,drawX+8,(groupHeaderHeight-20)/2,20,groupTheme),drawX+=26),ctx.fillText(group.name,drawX+8,groupHeaderHeight/2+1),void 0!==group.actions&&isHovered){var _hovered$2;const actionBoxes=getActionBoundsForGroup({x:x,y:y,width:w,height:h},group.actions);ctx.beginPath();const fadeStartX=actionBoxes[0].x-10,fadeWidth=x+w-fadeStartX;ctx.rect(fadeStartX,0,fadeWidth,groupHeaderHeight);const grad=ctx.createLinearGradient(fadeStartX,0,fadeStartX+fadeWidth,0),trans=withAlpha(fillColor,0);grad.addColorStop(0,trans),grad.addColorStop(10/fadeWidth,fillColor),grad.addColorStop(1,fillColor),ctx.fillStyle=grad,ctx.fill(),ctx.globalAlpha=.6;const[mouseX,mouseY]=null!==(_hovered$2=null==hovered?void 0:hovered[1])&&void 0!==_hovered$2?_hovered$2:[-1,-1];for(let i=0;i<group.actions.length;i++){const action=group.actions[i],box=actionBoxes[i],actionHovered=pointInRect(box,mouseX+x,mouseY);actionHovered&&(ctx.globalAlpha=1),spriteManager.drawSprite(action.icon,"normal",ctx,box.x+box.width/2-10,box.y+box.height/2-10,20,groupTheme),actionHovered&&(ctx.globalAlpha=.6)}ctx.globalAlpha=1}}verticalBorder(span[0])&&(ctx.beginPath(),ctx.moveTo(x+.5,0),ctx.lineTo(x+.5,groupHeaderHeight),ctx.strokeStyle=theme.borderColor,ctx.lineWidth=1,ctx.stroke()),ctx.restore(),finalX=x+w})),ctx.beginPath(),ctx.moveTo(finalX+.5,0),ctx.lineTo(finalX+.5,groupHeaderHeight),ctx.moveTo(0,groupHeaderHeight+.5),ctx.lineTo(width,groupHeaderHeight+.5),ctx.strokeStyle=theme.borderColor,ctx.lineWidth=1,ctx.stroke()}(ctx,effectiveCols,width,translateX,groupHeaderHeight,hovered,outerTheme,spriteManager,0,verticalBorder,getGroupDetails,damage)}function intersectRect(x1,y1,w1,h1,x2,y2,w2,h2){return x1<=x2+w2&&x2<=x1+w1&&y1<=y2+h2&&y2<=y1+h1}function clipDamage(ctx,effectiveColumns,width,height,groupHeaderHeight,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,lastRowSticky,damage){if(void 0===damage||0===damage.length)return;const stickyRowHeight=lastRowSticky?getRowHeight(rows-1):0;ctx.beginPath(),walkGroups(effectiveColumns,width,translateX,groupHeaderHeight,((span,_group,x,y,w,h)=>{for(let i=0;i<damage.length;i++){const d=damage[i];if(-2===d[1]&&d[0]>=span[0]&&d[0]<=span[1]){ctx.rect(x,y,w,h);break}}})),walkColumns(effectiveColumns,cellYOffset,translateX,translateY,totalHeaderHeight,((c,drawX,colDrawY,clipX,startRow)=>{const diff=Math.max(0,clipX-drawX),finalX=drawX+diff+1,finalWidth=c.width-diff-1;for(let i=0;i<damage.length;i++){const d=damage[i];if(d[0]===c.sourceIndex&&(-1===d[1]||void 0===d[1])){ctx.rect(finalX,groupHeaderHeight,finalWidth,totalHeaderHeight-groupHeaderHeight);break}}walkRowsInCol(startRow,colDrawY,height,rows,getRowHeight,lastRowSticky,((drawY,row,rh,isSticky)=>{let isDamaged=!1;for(let i=0;i<damage.length;i++){const d=damage[i];if(d[0]===c.sourceIndex&&d[1]===row){isDamaged=!0;break}}if(isDamaged){const top=drawY+1,h=(isSticky?top+rh-1:Math.min(top+rh-1,height-stickyRowHeight))-top;h>0&&ctx.rect(finalX,top,finalWidth,h)}}))})),ctx.clip()}function drawCells(ctx,effectiveColumns,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,getCellContent,getGroupDetails,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,selectedCell,selectedColumns,prelightCells,drawCustomCell,imageLoader,hoverValues,hoverInfo,outerTheme,enqueue){var _damage$length;let toDraw=null!==(_damage$length=null==damage?void 0:damage.length)&&void 0!==_damage$length?_damage$length:Number.MAX_SAFE_INTEGER;const frameTime=performance.now();let font;walkColumns(effectiveColumns,cellYOffset,translateX,translateY,totalHeaderHeight,((c,drawX,colDrawStartY,clipX,startRow)=>{var _c$group2;const diff=Math.max(0,clipX-drawX),colDrawX=drawX+diff,colDrawY=totalHeaderHeight+1,colWidth=c.width-diff,colHeight=height-totalHeaderHeight-1;if(drawRegions.length>0){let found=!1;for(let i=0;i<drawRegions.length;i++){const dr=drawRegions[i];if(intersectRect(colDrawX,colDrawY,colWidth,colHeight,dr.x,dr.y,dr.width,dr.height)){found=!0;break}}if(!found)return}ctx.save(),ctx.beginPath(),ctx.rect(colDrawX,colDrawY,colWidth,colHeight),ctx.clip();const groupTheme=getGroupDetails(null!==(_c$group2=c.group)&&void 0!==_c$group2?_c$group2:"").overrideTheme,colTheme=void 0===c.themeOverride&&void 0===groupTheme?outerTheme:{...outerTheme,...groupTheme,...c.themeOverride},colFont=`${colTheme.baseFontStyle} ${colTheme.fontFamily}`;let lastToken;return colFont!==font&&(font=colFont,ctx.font=colFont),walkRowsInCol(startRow,colDrawStartY,height,rows,getRowHeight,lastRowSticky,((drawY,row,rh,isSticky)=>{if(void 0!==damage){let found=!1;for(let i=0;i<damage.length;i++){const d=damage[i];if(d[0]===c.sourceIndex&&d[1]===row){found=!0;break}}if(!found)return}if(drawRegions.length>0){let found=!1;for(let i=0;i<drawRegions.length;i++){const dr=drawRegions[i];if(intersectRect(drawX,drawY,c.width,rh,dr.x,dr.y,dr.width,dr.height)){found=!0;break}}if(!found)return}const rowSelected=selectedRows.hasIndex(row),rowDisabled=disabledRows.hasIndex(row),cell=row<rows?getCellContent([c.sourceIndex,row]):{kind:data_grid_types.b.Loading,allowOverlay:!1},theme=void 0===cell.themeOverride?colTheme:{...colTheme,...cell.themeOverride};ctx.beginPath();let highlighted=(null==selectedCell?void 0:selectedCell.cell[0])===c.sourceIndex&&(null==selectedCell?void 0:selectedCell.cell[1])===row||!isSticky&&(rowSelected||selectedColumns.hasIndex(c.sourceIndex));if(void 0!==(null==selectedCell?void 0:selectedCell.range)){const{range:range}=selectedCell;c.sourceIndex>=range.x&&c.sourceIndex<range.x+range.width&&row>=range.y&&row<range.y+range.height&&(highlighted=!0)}(isSticky||theme.bgCell!==outerTheme.bgCell)&&(ctx.fillStyle=theme.bgCell,ctx.fillRect(drawX,drawY,c.width,rh),lastToken=void 0),highlighted||rowDisabled?(rowDisabled&&(ctx.fillStyle=theme.bgHeader,ctx.fillRect(drawX,drawY,c.width,rh)),highlighted&&(ctx.fillStyle=theme.accentLight,ctx.fillRect(drawX,drawY,c.width,rh)),lastToken=void 0):!0===(null==prelightCells?void 0:prelightCells.some((pre=>pre[0]===c.sourceIndex&&pre[1]===row)))&&(ctx.fillStyle=theme.bgSearchResult,ctx.fillRect(drawX,drawY,c.width,rh),lastToken=void 0),"faded"===cell.style&&(ctx.globalAlpha=.6);const hoverValue=hoverValues.find((hv=>hv.item[0]===c.sourceIndex&&hv.item[1]===row));if(c.width>10){var _hoverValue$hoverAmou;if(theme!==colTheme){const cellFont=`${theme.baseFontStyle} ${theme.fontFamily}`;cellFont!==font&&(ctx.font=cellFont,font=cellFont)}const drawResult=drawCell(ctx,row,cell,c.sourceIndex,drawX,drawY,c.width,rh,highlighted,theme,drawCustomCell,imageLoader,null!==(_hoverValue$hoverAmou=null==hoverValue?void 0:hoverValue.hoverAmount)&&void 0!==_hoverValue$hoverAmou?_hoverValue$hoverAmou:0,hoverInfo,frameTime,lastToken,enqueue);lastToken=drawResult}return ctx.globalAlpha=1,toDraw--,toDraw<=0})),ctx.restore(),toDraw<=0}))}function drawFocusRing(ctx,width,height,cellYOffset,translateX,translateY,effectiveCols,theme,totalHeaderHeight,selectedCell,getRowHeight,lastRowSticky,rows){if(void 0===selectedCell||effectiveCols.find((c=>c.sourceIndex===selectedCell.cell[0]===void 0)))return;const[targetCol,targetRow]=selectedCell.cell,stickRowHeight=lastRowSticky&&!(lastRowSticky&&targetRow===rows-1)?getRowHeight(rows-1)-1:0;ctx.save(),ctx.beginPath(),ctx.rect(0,totalHeaderHeight,width,height-totalHeaderHeight-stickRowHeight),ctx.clip(),walkColumns(effectiveCols,cellYOffset,translateX,translateY,totalHeaderHeight,((col,drawX,colDrawY,clipX,startRow)=>{if(col.sourceIndex===targetCol)return walkRowsInCol(startRow,colDrawY,height,rows,getRowHeight,lastRowSticky,((drawY,row,rh)=>{var _col$themeOverride$ac,_col$themeOverride;if(row===targetRow){if(clipX>drawX){const diff=Math.max(0,clipX-drawX);ctx.beginPath(),ctx.rect(drawX+diff,drawY,col.width-diff+1,rh+1),ctx.clip()}return ctx.beginPath(),ctx.rect(drawX+.5,drawY+.5,col.width,rh),ctx.strokeStyle=null!==(_col$themeOverride$ac=null===(_col$themeOverride=col.themeOverride)||void 0===_col$themeOverride?void 0:_col$themeOverride.accentColor)&&void 0!==_col$themeOverride$ac?_col$themeOverride$ac:theme.accentColor,ctx.lineWidth=1,ctx.stroke(),!0}})),!0})),ctx.restore()}function drawGrid(canvas,buffers,width,height,cellXOffset,cellYOffset,translateX,translateY,columns,mappedColumns,enableGroups,freezeColumns,dragAndDropState,theme,headerHeight,groupHeaderHeight,selectedRows,disabledRows,rowHeight,verticalBorder,selectedColumns,isResizing,selectedCell,lastRowSticky,rows,getCellContent,getGroupDetails,drawCustomCell,drawHeaderCallback,prelightCells,imageLoader,lastBlitData,canBlit,damage,hoverValues,hoverInfo,spriteManager,scrolling,enqueue){var _window$devicePixelRa;if(0===width||0===height)return;const dpr=scrolling?1:Math.ceil(null!==(_window$devicePixelRa=window.devicePixelRatio)&&void 0!==_window$devicePixelRa?_window$devicePixelRa:1);canvas.width===width*dpr&&canvas.height===height*dpr||(canvas.width=width*dpr,canvas.height=height*dpr);const overlayCanvas=buffers.overlay,totalHeaderHeight=enableGroups?groupHeaderHeight+headerHeight:headerHeight;overlayCanvas.width===width*dpr&&overlayCanvas.height===totalHeaderHeight*dpr||(overlayCanvas.width=width*dpr,overlayCanvas.height=totalHeaderHeight*dpr);const last=lastBlitData.current;if(!0===canBlit&&cellXOffset===last.cellXOffset&&cellYOffset===last.cellYOffset&&translateX===last.translateX&&translateY===last.translateY)return;const targetCtx=canvas.getContext("2d",{alpha:!1}),overlayCtx=overlayCanvas.getContext("2d",{alpha:!1});if(null===overlayCtx||null===targetCtx)return;const getRowHeight=r=>"number"==typeof rowHeight?rowHeight:rowHeight(r);overlayCtx.save(),overlayCtx.beginPath(),targetCtx.save(),targetCtx.beginPath(),overlayCtx.textBaseline="middle",targetCtx.textBaseline="middle",targetCtx.font=`${theme.baseFontStyle} ${theme.fontFamily}`,overlayCtx.font=`${theme.baseFontStyle} ${theme.fontFamily}`,1!==dpr&&(overlayCtx.scale(dpr,dpr),targetCtx.scale(dpr,dpr));const effectiveCols=Object(data_grid_lib.k)(mappedColumns,cellXOffset,width,dragAndDropState,translateX);let drawRegions=[];const drawHeaderTexture=()=>{drawGridHeaders(overlayCtx,effectiveCols,enableGroups,hoverInfo,width,translateX,headerHeight,groupHeaderHeight,selectedColumns,dragAndDropState,isResizing,selectedCell,theme,spriteManager,hoverValues,verticalBorder,getGroupDetails,damage,drawHeaderCallback),drawGridLines(overlayCtx,effectiveCols,cellYOffset,translateX,translateY,width,height,groupHeaderHeight,totalHeaderHeight,getRowHeight,verticalBorder,lastRowSticky,rows,theme,!0)};if(void 0!==damage){let doHeaders=!1;return(damage=damage.filter((x=>(doHeaders=doHeaders||x[1]<0,x[1]<0||intersectRect(cellXOffset,cellYOffset,effectiveCols.length,300,x[0],x[1],1,1)||intersectRect(0,cellYOffset,freezeColumns,300,x[0],x[1],1,1))))).length>0&&(clipDamage(targetCtx,effectiveCols,width,height,groupHeaderHeight,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,lastRowSticky,damage),targetCtx.fillStyle=theme.bgCell,targetCtx.fillRect(0,totalHeaderHeight+1,width,height-totalHeaderHeight-1),drawCells(targetCtx,effectiveCols,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,getCellContent,getGroupDetails,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,selectedCell,selectedColumns,prelightCells,drawCustomCell,imageLoader,hoverValues,hoverInfo,theme,enqueue)),doHeaders&&(clipDamage(overlayCtx,effectiveCols,width,totalHeaderHeight,groupHeaderHeight,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,lastRowSticky,damage),drawHeaderTexture()),targetCtx.restore(),void overlayCtx.restore()}if(canBlit&&cellXOffset===last.cellXOffset&&translateX===last.translateX||drawHeaderTexture(),!0===canBlit){const{regions:regions}=function blitLastFrame(ctx,canvas,last,cellXOffset,cellYOffset,translateX,translateY,lastRowSticky,width,height,rows,totalHeaderHeight,dpr,columns,effectiveCols,getRowHeight){const drawRegions=[];let blittedYOnly=!1;ctx.imageSmoothingEnabled=!1;const minY=Math.min(last.cellYOffset,cellYOffset),maxY=Math.max(last.cellYOffset,cellYOffset);let deltaY=0;for(let i=minY;i<maxY;i++)deltaY+=getRowHeight(i);cellYOffset>last.cellYOffset&&(deltaY=-deltaY),deltaY+=translateY-last.translateY;const minX=Math.min(last.cellXOffset,cellXOffset),maxX=Math.max(last.cellXOffset,cellXOffset);let deltaX=0;for(let i=minX;i<maxX;i++)deltaX+=columns[i].width;cellXOffset>last.cellXOffset&&(deltaX=-deltaX),deltaX+=translateX-last.translateX;let stickyWidth=Object(data_grid_lib.m)(effectiveCols);if(stickyWidth>0&&stickyWidth++,0!==deltaX&&0!==deltaY)return{regions:[],yOnly:!1};const stickyRowHeight=lastRowSticky?getRowHeight(rows-1):0,blitWidth=width-stickyWidth-Math.abs(deltaX),blitHeight=height-totalHeaderHeight-stickyRowHeight-Math.abs(deltaY)-1;if(blitWidth>150&&blitHeight>150){blittedYOnly=0===deltaX;const args={sx:0,sy:0,sw:width*dpr,sh:height*dpr,dx:0,dy:0,dw:width,dh:height};deltaY>0?(args.sy=(totalHeaderHeight+1)*dpr,args.sh=blitHeight*dpr,args.dy=deltaY+totalHeaderHeight+1,args.dh=blitHeight,drawRegions.push({x:0,y:totalHeaderHeight,width:width,height:deltaY+1})):deltaY<0&&(args.sy=(-deltaY+totalHeaderHeight+1)*dpr,args.sh=blitHeight*dpr,args.dy=totalHeaderHeight+1,args.dh=blitHeight,drawRegions.push({x:0,y:height+deltaY-stickyRowHeight,width:width,height:-deltaY+stickyRowHeight})),deltaX>0?(args.sx=stickyWidth*dpr,args.sw=blitWidth*dpr,args.dx=deltaX+stickyWidth,args.dw=blitWidth,drawRegions.push({x:stickyWidth-1,y:0,width:deltaX+2,height:height})):deltaX<0&&(args.sx=(stickyWidth-deltaX)*dpr,args.sw=blitWidth*dpr,args.dx=stickyWidth,args.dw=blitWidth,drawRegions.push({x:width+deltaX,y:0,width:-deltaX,height:height}),ctx.beginPath()),ctx.drawImage(canvas,args.sx,args.sy,args.sw,args.sh,args.dx,args.dy,args.dw,args.dh)}return ctx.imageSmoothingEnabled=!0,{regions:drawRegions,yOnly:blittedYOnly}}(targetCtx,canvas,last,cellXOffset,cellYOffset,translateX,translateY,lastRowSticky,width,height,rows,totalHeaderHeight,dpr,columns,effectiveCols,getRowHeight);drawRegions=regions}if(function overdrawStickyBoundaries(ctx,effectiveCols,width,height,totalHeaderHeight,lastRowSticky,rows,getRowHeight,theme){const drawX=Object(data_grid_lib.m)(effectiveCols);ctx.beginPath(),ctx.moveTo(0,totalHeaderHeight+.5),ctx.lineTo(width,totalHeaderHeight+.5),ctx.strokeStyle=theme.bgHeader,ctx.stroke(),ctx.beginPath();let doCell=!1;if(0!==drawX&&(ctx.moveTo(drawX+.5,0),ctx.lineTo(drawX+.5,height),doCell=!0),lastRowSticky){const h=getRowHeight(rows-1);ctx.moveTo(0,height-h+.5),ctx.lineTo(width,height-h+.5),doCell=!0}doCell&&(ctx.strokeStyle=theme.bgCell,ctx.stroke()),ctx.moveTo(0,totalHeaderHeight+.5),ctx.lineTo(width,totalHeaderHeight+.5),ctx.strokeStyle=theme.borderColor,ctx.stroke()}(targetCtx,effectiveCols,width,height,totalHeaderHeight,lastRowSticky,rows,getRowHeight,theme),void 0!==selectedCell&&selectedCell.cell[0]===freezeColumns-1&&drawFocusRing(targetCtx,width,height,cellYOffset,translateX,translateY,effectiveCols,theme,totalHeaderHeight,selectedCell,getRowHeight,lastRowSticky,rows),drawRegions.length>0){targetCtx.beginPath();for(const r of drawRegions)targetCtx.rect(r.x,r.y,r.width,r.height);targetCtx.clip(),targetCtx.beginPath()}targetCtx.fillStyle=theme.bgCell,targetCtx.fillRect(0,0,width,height),drawCells(targetCtx,effectiveCols,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,getCellContent,getGroupDetails,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,selectedCell,selectedColumns,prelightCells,drawCustomCell,imageLoader,hoverValues,hoverInfo,theme,enqueue),function drawBlanks(ctx,effectiveColumns,width,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,theme){void 0===damage&&walkColumns(effectiveColumns,cellYOffset,translateX,translateY,totalHeaderHeight,((c,drawX,colDrawY,clipX,startRow)=>{if(c!==effectiveColumns[effectiveColumns.length-1])return;drawX+=c.width;const x=Math.max(drawX,clipX);x>width||(ctx.save(),ctx.beginPath(),ctx.rect(x,totalHeaderHeight+1,1e4,height-totalHeaderHeight-1),ctx.clip(),walkRowsInCol(startRow,colDrawY,height,rows,getRowHeight,lastRowSticky,((drawY,row,rh,isSticky)=>{if(!isSticky&&drawRegions.length>0&&!drawRegions.some((dr=>intersectRect(drawX,drawY,1e4,rh,dr.x,dr.y,dr.width,dr.height))))return;const rowSelected=selectedRows.hasIndex(row),rowDisabled=disabledRows.hasIndex(row);ctx.beginPath(),rowDisabled&&(ctx.fillStyle=theme.bgHeader,ctx.fillRect(drawX,drawY,1e4,rh)),rowSelected&&(ctx.fillStyle=theme.accentLight,ctx.fillRect(drawX,drawY,1e4,rh))})),ctx.restore())}))}(targetCtx,effectiveCols,width,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,theme),drawGridLines(targetCtx,effectiveCols,cellYOffset,translateX,translateY,width,height,groupHeaderHeight,totalHeaderHeight,getRowHeight,verticalBorder,lastRowSticky,rows,theme),drawFocusRing(targetCtx,width,height,cellYOffset,translateX,translateY,effectiveCols,theme,totalHeaderHeight,selectedCell,getRowHeight,lastRowSticky,rows),null==imageLoader||imageLoader.setWindow({x:cellXOffset,y:cellYOffset,width:effectiveCols.length,height:100},freezeColumns),lastBlitData.current={cellXOffset:cellXOffset,cellYOffset:cellYOffset,translateX:translateX,translateY:translateY},targetCtx.restore(),overlayCtx.restore()}function walkRowsInCol(startRow,drawY,height,rows,getRowHeight,lastRowSticky,cb){let y=drawY,row=startRow,doSticky=lastRowSticky;for(;y<height||doSticky;){const doingSticky=doSticky&&y>=height;doingSticky&&(doSticky=!1,row=rows-1);const rh=getRowHeight(row);doingSticky&&(y=height-rh);if(!(doSticky&&row===rows-1)&&!0===cb(y,row,rh,doingSticky))break;if(doingSticky)break;y+=rh,row++}}function walkColumns(effectiveCols,cellYOffset,translateX,translateY,totalHeaderHeight,cb){let x=0,clipX=0;const drawY=totalHeaderHeight+translateY;for(const c of effectiveCols){let drawX;if(drawX=c.sticky?clipX:x+translateX,!0===cb(c,drawX,drawY,clipX,cellYOffset))break;x+=c.width,clipX+=c.sticky?c.width:0}}function walkGroups(effectiveCols,width,translateX,groupHeaderHeight,cb){let x=0,clipX=0;for(let index=0;index<effectiveCols.length;index++){var _startCol$group;const startCol=effectiveCols[index];let end=index+1,boxWidth=startCol.width;for(startCol.sticky&&(clipX+=boxWidth);end<effectiveCols.length&&Object(data_grid_lib.n)(effectiveCols[end].group,startCol.group)&&effectiveCols[end].sticky===effectiveCols[index].sticky;){const endCol=effectiveCols[end];boxWidth+=endCol.width,end++,index++,endCol.sticky&&(clipX+=endCol.width)}const localX=x+(startCol.sticky?0:translateX),delta=startCol.sticky?0:Math.max(0,clipX-localX),w=Math.min(boxWidth-delta,width-(localX+delta));cb([startCol.sourceIndex,effectiveCols[end-1].sourceIndex],null!==(_startCol$group=startCol.group)&&void 0!==_startCol$group?_startCol$group:"",localX+delta,0,w,groupHeaderHeight),x+=boxWidth}}var clamp=__webpack_require__(49),clamp_default=__webpack_require__.n(clamp);const ease=new class Easing{constructor(p1x,p1y,p2x,p2y){this.ax=0,this.ay=0,this.bx=0,this.by=0,this.cx=0,this.cy=0,this.cx=3*p1x,this.bx=3*(p2x-p1x)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p1y,this.by=3*(p2y-p1y)-this.cy,this.ay=1-this.cy-this.by}sampleCurveX(t){return((this.ax*t+this.bx)*t+this.cx)*t}sampleCurveY(t){return((this.ay*t+this.by)*t+this.cy)*t}sampleCurveDerivativeX(t){return(3*this.ax*t+2*this.bx)*t+this.cx}solveCurveX(x){let t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){if(x2=this.sampleCurveX(t2)-x,Math.abs(x2)<1e-6)return t2;if(d2=this.sampleCurveDerivativeX(t2),Math.abs(d2)<1e-6)break;t2-=x2/d2}if(t0=0,t1=1,t2=x,t2<t0)return t0;if(t2>t1)return t1;for(;t0<t1;){if(x2=this.sampleCurveX(t2),Math.abs(x2-x)<1e-6)return t2;x>x2?t0=t2:t1=t2,t2=.5*(t1-t0)+t0}return t2}solve(x){return this.sampleCurveY(this.solveCurveX(x))}}(.25,.1,.25,1);class animation_manager_AnimationManager{constructor(callback){this.callback=callback,this.currentHoveredItem=void 0,this.leavingItems=[],this.lastAnimationTime=void 0,this.areSameItems=(left,right)=>(null==left?void 0:left[0])===(null==right?void 0:right[0])&&(null==left?void 0:left[1])===(null==right?void 0:right[1]),this.addToLeavingItems=item=>{void 0!==this.leavingItems.find((i=>this.areSameItems(i.item,item.item)))||this.leavingItems.push(item)},this.removeFromLeavingItems=item=>{var _leavingItem$hoverAmo;const leavingItem=this.leavingItems.find((e=>this.areSameItems(e.item,item)));return this.leavingItems=this.leavingItems.filter((i=>i!==leavingItem)),null!==(_leavingItem$hoverAmo=null==leavingItem?void 0:leavingItem.hoverAmount)&&void 0!==_leavingItem$hoverAmo?_leavingItem$hoverAmo:0},this.cleanUpLeavingElements=()=>{this.leavingItems=this.leavingItems.filter((i=>i.hoverAmount>0))},this.shouldStep=()=>{const hasLeavingItems=this.leavingItems.length>0,currentHoveredIsAnimating=void 0!==this.currentHoveredItem&&this.currentHoveredItem.hoverAmount<1;return hasLeavingItems||currentHoveredIsAnimating},this.getAnimatingItems=()=>void 0!==this.currentHoveredItem?[...this.leavingItems,this.currentHoveredItem]:this.leavingItems.map((x=>({...x,hoverAmount:ease.solve(x.hoverAmount)}))),this.step=timestamp=>{if(void 0===this.lastAnimationTime)this.lastAnimationTime=timestamp;else{const delta=(timestamp-this.lastAnimationTime)/80;for(const item of this.leavingItems)item.hoverAmount=clamp_default()(item.hoverAmount-delta,0,1);void 0!==this.currentHoveredItem&&(this.currentHoveredItem.hoverAmount=clamp_default()(this.currentHoveredItem.hoverAmount+delta,0,1));const animating=this.getAnimatingItems();this.callback(animating),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=timestamp,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0},this.setHovered=item=>{var _this$currentHoveredI;if(!this.areSameItems(null===(_this$currentHoveredI=this.currentHoveredItem)||void 0===_this$currentHoveredI?void 0:_this$currentHoveredI.item,item)){if(void 0!==this.currentHoveredItem&&this.addToLeavingItems(this.currentHoveredItem),void 0!==item){const hoverAmount=this.removeFromLeavingItems(item);this.currentHoveredItem={item:item,hoverAmount:hoverAmount}}else this.currentHoveredItem=void 0;void 0===this.lastAnimationTime&&window.requestAnimationFrame(this.step)}}}}var browser_detect=__webpack_require__(105);__webpack_exports__.a=react.memo(react.forwardRef(((p,forwardedRef)=>{var _p$translateX,_p$translateY,_p$experimental,_eventTargetRef$curre;const{width:width,height:height,className:className,columns:columns,cellXOffset:cellXOffsetReal,cellYOffset:cellYOffset,headerHeight:headerHeight,groupHeaderHeight:groupHeaderHeight,rowHeight:rowHeight,rows:rows,getCellContent:getCellContent,onHeaderMenuClick:onHeaderMenuClick,selectedRows:selectedRows,enableGroups:enableGroups,selectedCell:selectedCell,selectedColumns:selectedColumns,freezeColumns:freezeColumns,lastRowSticky:lastRowSticky,onMouseDown:onMouseDown,onMouseUp:onMouseUp,onMouseMoveRaw:onMouseMoveRaw,onMouseMove:onMouseMove,onItemHovered:onItemHovered,dragAndDropState:dragAndDropState,onKeyDown:onKeyDown,onKeyUp:onKeyUp,canvasRef:canvasRef,onDragStart:onDragStart,eventTargetRef:eventTargetRef,isResizing:isResizing,isDragging:isDragging,isDraggable:isDraggable=!1,allowResize:allowResize,disabledRows:disabledRows,getGroupDetails:getGroupDetails,prelightCells:prelightCells,headerIcons:headerIcons,verticalBorder:verticalBorder,drawHeader:drawHeader,drawCustomCell:drawCustomCell,onCellFocused:onCellFocused}=p,translateX=null!==(_p$translateX=p.translateX)&&void 0!==_p$translateX?_p$translateX:0,translateY=null!==(_p$translateY=p.translateY)&&void 0!==_p$translateY?_p$translateY:0,cellXOffset=Math.max(freezeColumns,Math.min(columns.length-1,cellXOffsetReal)),theme=Object(styled_components_browser_esm.d)(),ref=react.useRef(null),imageLoader=react.useMemo((()=>new image_window_loader),[]),canBlit=react.useRef(),damageRegion=react.useRef(void 0),[scrolling,setScrolling]=react.useState(!1),hoverValues=react.useRef([]),lastBlitData=react.useRef({cellXOffset:cellXOffset,cellYOffset:cellYOffset,translateX:translateX,translateY:translateY}),[hoveredItemInfo,setHoveredItemInfo]=react.useState(),[hoveredOnEdge,setHoveredOnEdge]=react.useState(),overlayRef=react.useRef(null),spriteManager=react.useMemo((()=>new data_grid_sprites_SpriteManager(headerIcons)),[headerIcons]),totalHeaderHeight=enableGroups?groupHeaderHeight+headerHeight:headerHeight,scrollingStopRef=react.useRef(-1),disableFirefoxRescaling=!0===(null===(_p$experimental=p.experimental)||void 0===_p$experimental?void 0:_p$experimental.disableFirefoxRescaling);react.useEffect((()=>{browser_detect.a&&1!==window.devicePixelRatio&&!disableFirefoxRescaling&&(-1!==scrollingStopRef.current&&setScrolling(!0),window.clearTimeout(scrollingStopRef.current),scrollingStopRef.current=window.setTimeout((()=>{setScrolling(!1),scrollingStopRef.current=-1}),200))}),[cellYOffset,cellXOffset,translateX,translateY,disableFirefoxRescaling]),react.useEffect((()=>{(async()=>{await spriteManager.buildSpriteMap(theme,columns)&&lastDrawRef.current()})()}),[columns,spriteManager,theme]);const mappedColumns=Object(data_grid_lib.r)(columns,freezeColumns),getBoundsForItem=react.useCallback(((canvas,col,row)=>{const rect=canvas.getBoundingClientRect(),result={x:rect.x,y:rect.y+totalHeaderHeight+translateY,width:0,height:0};if(col>=freezeColumns){const dir=cellXOffset>col?-1:1,freezeWidth=Object(data_grid_lib.m)(mappedColumns);result.x+=freezeWidth+translateX;for(let i=cellXOffset;i!==col;i+=dir)result.x+=mappedColumns[i].width*dir}else for(let i=0;i<col;i++)result.x+=mappedColumns[i].width;if(result.width=mappedColumns[col].width+1,-1===row)result.y=rect.y+groupHeaderHeight,result.height=headerHeight;else if(-2===row){result.y=rect.y,result.height=groupHeaderHeight;let start=col;const group=mappedColumns[col].group,sticky=mappedColumns[col].sticky;for(;start>0&&Object(data_grid_lib.n)(mappedColumns[start-1].group,group)&&mappedColumns[start-1].sticky===sticky;){const c=mappedColumns[start-1];result.x-=c.width,result.width+=c.width,start--}let end=col;for(;end+1<mappedColumns.length&&Object(data_grid_lib.n)(mappedColumns[end+1].group,group)&&mappedColumns[end+1].sticky===sticky;){const c=mappedColumns[end+1];result.width+=c.width,end++}if(!sticky){const freezeWidth=Object(data_grid_lib.m)(mappedColumns),clip=result.x-(rect.x+freezeWidth);clip<0&&(result.x-=clip,result.width+=clip),result.x+result.width>rect.right&&(result.width=rect.right-result.x)}}else if(lastRowSticky&&row===rows-1){const stickyHeight="number"==typeof rowHeight?rowHeight:rowHeight(row);result.y=rect.y+(height-stickyHeight),result.height=stickyHeight}else{const dir=cellYOffset>row?-1:1;for(let r=cellYOffset;r!==row;r+=dir)result.y+=("number"==typeof rowHeight?rowHeight:rowHeight(r))*dir;result.height=("number"==typeof rowHeight?rowHeight:rowHeight(row))+1}return result}),[totalHeaderHeight,translateY,freezeColumns,mappedColumns,lastRowSticky,rows,cellXOffset,translateX,groupHeaderHeight,headerHeight,rowHeight,height,cellYOffset]),getMouseArgsForPosition=react.useCallback(((canvas,posX,posY,ev)=>{const rect=canvas.getBoundingClientRect(),x=posX-rect.left,y=posY-rect.top,effectiveCols=Object(data_grid_lib.k)(mappedColumns,cellXOffset,width,void 0,translateX),col=Object(data_grid_lib.j)(x,effectiveCols,translateX),row=Object(data_grid_lib.l)(y,height,enableGroups,headerHeight,groupHeaderHeight,rows,rowHeight,cellYOffset,translateY,lastRowSticky),shiftKey=!0===(null==ev?void 0:ev.shiftKey),ctrlKey=!0===(null==ev?void 0:ev.ctrlKey),metaKey=!0===(null==ev?void 0:ev.metaKey),isTouch=void 0!==ev&&!(ev instanceof MouseEvent);let result;if(-1===col||y<0||x<0||void 0===row||x>width||y>height){const horizontal=x>width?-1:x<0?1:0,vertical=y>height?1:y<0?-1:0;let isEdge=!1;if(-1===col&&-1===row){const b=getBoundsForItem(canvas,mappedColumns.length-1,-1);isEdge=posX<b.x+b.width+5}result={kind:"out-of-bounds",location:[-1!==col?col:x<0?0:mappedColumns.length-1,null!=row?row:rows-1],direction:[horizontal,vertical],shiftKey:shiftKey,ctrlKey:ctrlKey,metaKey:metaKey,isEdge:isEdge,isTouch:isTouch}}else if(row<=-1){let bounds=getBoundsForItem(canvas,col,row),isEdge=void 0!==bounds&&bounds.x+bounds.width-posX<=5;const previousCol=col-1;var _mappedColumns$previo,_mappedColumns$col$gr;if(posX-bounds.x<=5&&previousCol>=0)isEdge=!0,bounds=getBoundsForItem(canvas,previousCol,row),result={kind:enableGroups&&-2===row?"group-header":"header",location:[previousCol,row],bounds:bounds,group:null!==(_mappedColumns$previo=mappedColumns[previousCol].group)&&void 0!==_mappedColumns$previo?_mappedColumns$previo:"",isEdge:isEdge,shiftKey:shiftKey,ctrlKey:ctrlKey,metaKey:metaKey,isTouch:isTouch,localEventX:posX-bounds.x,localEventY:posY-bounds.y};else result={kind:enableGroups&&-2===row?"group-header":"header",group:null!==(_mappedColumns$col$gr=mappedColumns[col].group)&&void 0!==_mappedColumns$col$gr?_mappedColumns$col$gr:"",location:[col,row],bounds:bounds,isEdge:isEdge,shiftKey:shiftKey,ctrlKey:ctrlKey,metaKey:metaKey,isTouch:isTouch,localEventX:posX-bounds.x,localEventY:posY-bounds.y}}else{const bounds=getBoundsForItem(canvas,col,row);result={kind:"cell",location:[col,row],bounds:bounds,isEdge:void 0!==bounds&&bounds.x+bounds.width-posX<5,shiftKey:shiftKey,ctrlKey:ctrlKey,metaKey:metaKey,isTouch:isTouch,localEventX:posX-bounds.x,localEventY:posY-bounds.y}}return result}),[mappedColumns,cellXOffset,width,translateX,height,enableGroups,headerHeight,groupHeaderHeight,rows,rowHeight,cellYOffset,translateY,lastRowSticky,getBoundsForItem]);const[hoveredItem]=null!=hoveredItemInfo?hoveredItemInfo:[],enqueueRef=react.useRef((_item=>{})),hoverInfoRef=react.useRef(hoveredItemInfo);hoverInfoRef.current=hoveredItemInfo;const draw=react.useCallback((()=>{var _canBlit$current;const canvas=ref.current,overlay=overlayRef.current;null!==canvas&&null!==overlay&&drawGrid(canvas,{overlay:overlay},width,height,cellXOffset,cellYOffset,Math.round(translateX),Math.round(translateY),columns,mappedColumns,enableGroups,freezeColumns,dragAndDropState,theme,headerHeight,groupHeaderHeight,null!=selectedRows?selectedRows:data_grid_types.a.empty(),null!=disabledRows?disabledRows:data_grid_types.a.empty(),rowHeight,verticalBorder,null!=selectedColumns?selectedColumns:data_grid_types.a.empty(),isResizing,selectedCell,lastRowSticky,rows,getCellContent,null!=getGroupDetails?getGroupDetails:name=>({name:name}),drawCustomCell,drawHeader,prelightCells,imageLoader,lastBlitData,null!==(_canBlit$current=canBlit.current)&&void 0!==_canBlit$current&&_canBlit$current,damageRegion.current,hoverValues.current,hoverInfoRef.current,spriteManager,scrolling,enqueueRef.current)}),[width,height,cellXOffset,cellYOffset,translateX,translateY,columns,mappedColumns,enableGroups,freezeColumns,dragAndDropState,theme,headerHeight,groupHeaderHeight,selectedRows,disabledRows,rowHeight,verticalBorder,selectedColumns,isResizing,selectedCell,lastRowSticky,rows,getCellContent,getGroupDetails,drawCustomCell,drawHeader,prelightCells,imageLoader,spriteManager,scrolling]);canBlit.current=void 0!==canBlit.current,react.useEffect((()=>{canBlit.current=!1}),[width,height,columns,theme,headerHeight,rowHeight,rows,isResizing,getCellContent,selectedRows,selectedColumns,selectedCell,dragAndDropState,prelightCells,scrolling]);const lastDrawRef=react.useRef(draw);react.useEffect((()=>{draw(),lastDrawRef.current=draw}),[draw]),react.useEffect((()=>{(async()=>{var _document,_document$fonts;if(void 0===(null===(_document=document)||void 0===_document||null===(_document$fonts=_document.fonts)||void 0===_document$fonts?void 0:_document$fonts.ready))return;await document.fonts.ready;const prev=canBlit.current;canBlit.current=!1,lastDrawRef.current(),canBlit.current=prev})()}),[]);const damageInternal=react.useCallback((locations=>{const last=canBlit.current;canBlit.current=!1,damageRegion.current=locations,lastDrawRef.current(),damageRegion.current=void 0,canBlit.current=last}),[]),enqueue=function useAnimationQueue(draw){const queue=react.useRef([]),drawRef=react.useRef(draw);drawRef.current=draw;const loop=react.useCallback((()=>{window.requestAnimationFrame((()=>{const toDraw=queue.current;queue.current=[],drawRef.current(toDraw)}))}),[]);return react.useCallback((item=>{(function hasItem(arr,item){for(let i=0;i<arr.length;i++)if(arr[i][0]===item[0]&&arr[i][1]===item[1])return!0;return!1})(queue.current,item)||(0===queue.current.length&&loop(),queue.current.push(item))}),[loop])}(damageInternal);enqueueRef.current=enqueue;const damage=react.useCallback((cells=>{damageInternal(cells.map((x=>x.cell)))}),[damageInternal]);imageLoader.setCallback(damageInternal);const[hCol,hRow]=null!=hoveredItem?hoveredItem:[],headerHovered=void 0!==hCol&&-1===hRow,groupHeaderHovered=void 0!==hCol&&-2===hRow;let clickableInnerCellHovered=!1,editableBoolHovered=!1;if(void 0!==hCol&&void 0!==hRow&&hRow>0){const cell=getCellContent([hCol,hRow]);clickableInnerCellHovered=cell.kind===data_grid_types.d.NewRow||cell.kind===data_grid_types.d.Marker&&"number"!==cell.markerKind,editableBoolHovered=cell.kind===data_grid_types.b.Boolean&&!0===cell.allowEdit}const cursor=isDragging?"grabbing":null!=hoveredOnEdge&&hoveredOnEdge||isResizing?"col-resize":headerHovered||clickableInnerCellHovered||editableBoolHovered||groupHeaderHovered?"pointer":"default",style=react.useMemo((()=>({width:width,height:height,contain:"strict",display:"block",cursor:cursor})),[width,height,cursor]),target=null==eventTargetRef?void 0:eventTargetRef.current;null!=target&&(target.style.cursor=style.cursor);const groupHeaderActionForEvent=react.useCallback(((group,bounds,localEventX,localEventY)=>{if(void 0===getGroupDetails)return;const groupDesc=getGroupDetails(group);if(void 0!==groupDesc.actions){const boxes=getActionBoundsForGroup(bounds,groupDesc.actions);for(let i=0;i<boxes.length;i++){const box=boxes[i];if(pointInRect(box,localEventX+bounds.x,localEventY+box.y))return groupDesc.actions[i]}}}),[getGroupDetails]),isOverHeaderMenu=react.useCallback(((canvas,col,clientX,clientY)=>{const header=columns[col];if(!(isDragging||!0!==header.hasMenu||null!=hoveredOnEdge&&hoveredOnEdge)){const headerBounds=getBoundsForItem(canvas,col,-1),menuBounds=getHeaderMenuBounds(headerBounds.x,headerBounds.y,headerBounds.width,headerBounds.height);if(clientX>menuBounds.x&&clientX<menuBounds.x+menuBounds.width&&clientY>menuBounds.y&&clientY<menuBounds.y+menuBounds.height)return headerBounds}}),[columns,getBoundsForItem,hoveredOnEdge,isDragging]),onMouseDownImpl=react.useCallback((ev=>{const canvas=ref.current,eventTarget=null==eventTargetRef?void 0:eventTargetRef.current;if(null===canvas||ev.target!==canvas&&ev.target!==eventTarget)return;let clientX,clientY;if(ev instanceof MouseEvent){if(0!==ev.button)return;clientX=ev.clientX,clientY=ev.clientY}else clientX=ev.touches[0].clientX,clientY=ev.touches[0].clientY;if(ev.target===eventTarget&&null!==eventTarget){const bounds=eventTarget.getBoundingClientRect();if(clientX>bounds.left+eventTarget.clientWidth)return;if(clientY>bounds.top+eventTarget.clientHeight)return}const args=getMouseArgsForPosition(canvas,clientX,clientY,ev);if("header"!==args.kind||void 0===isOverHeaderMenu(canvas,args.location[0],clientX,clientY)){if("group-header"===args.kind){if(void 0!==groupHeaderActionForEvent(args.group,args.bounds,args.localEventX,args.localEventY))return}null==onMouseDown||onMouseDown(args)}}),[eventTargetRef,getMouseArgsForPosition,groupHeaderActionForEvent,isOverHeaderMenu,onMouseDown]);Object(utils.g)("touchstart",onMouseDownImpl,window,!0),Object(utils.g)("mousedown",onMouseDownImpl,window,!0);const onMouseUpImpl=react.useCallback((ev=>{const canvas=ref.current;if(void 0===onMouseUp||null===canvas)return;const eventTarget=null==eventTargetRef?void 0:eventTargetRef.current,isOutside=ev.target!==canvas&&ev.target!==eventTarget;let clientX,clientY;if(isOutside||ev.preventDefault(),ev instanceof MouseEvent){if(0!==ev.button)return;clientX=ev.clientX,clientY=ev.clientY}else clientX=ev.changedTouches[0].clientX,clientY=ev.changedTouches[0].clientY;const args=getMouseArgsForPosition(canvas,clientX,clientY,ev);if("header"===args.kind&&isOverHeaderMenu(canvas,args.location[0],clientX,clientY)){const[col]=args.location,headerBounds=isOverHeaderMenu(canvas,col,clientX,clientY);if(void 0!==headerBounds)return void(null==onHeaderMenuClick||onHeaderMenuClick(col,headerBounds))}else if("group-header"===args.kind){const action=groupHeaderActionForEvent(args.group,args.bounds,args.localEventX,args.localEventY);if(void 0!==action)return void action.onClick(args)}onMouseUp(args,isOutside)}),[onMouseUp,eventTargetRef,getMouseArgsForPosition,isOverHeaderMenu,onHeaderMenuClick,groupHeaderActionForEvent]);Object(utils.g)("mouseup",onMouseUpImpl,window,!1),Object(utils.g)("touchend",onMouseUpImpl,window,!1);const onAnimationFrame=react.useCallback((values=>{const last=canBlit.current;canBlit.current=!1,damageRegion.current=values.map((x=>x.item)),hoverValues.current=values,lastDrawRef.current(),damageRegion.current=void 0,canBlit.current=last}),[]),animManagerValue=react.useMemo((()=>new animation_manager_AnimationManager(onAnimationFrame)),[onAnimationFrame]),animationManager=react.useRef(animManagerValue);animationManager.current=animManagerValue,react.useEffect((()=>{const am=animationManager.current;if(void 0===hoveredItem||hoveredItem[1]<0)return void am.setHovered(hoveredItem);const cell=getCellContent(hoveredItem);am.setHovered(cell.kind===data_grid_types.b.Custom||cells.a[cell.kind].needsHover?hoveredItem:void 0)}),[getCellContent,hoveredItem]);const hoveredRef=react.useRef(),onMouseMoveImpl=react.useCallback((ev=>{const canvas=ref.current;if(null===canvas)return;const args=getMouseArgsForPosition(canvas,ev.clientX,ev.clientY,ev);if(function isSameItem(item,other){return item===other||(null==item?void 0:item.kind)===(null==other?void 0:other.kind)&&(null==item?void 0:item.location[0])===(null==other?void 0:other.location[0])&&(null==item?void 0:item.location[1])===(null==other?void 0:other.location[1])}(args,hoveredRef.current)){if("cell"===args.kind||"header"===args.kind||"group-header"===args.kind){const newInfo=[args.location,[args.localEventX,args.localEventY]];if(setHoveredItemInfo(newInfo),hoverInfoRef.current=newInfo,"cell"===args.kind){const toCheck=getCellContent(args.location);(toCheck.kind===data_grid_types.b.Custom||cells.a[toCheck.kind].needsHoverPosition)&&damageInternal([args.location])}else"group-header"===args.kind&&damageInternal([args.location])}}else null==onItemHovered||onItemHovered(args),setHoveredItemInfo("out-of-bounds"===args.kind?void 0:[args.location,[args.localEventX,args.localEventY]]),hoveredRef.current=args;setHoveredOnEdge("header"===args.kind&&args.isEdge&&!0===allowResize),null==onMouseMoveRaw||onMouseMoveRaw(ev),onMouseMove(args)}),[getMouseArgsForPosition,allowResize,onMouseMoveRaw,onMouseMove,onItemHovered,getCellContent,damageInternal]);Object(utils.g)("mousemove",onMouseMoveImpl,window,!0);const onKeyDownImpl=react.useCallback((event=>{const canvas=ref.current;if(null===canvas)return;let bounds;void 0!==selectedCell&&(bounds=getBoundsForItem(canvas,selectedCell.cell[0],selectedCell.cell[1])),null==onKeyDown||onKeyDown({bounds:bounds,cancel:()=>{event.stopPropagation(),event.preventDefault()},ctrlKey:event.ctrlKey,metaKey:event.metaKey,shiftKey:event.shiftKey,key:event.key,keyCode:event.keyCode})}),[onKeyDown,selectedCell,getBoundsForItem]),onKeyUpImpl=react.useCallback((event=>{const canvas=ref.current;if(null===canvas)return;let bounds;void 0!==selectedCell&&(bounds=getBoundsForItem(canvas,selectedCell.cell[0],selectedCell.cell[1])),null==onKeyUp||onKeyUp({bounds:bounds,cancel:()=>{event.stopPropagation(),event.preventDefault()},ctrlKey:event.ctrlKey,metaKey:event.metaKey,shiftKey:event.shiftKey,key:event.key,keyCode:event.keyCode})}),[onKeyUp,selectedCell,getBoundsForItem]),refImpl=react.useCallback((instance=>{ref.current=instance,void 0!==canvasRef&&(canvasRef.current=instance)}),[canvasRef]),onDragStartImpl=react.useCallback((event=>{const canvas=ref.current;if(null===canvas||!isDraggable)return!1;let dragMime,dragData;const args=getMouseArgsForPosition(canvas,event.clientX,event.clientY);let dragImage,dragImageX,dragImageY;if(null==onDragStart||onDragStart({...args,setData:(mime,payload)=>{dragMime=mime,dragData=payload},setDragImage:(image,x,y)=>{dragImage=image,dragImageX=x,dragImageY=y}}),void 0!==dragMime&&void 0!==dragData&&null!==event.dataTransfer)if(event.dataTransfer.setData(dragMime,dragData),event.dataTransfer.effectAllowed="link",void 0!==dragImage&&void 0!==dragImageX&&void 0!==dragImageY)event.dataTransfer.setDragImage(dragImage,dragImageX,dragImageY);else{const[col,row]=args.location;if(void 0!==row){const offscreen=document.createElement("canvas"),boundsForDragTarget=getBoundsForItem(canvas,col,row);offscreen.width=boundsForDragTarget.width,offscreen.height=boundsForDragTarget.height;const ctx=offscreen.getContext("2d");null!==ctx&&(ctx.fillStyle=theme.bgCell,ctx.fillRect(0,0,offscreen.width,offscreen.height),drawCell(ctx,row,getCellContent([col,row]),0,0,0,boundsForDragTarget.width,boundsForDragTarget.height,!1,theme,drawCustomCell,imageLoader,1,void 0,0)),offscreen.style.left="-100%",offscreen.style.position="absolute",document.body.appendChild(offscreen),event.dataTransfer.setDragImage(offscreen,boundsForDragTarget.width/2,boundsForDragTarget.height/2),window.setTimeout((()=>{document.body.removeChild(offscreen)}),0)}}else event.preventDefault()}),[isDraggable,getMouseArgsForPosition,onDragStart,getBoundsForItem,theme,getCellContent,drawCustomCell,imageLoader]);Object(utils.g)("dragstart",onDragStartImpl,null!==(_eventTargetRef$curre=null==eventTargetRef?void 0:eventTargetRef.current)&&void 0!==_eventTargetRef$curre?_eventTargetRef$curre:null,!1,!1);const focusRef=react.useRef(null),focusElement=react.useCallback((el=>{if(null!==ref.current&&ref.current.contains(document.activeElement)){var _canvasRef$current;if(null===el)null==canvasRef||null===(_canvasRef$current=canvasRef.current)||void 0===_canvasRef$current||_canvasRef$current.focus({preventScroll:!0});else el.focus({preventScroll:!0});focusRef.current=el}}),[canvasRef]);react.useImperativeHandle(forwardedRef,(()=>({focus:()=>{const el=focusRef.current;var _canvasRef$current2;null!==el&&document.contains(el)?el.focus({preventScroll:!0}):null==canvasRef||null===(_canvasRef$current2=canvasRef.current)||void 0===_canvasRef$current2||_canvasRef$current2.focus({preventScroll:!0})},getBounds:(col,row)=>{if(void 0!==canvasRef&&null!==canvasRef.current)return getBoundsForItem(canvasRef.current,col,null!=row?row:-1)},damage:damage})),[canvasRef,damage,getBoundsForItem]);const accessibilityTree=Object(utils.f)((()=>{const effectiveCols=Object(data_grid_lib.k)(mappedColumns,cellXOffset,width,dragAndDropState,translateX);return react.createElement("div",{role:"grid","aria-rowcount":rows,"aria-colcount":mappedColumns.length},react.createElement("div",{role:"rowgroup"},react.createElement("div",{role:"row","aria-rowindex":1,"row-index":1},effectiveCols.map((c=>react.createElement("div",{role:"columnheader","aria-colindex":c.sourceIndex+1,key:c.sourceIndex},c.title))))),react.createElement("div",{role:"rowgroup"},range_default()(cellYOffset,Math.min(rows,cellYOffset+50)).map((row=>react.createElement("div",{role:"row",key:row,"aria-rowindex":row+2,"row-index":row+2},effectiveCols.map((c=>{var _selectedCell$cell;const col=c.sourceIndex,key=`${col},${row}`,[fCol,fRow]=null!==(_selectedCell$cell=null==selectedCell?void 0:selectedCell.cell)&&void 0!==_selectedCell$cell?_selectedCell$cell:[],focused=fCol===col&&fRow===row,id=`glide-cell-${col}-${row}`;return react.createElement("div",{key:key,role:"gridcell","aria-colindex":col+1,id:id,"data-testid":id,onClick:()=>{const canvas=null==canvasRef?void 0:canvasRef.current;if(null!=canvas)return null==onKeyDown?void 0:onKeyDown({bounds:getBoundsForItem(canvas,col,row),cancel:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1})},onFocusCapture:e=>{if(e.target!==focusRef.current)return null==onCellFocused?void 0:onCellFocused([col,row])},ref:focused?focusElement:void 0,tabIndex:-1},(cell=getCellContent([col,row])).kind===data_grid_types.b.Custom?cell.copyData:cells.a[cell.kind].getAccessibilityString(cell));var cell})))))))}),[cellXOffset,cellYOffset,mappedColumns,dragAndDropState,focusElement,getCellContent,null==selectedCell?void 0:selectedCell.cell,translateX,width],200),stickyShadow=react.useMemo((()=>{if(!mappedColumns[0].sticky)return null;const stickyX=Object(data_grid_lib.m)(mappedColumns,dragAndDropState),props={position:"absolute",top:0,left:stickyX,width:style.width-stickyX,height:style.height,opacity:cellXOffset>freezeColumns||0!==translateX?1:0,pointerEvents:"none",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)",transition:"opacity 150ms"};return react.createElement("div",{style:props})}),[cellXOffset,dragAndDropState,freezeColumns,mappedColumns,style.height,style.width,translateX]),overlayStyle=react.useMemo((()=>({position:"absolute",top:0,left:0,width:style.width})),[style.width]);return react.createElement(react.Fragment,null,react.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:0,onKeyDown:onKeyDownImpl,onKeyUp:onKeyUpImpl,className:className,ref:refImpl,style:style},accessibilityTree),react.createElement("canvas",{ref:overlayRef,style:overlayStyle}),stickyShadow)})));try{datagrid.displayName="datagrid",datagrid.__docgenInfo={description:"",displayName:"datagrid",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},cellXOffset:{defaultValue:null,description:"",name:"cellXOffset",required:!0,type:{name:"number"}},cellYOffset:{defaultValue:null,description:"",name:"cellYOffset",required:!0,type:{name:"number"}},translateX:{defaultValue:null,description:"",name:"translateX",required:!1,type:{name:"number"}},translateY:{defaultValue:null,description:"",name:"translateY",required:!1,type:{name:"number"}},freezeColumns:{defaultValue:null,description:"",name:"freezeColumns",required:!0,type:{name:"number"}},lastRowSticky:{defaultValue:null,description:"",name:"lastRowSticky",required:!0,type:{name:"boolean"}},allowResize:{defaultValue:null,description:"",name:"allowResize",required:!1,type:{name:"boolean"}},isResizing:{defaultValue:null,description:"",name:"isResizing",required:!0,type:{name:"boolean"}},isDragging:{defaultValue:null,description:"",name:"isDragging",required:!0,type:{name:"boolean"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"readonly GridColumn[]"}},rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},groupHeaderHeight:{defaultValue:null,description:"",name:"groupHeaderHeight",required:!0,type:{name:"number"}},enableGroups:{defaultValue:null,description:"",name:"enableGroups",required:!0,type:{name:"boolean"}},rowHeight:{defaultValue:null,description:"",name:"rowHeight",required:!0,type:{name:"number | ((index: number) => number)"}},canvasRef:{defaultValue:null,description:"",name:"canvasRef",required:!1,type:{name:"MutableRefObject<HTMLCanvasElement>"}},eventTargetRef:{defaultValue:null,description:"",name:"eventTargetRef",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},getCellContent:{defaultValue:null,description:"",name:"getCellContent",required:!0,type:{name:"(cell: readonly [number, number]) => InnerGridCell"}},getGroupDetails:{defaultValue:null,description:"",name:"getGroupDetails",required:!1,type:{name:"GroupDetailsCallback"}},onHeaderMenuClick:{defaultValue:null,description:"",name:"onHeaderMenuClick",required:!1,type:{name:"(col: number, screenPosition: Rectangle) => void"}},selectedRows:{defaultValue:null,description:"",name:"selectedRows",required:!1,type:{name:"CompactSelection"}},selectedColumns:{defaultValue:null,description:"",name:"selectedColumns",required:!1,type:{name:"CompactSelection"}},selectedCell:{defaultValue:null,description:"",name:"selectedCell",required:!1,type:{name:"GridSelection"}},prelightCells:{defaultValue:null,description:"",name:"prelightCells",required:!1,type:{name:"readonly (readonly [number, number])[]"}},disabledRows:{defaultValue:null,description:"",name:"disabledRows",required:!1,type:{name:"CompactSelection"}},onItemHovered:{defaultValue:null,description:"",name:"onItemHovered",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseMove:{defaultValue:null,description:"",name:"onMouseMove",required:!0,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"(args: GridMouseEventArgs, isOutside: boolean) => void"}},onCellFocused:{defaultValue:null,description:"",name:"onCellFocused",required:!1,type:{name:"(args: readonly [number, number]) => void"}},onMouseMoveRaw:{defaultValue:null,description:"",name:"onMouseMoveRaw",required:!1,type:{name:"(event: MouseEvent) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: GridKeyEventArgs) => void"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"(event: GridKeyEventArgs) => void"}},verticalBorder:{defaultValue:null,description:"",name:"verticalBorder",required:!0,type:{name:"(col: number) => boolean"}},isDraggable:{defaultValue:null,description:"",name:"isDraggable",required:!1,type:{name:"boolean"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"(args: GridDragEventArgs) => void"}},drawCustomCell:{defaultValue:null,description:"",name:"drawCustomCell",required:!1,type:{name:"DrawCustomCellCallback"}},drawHeader:{defaultValue:null,description:"",name:"drawHeader",required:!1,type:{name:"DrawHeaderCallback"}},dragAndDropState:{defaultValue:null,description:"",name:"dragAndDropState",required:!1,type:{name:"{ src: number; dest: number; }"}},experimental:{defaultValue:null,description:"",name:"experimental",required:!1,type:{name:"{ readonly paddingRight?: number; readonly paddingBottom?: number; readonly disableFirefoxRescaling?: boolean; readonly isSubGrid?: boolean; }"}},headerIcons:{defaultValue:null,description:"",name:"headerIcons",required:!1,type:{name:"SpriteMap"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid/data-grid.tsx#datagrid"]={docgenInfo:datagrid.__docgenInfo,name:"datagrid",path:"packages/core/src/data-grid/data-grid.tsx#datagrid"})}catch(__react_docgen_typescript_loader_error){}},14:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return styled})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getDataEditorTheme}));var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);const dataEditorBaseTheme={accentColor:"#4F5DFF",accentFg:"#FFFFFF",accentLight:"rgba(62, 116, 253, 0.1)",textDark:"#313139",textMedium:"#737383",textLight:"#B2B2C0",textBubble:"#313139",bgIconHeader:"#737383",fgIconHeader:"#FFFFFF",textHeader:"#313139",textGroupHeader:"#313139BB",textHeaderSelected:"#FFFFFF",bgCell:"#FFFFFF",bgCellMedium:"#FAFAFB",bgHeader:"#F7F7F8",bgHeaderHasFocus:"#E9E9EB",bgHeaderHovered:"#EFEFF1",bgBubble:"#EDEDF3",bgBubbleSelected:"#FFFFFF",bgSearchResult:"#fff9e3",borderColor:"rgba(115, 116, 131, 0.16)",horizontalBorderColor:"rgba(115, 116, 131, 0.16)",drilldownBorder:"rgba(0, 0, 0, 0)",linkColor:"#4F5DFF",cellHorizontalPadding:8,cellVerticalPadding:3,headerFontStyle:"600 13px",baseFontStyle:"13px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif"},styled=styled_components__WEBPACK_IMPORTED_MODULE_0__.c;function getDataEditorTheme(){return dataEditorBaseTheme}},196:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),styled_components_browser_esm=__webpack_require__(7),clamp=__webpack_require__(49),clamp_default=__webpack_require__.n(clamp),data_grid=__webpack_require__(106);var data_grid_dnd=p=>{const[resizeColStartX,setResizeColStartX]=react.useState(),[resizeCol,setResizeCol]=react.useState(),[dragCol,setDragCol]=react.useState(),[dropCol,setDropCol]=react.useState(),[dragColActive,setDragColActive]=react.useState(!1),[dragStartX,setDragStartX]=react.useState(),[dragRow,setDragRow]=react.useState(),[dropRow,setDropRow]=react.useState(),[dragRowActive,setDragRowActive]=react.useState(!1),[dragStartY,setDragStartY]=react.useState(),{onColumnMoved:onColumnMoved,onColumnResized:onColumnResized,gridRef:gridRef,maxColumnWidth:maxColumnWidth,onHeaderMenuClick:onHeaderMenuClick,onRowMoved:onRowMoved,lockColumns:lockColumns,getCellContent:getCellContent}=p,{onMouseDown:onMouseDown,onMouseUp:onMouseUp,onItemHovered:onItemHovered,isDraggable:isDraggable=!1,columns:columns,selectedColumns:selectedColumns}=p,onItemHoveredImpl=react.useCallback((args=>{const[col,row]=args.location;void 0!==dragCol&&dropCol!==col&&col>=lockColumns?(setDragColActive(!0),setDropCol(col)):void 0!==dragRow&&void 0!==row?(setDragRowActive(!0),setDropRow(Math.max(0,row))):null==onItemHovered||onItemHovered(args)}),[dragCol,dragRow,dropCol,onItemHovered,lockColumns]),canDragCol=void 0!==onColumnMoved,onMouseDownImpl=react.useCallback((args=>{let shouldFireEvent=!0;const[col,row]=args.location;if(!isDraggable)if("out-of-bounds"===args.kind&&args.isEdge){var _gridRef$current;const bounds=null==gridRef||null===(_gridRef$current=gridRef.current)||void 0===_gridRef$current?void 0:_gridRef$current.getBounds(columns.length-1,-1);void 0!==bounds&&(setResizeColStartX(bounds.x),setResizeCol(columns.length-1))}else"header"===args.kind&&col>=lockColumns?args.isEdge?(shouldFireEvent=!1,setResizeColStartX(args.bounds.x),setResizeCol(col)):"header"===args.kind&&canDragCol&&(setDragStartX(args.bounds.x),setDragCol(col)):"cell"===args.kind&&lockColumns>0&&0===col&&void 0!==row&&void 0!==onRowMoved&&(setDragStartY(args.bounds.y),setDragRow(row));shouldFireEvent&&(null==onMouseDown||onMouseDown(args))}),[isDraggable,onMouseDown,lockColumns,onRowMoved,gridRef,columns.length,canDragCol]),onHeaderMenuClickMangled=react.useCallback(((col,screenPosition)=>{dragColActive||dragRowActive||null==onHeaderMenuClick||onHeaderMenuClick(col,screenPosition)}),[dragColActive,dragRowActive,onHeaderMenuClick]),lastResizeWidthRef=react.useRef(-1),onMouseUpImpl=react.useCallback(((args,isOutside)=>{if(void 0!==resizeCol&&!0===(null==selectedColumns?void 0:selectedColumns.hasIndex(resizeCol)))for(const c of selectedColumns)c!==resizeCol&&(null==onColumnResized||onColumnResized(columns[c],lastResizeWidthRef.current));lastResizeWidthRef.current=-1,setDragRow(void 0),setDropRow(void 0),setDragStartY(void 0),setDragRowActive(!1),setDragCol(void 0),setDropCol(void 0),setDragStartX(void 0),setDragColActive(!1),setResizeCol(void 0),setResizeColStartX(void 0),void 0!==dragCol&&void 0!==dropCol&&(null==onColumnMoved||onColumnMoved(dragCol,dropCol)),void 0!==dragRow&&void 0!==dropRow&&(null==onRowMoved||onRowMoved(dragRow,dropRow)),null==onMouseUp||onMouseUp(args,isOutside)}),[columns,dragCol,dragRow,dropCol,dropRow,onColumnMoved,onColumnResized,onMouseUp,onRowMoved,resizeCol,selectedColumns]),dragOffset=react.useMemo((()=>{if(void 0!==dragCol&&void 0!==dropCol&&dragCol!==dropCol)return{src:dragCol,dest:dropCol}}),[dragCol,dropCol]),maxColumnWidthValue=void 0===maxColumnWidth?500:maxColumnWidth<50?50:maxColumnWidth,onMouseMove=react.useCallback((event=>{if(void 0!==dragCol&&void 0!==dragStartX){Math.abs(event.clientX-dragStartX)>20&&setDragColActive(!0)}else if(void 0!==dragRow&&void 0!==dragStartY){Math.abs(event.clientY-dragStartY)>20&&setDragRowActive(!0)}else if(void 0!==resizeCol&&void 0!==resizeColStartX){const column=columns[resizeCol],newWidth=clamp_default()(event.clientX-resizeColStartX,50,maxColumnWidthValue);if(null==onColumnResized||onColumnResized(column,newWidth),lastResizeWidthRef.current=newWidth,void 0!==resizeCol&&(null==selectedColumns?void 0:selectedColumns.first())===resizeCol)for(const c of selectedColumns)c!==resizeCol&&(null==onColumnResized||onColumnResized(columns[c],lastResizeWidthRef.current))}}),[dragCol,dragStartX,dragRow,dragStartY,resizeCol,resizeColStartX,columns,maxColumnWidthValue,onColumnResized,selectedColumns]),getMangledCellContent=react.useCallback((cell=>{if(void 0===dragRow||void 0===dropRow)return getCellContent(cell);let[col,row]=cell;return row===dropRow?row=dragRow:(row>dropRow&&(row-=1),row>=dragRow&&(row+=1)),getCellContent([col,row])}),[dragRow,dropRow,getCellContent]);return react.createElement(data_grid.a,{cellXOffset:p.cellXOffset,cellYOffset:p.cellYOffset,columns:p.columns,enableGroups:p.enableGroups,freezeColumns:p.freezeColumns,onMouseMove:p.onMouseMove,groupHeaderHeight:p.groupHeaderHeight,headerHeight:p.headerHeight,height:p.height,lastRowSticky:p.lastRowSticky,rowHeight:p.rowHeight,rows:p.rows,verticalBorder:p.verticalBorder,width:p.width,canvasRef:p.canvasRef,className:p.className,disabledRows:p.disabledRows,drawCustomCell:p.drawCustomCell,drawHeader:p.drawHeader,eventTargetRef:p.eventTargetRef,experimental:p.experimental,getGroupDetails:p.getGroupDetails,headerIcons:p.headerIcons,isDraggable:p.isDraggable,onCellFocused:p.onCellFocused,onDragStart:p.onDragStart,onKeyDown:p.onKeyDown,onKeyUp:p.onKeyUp,prelightCells:p.prelightCells,selectedCell:p.selectedCell,selectedColumns:p.selectedColumns,selectedRows:p.selectedRows,translateX:p.translateX,translateY:p.translateY,getCellContent:getMangledCellContent,isResizing:void 0!==resizeCol,onHeaderMenuClick:onHeaderMenuClickMangled,isDragging:dragColActive,onItemHovered:onItemHoveredImpl,onMouseDown:onMouseDownImpl,allowResize:void 0!==onColumnResized,onMouseUp:onMouseUpImpl,dragAndDropState:dragOffset,onMouseMoveRaw:onMouseMove,ref:gridRef})};try{datagriddnd.displayName="datagriddnd",datagriddnd.__docgenInfo={description:"",displayName:"datagriddnd",props:{onRowMoved:{defaultValue:null,description:"",name:"onRowMoved",required:!1,type:{name:"(startIndex: number, endIndex: number) => void"}},onColumnMoved:{defaultValue:null,description:"",name:"onColumnMoved",required:!1,type:{name:"(startIndex: number, endIndex: number) => void"}},onColumnResized:{defaultValue:null,description:"",name:"onColumnResized",required:!1,type:{name:"(column: GridColumn, newSize: number) => void"}},gridRef:{defaultValue:null,description:"",name:"gridRef",required:!1,type:{name:"MutableRefObject<DataGridRef>"}},maxColumnWidth:{defaultValue:null,description:"",name:"maxColumnWidth",required:!1,type:{name:"number"}},lockColumns:{defaultValue:null,description:"",name:"lockColumns",required:!0,type:{name:"number"}},rowHeight:{defaultValue:null,description:"",name:"rowHeight",required:!0,type:{name:"number | ((index: number) => number)"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},eventTargetRef:{defaultValue:null,description:"",name:"eventTargetRef",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},cellXOffset:{defaultValue:null,description:"",name:"cellXOffset",required:!0,type:{name:"number"}},cellYOffset:{defaultValue:null,description:"",name:"cellYOffset",required:!0,type:{name:"number"}},translateX:{defaultValue:null,description:"",name:"translateX",required:!1,type:{name:"number"}},translateY:{defaultValue:null,description:"",name:"translateY",required:!1,type:{name:"number"}},freezeColumns:{defaultValue:null,description:"",name:"freezeColumns",required:!0,type:{name:"number"}},lastRowSticky:{defaultValue:null,description:"",name:"lastRowSticky",required:!0,type:{name:"boolean"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"readonly GridColumn[]"}},rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"number"}},groupHeaderHeight:{defaultValue:null,description:"",name:"groupHeaderHeight",required:!0,type:{name:"number"}},enableGroups:{defaultValue:null,description:"",name:"enableGroups",required:!0,type:{name:"boolean"}},canvasRef:{defaultValue:null,description:"",name:"canvasRef",required:!1,type:{name:"MutableRefObject<HTMLCanvasElement>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},getCellContent:{defaultValue:null,description:"",name:"getCellContent",required:!0,type:{name:"(cell: readonly [number, number]) => InnerGridCell"}},getGroupDetails:{defaultValue:null,description:"",name:"getGroupDetails",required:!1,type:{name:"GroupDetailsCallback"}},onHeaderMenuClick:{defaultValue:null,description:"",name:"onHeaderMenuClick",required:!1,type:{name:"(col: number, screenPosition: Rectangle) => void"}},selectedRows:{defaultValue:null,description:"",name:"selectedRows",required:!1,type:{name:"CompactSelection"}},selectedColumns:{defaultValue:null,description:"",name:"selectedColumns",required:!1,type:{name:"CompactSelection"}},selectedCell:{defaultValue:null,description:"",name:"selectedCell",required:!1,type:{name:"GridSelection"}},prelightCells:{defaultValue:null,description:"",name:"prelightCells",required:!1,type:{name:"readonly (readonly [number, number])[]"}},disabledRows:{defaultValue:null,description:"",name:"disabledRows",required:!1,type:{name:"CompactSelection"}},onItemHovered:{defaultValue:null,description:"",name:"onItemHovered",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseMove:{defaultValue:null,description:"",name:"onMouseMove",required:!0,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"(args: GridMouseEventArgs, isOutside: boolean) => void"}},onCellFocused:{defaultValue:null,description:"",name:"onCellFocused",required:!1,type:{name:"(args: readonly [number, number]) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: GridKeyEventArgs) => void"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"(event: GridKeyEventArgs) => void"}},verticalBorder:{defaultValue:null,description:"",name:"verticalBorder",required:!0,type:{name:"(col: number) => boolean"}},isDraggable:{defaultValue:null,description:"",name:"isDraggable",required:!1,type:{name:"boolean"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"(args: GridDragEventArgs) => void"}},drawCustomCell:{defaultValue:null,description:"",name:"drawCustomCell",required:!1,type:{name:"DrawCustomCellCallback"}},drawHeader:{defaultValue:null,description:"",name:"drawHeader",required:!1,type:{name:"DrawHeaderCallback"}},experimental:{defaultValue:null,description:"",name:"experimental",required:!1,type:{name:"{ readonly paddingRight?: number; readonly paddingBottom?: number; readonly disableFirefoxRescaling?: boolean; readonly isSubGrid?: boolean; }"}},headerIcons:{defaultValue:null,description:"",name:"headerIcons",required:!1,type:{name:"SpriteMap"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-dnd/data-grid-dnd.tsx#datagriddnd"]={docgenInfo:datagriddnd.__docgenInfo,name:"datagriddnd",path:"packages/core/src/data-grid-dnd/data-grid-dnd.tsx#datagriddnd"})}catch(__react_docgen_typescript_loader_error){}var styles=__webpack_require__(14),index_esm=__webpack_require__(72),browser_detect=__webpack_require__(105);const ScrollRegionStyle=styles.b.div`
    .dvn-scroller {
        overflow: ${browser_detect.c?"scroll":"auto"};
        transform: translate3d(0, 0, 0);
    }

    .dvn-scroll-inner {
        display: flex;
        pointer-events: none;

        > * {
            flex-shrink: 0;
        }

        .dvn-spacer {
            flex-grow: 1;
        }

        .dvn-stack {
            display: flex;
            flex-direction: column;
        }
    }

    .dvn-underlay > * {
        position: absolute;
        left: 0;
        top: 0;
    }

    canvas {
        outline: none;

        * {
            height: 0;
        }
    }
`,InfiniteScroller=p=>{const{children:children,clientHeight:clientHeight,scrollHeight:scrollHeight,scrollWidth:scrollWidth,update:update,draggable:draggable,className:className,paddingBottom:paddingBottom=0,paddingRight:paddingRight=0,rightElement:rightElement,rightElementSticky:rightElementSticky=!1,scrollRef:scrollRef,scrollToEnd:scrollToEnd,minimap:minimap,style:style}=p,padders=[],offsetY=react.useRef(0),lastScrollY=react.useRef(0),scroller=react.useRef(null),dpr=window.devicePixelRatio;react.useEffect((()=>{const el=scroller.current;null!==el&&!0===scrollToEnd&&(el.scrollLeft=el.scrollWidth-el.clientWidth)}),[scrollToEnd]);const onScroll=react.useCallback((()=>{const el=scroller.current;if(null===el)return;const newY=el.scrollTop,delta=lastScrollY.current-newY,scrollableHeight=el.scrollHeight-el.clientHeight,maxFakeY=Math.max(0,scrollHeight-el.clientHeight);if(lastScrollY.current=newY,scrollableHeight>0&&(Math.abs(delta)>2e3||0===newY||newY===scrollableHeight)&&scrollHeight>el.scrollHeight+5){const prog=newY/scrollableHeight,recomputed=(scrollHeight-el.clientHeight)*prog;offsetY.current=recomputed-newY}update({x:el.scrollLeft,y:Math.min(maxFakeY,newY+offsetY.current),width:el.clientWidth-paddingRight,height:el.clientHeight-paddingBottom})}),[paddingBottom,paddingRight,scrollHeight,update]),lastProps=react.useRef(),nomEvent=react.useCallback((e=>{e.stopPropagation()}),[]),setRefs=react.useCallback((instance=>{scroller.current=instance,void 0!==scrollRef&&(scrollRef.current=instance)}),[scrollRef]);let key=0,h=0;for(;h<scrollHeight;){const toAdd=Math.min(5e6,scrollHeight-h);padders.push(react.createElement("div",{key:key++,style:{width:scrollWidth,height:toAdd}})),h+=toAdd}return react.createElement("div",{style:style},react.createElement(index_esm.a,null,(props=>{var _lastProps$current,_lastProps$current2;return 0===props.width||0===props.height?null:((null===(_lastProps$current=lastProps.current)||void 0===_lastProps$current?void 0:_lastProps$current.height)===props.height&&(null===(_lastProps$current2=lastProps.current)||void 0===_lastProps$current2?void 0:_lastProps$current2.width)===props.width||(window.setTimeout(onScroll,0),lastProps.current=props),react.createElement(ScrollRegionStyle,null,minimap,react.createElement("div",{className:"dvn-underlay"},children),react.createElement("div",{ref:setRefs,style:props,draggable:draggable,onDragStart:e=>{draggable||(e.stopPropagation(),e.preventDefault())},className:"dvn-scroller "+(null!=className?className:""),onScroll:onScroll},react.createElement("div",{className:"dvn-scroll-inner"},react.createElement("div",{className:"dvn-stack"},padders),void 0!==rightElement&&react.createElement(react.Fragment,null,react.createElement("div",{className:"dvn-spacer"}),react.createElement("div",{onMouseDown:nomEvent,onMouseUp:nomEvent,onMouseMove:nomEvent,style:{height:props.height,maxHeight:clientHeight-Math.ceil(dpr%1),position:"sticky",top:0,marginBottom:-40,marginRight:paddingRight,right:rightElementSticky?null!=paddingRight?paddingRight:0:void 0,pointerEvents:"auto"}},rightElement))))))})))};try{ScrollRegionStyle.displayName="ScrollRegionStyle",ScrollRegionStyle.__docgenInfo={description:"",displayName:"ScrollRegionStyle",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/scrolling-data-grid/infinite-scroller.tsx#ScrollRegionStyle"]={docgenInfo:ScrollRegionStyle.__docgenInfo,name:"ScrollRegionStyle",path:"packages/core/src/scrolling-data-grid/infinite-scroller.tsx#ScrollRegionStyle"})}catch(__react_docgen_typescript_loader_error){}try{InfiniteScroller.displayName="InfiniteScroller",InfiniteScroller.__docgenInfo={description:"",displayName:"InfiniteScroller",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!0,type:{name:"boolean"}},paddingRight:{defaultValue:null,description:"",name:"paddingRight",required:!1,type:{name:"number"}},paddingBottom:{defaultValue:null,description:"",name:"paddingBottom",required:!1,type:{name:"number"}},clientHeight:{defaultValue:null,description:"",name:"clientHeight",required:!0,type:{name:"number"}},scrollWidth:{defaultValue:null,description:"",name:"scrollWidth",required:!0,type:{name:"number"}},scrollHeight:{defaultValue:null,description:"",name:"scrollHeight",required:!0,type:{name:"number"}},scrollToEnd:{defaultValue:null,description:"",name:"scrollToEnd",required:!1,type:{name:"boolean"}},rightElementSticky:{defaultValue:null,description:"",name:"rightElementSticky",required:!1,type:{name:"boolean"}},rightElement:{defaultValue:null,description:"",name:"rightElement",required:!1,type:{name:"ReactNode"}},minimap:{defaultValue:null,description:"",name:"minimap",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},scrollRef:{defaultValue:null,description:"",name:"scrollRef",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},update:{defaultValue:null,description:"",name:"update",required:!0,type:{name:"(region: Rectangle) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/scrolling-data-grid/infinite-scroller.tsx#InfiniteScroller"]={docgenInfo:InfiniteScroller.__docgenInfo,name:"InfiniteScroller",path:"packages/core/src/scrolling-data-grid/infinite-scroller.tsx#InfiniteScroller"})}catch(__react_docgen_typescript_loader_error){}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const MinimapStyle=styled_components_browser_esm.c.div.withConfig({displayName:"scrolling-data-grid__MinimapStyle",componentId:"sc-r4h7c0-0"})(["position:absolute;right:44px;bottom:44px;background-color:",";background:linear-gradient(",",",");border-radius:4px;z-index:1;box-shadow:0 0 0 1px ",",0 2px 5px rgba(0,0,0,0.08);overflow:hidden;.header{position:absolute;left:0;top:0;width:100%;height:4px;background-color:",";box-shadow:0 0 0 1px ",";}.locationMarker{position:absolute;border:1px solid ",";background-color:",";}"],(p=>p.theme.bgCell),(p=>p.theme.bgCell),(p=>p.theme.bgCellMedium),(p=>p.theme.borderColor),(p=>p.theme.bgHeader),(p=>p.theme.borderColor),(p=>p.theme.accentColor),(p=>p.theme.accentLight));__webpack_exports__.a=p=>{var _scrollRef$current,_scroller$scrollLeft,_scroller$scrollTop;const{columns:columns,rows:rows,rowHeight:rowHeight,headerHeight:headerHeight,groupHeaderHeight:groupHeaderHeight,enableGroups:enableGroups,freezeColumns:freezeColumns,experimental:experimental}=p,{paddingRight:paddingRight,paddingBottom:paddingBottom}=null!=experimental?experimental:{},{className:className,onVisibleRegionChanged:onVisibleRegionChanged,scrollToEnd:scrollToEnd,scrollRef:scrollRef,rightElement:rightElement,rightElementSticky:rightElementSticky,overscrollX:overscrollX,showMinimap:showMinimap=!1,...dataGridProps}=p,{smoothScrollX:smoothScrollX=!1,smoothScrollY:smoothScrollY=!1}=p,[clientWidth,setClientWidth]=react.useState(10),[clientHeight,setClientHeight]=react.useState(10),last=react.useRef(),lastX=react.useRef(),lastY=react.useRef(),width=react.useMemo((()=>{let r=Math.max(0,null!=overscrollX?overscrollX:0);for(const c of columns)r+=c.width;return r}),[columns,overscrollX]);let height=enableGroups?headerHeight+groupHeaderHeight:headerHeight;if("number"==typeof rowHeight)height+=rows*rowHeight;else for(let r=0;r<rows;r++)height+=rowHeight(r);const lastArgs=react.useRef(),processArgs=react.useCallback((()=>{const args=lastArgs.current;if(void 0===args)return;setClientHeight(args.height),setClientWidth(args.width);let x=0,tx=0,cellRight=0,cellX=0,stickyColWidth=0;for(let i=0;i<freezeColumns;i++)stickyColWidth+=columns[i].width;for(const c of columns){const cx=x-stickyColWidth;if(args.x>=cx+c.width)x+=c.width,cellX++,cellRight++;else if(args.x>cx)x+=c.width,smoothScrollX?tx+=cx-args.x:cellX++,cellRight++;else{if(!(args.x+args.width>cx))break;x+=c.width,cellRight++}}let ty=0,cellY=0,cellBottom=0;if("number"==typeof rowHeight)smoothScrollY?(cellY=Math.floor(args.y/rowHeight),ty=cellY*rowHeight-args.y):cellY=Math.ceil(args.y/rowHeight),cellBottom=Math.ceil(args.height/rowHeight)+cellY,ty<0&&cellBottom++;else{let y=0;for(let row=0;row<rows;row++){const rh=rowHeight(row),cy=y+(smoothScrollY?0:rh/2);if(args.y>=y+rh)y+=rh,cellY++,cellBottom++;else if(args.y>cy)y+=rh,smoothScrollY?ty+=cy-args.y:cellY++,cellBottom++;else{if(!(args.y+args.height>rh/2+y))break;y+=rh,cellBottom++}}}const rect={x:cellX,y:cellY,width:cellRight-cellX,height:cellBottom-cellY},oldRect=last.current;void 0!==oldRect&&oldRect.y===rect.y&&oldRect.x===rect.x&&oldRect.height===rect.height&&oldRect.width===rect.width&&lastX.current===tx&&lastY.current===ty||(null==onVisibleRegionChanged||onVisibleRegionChanged({x:cellX,y:cellY,width:cellRight-cellX,height:cellBottom-cellY},tx,ty),last.current=rect,lastX.current=tx,lastY.current=ty)}),[columns,rowHeight,rows,onVisibleRegionChanged,freezeColumns,smoothScrollX,smoothScrollY]),onScrollUpdate=react.useCallback((args=>{lastArgs.current=args,processArgs()}),[processArgs]);react.useEffect((()=>{processArgs()}),[processArgs]);const scroller=null!==(_scrollRef$current=null==scrollRef?void 0:scrollRef.current)&&void 0!==_scrollRef$current?_scrollRef$current:void 0,aspect=clamp_default()(width/height,2/3,1.5),w=aspect>1?200:Math.ceil(200*aspect),h=aspect>1?Math.ceil(200/aspect):200,hRatio=w/width,vRatio=h/height,vWidth=Math.min(clientWidth*Math.max(hRatio,.01),w),vHeight=Math.min(clientHeight*Math.max(vRatio,.01),h),left=(null!==(_scroller$scrollLeft=null==scroller?void 0:scroller.scrollLeft)&&void 0!==_scroller$scrollLeft?_scroller$scrollLeft:0)/(width-clientWidth)*(w-vWidth),top=(null!==(_scroller$scrollTop=null==scroller?void 0:scroller.scrollTop)&&void 0!==_scroller$scrollTop?_scroller$scrollTop:0)/(height-clientHeight)*(h-vHeight),minimap=react.useMemo((()=>{if(!showMinimap||0===vWidth||0===vHeight)return;const handleMouse=e=>{if(void 0===scroller)return;const bounds=e.currentTarget.getBoundingClientRect(),x=e.clientX-bounds.x-vWidth/2,y=e.clientY-bounds.y-vHeight/2,newScrollLeft=(width-scroller.clientWidth)*(x/(w-vWidth)),newScrollTop=(height-scroller.clientHeight)*(y/(h-vHeight));scroller.scrollTo({left:newScrollLeft,top:newScrollTop,behavior:"mousemove"===e.type?"auto":"smooth"})};return react.createElement(MinimapStyle,{style:{width:w,height:h},"data-testid":"minimap-container",onMouseMove:e=>{1===e.buttons&&handleMouse(e)},onClick:handleMouse},react.createElement("div",{className:"header"}),react.createElement("div",{className:"locationMarker",onDragStart:e=>e.preventDefault(),style:{left:left,top:top,width:vWidth,height:vHeight,borderRadius:Math.min(vWidth,.2*vHeight,9)}}))}),[h,height,left,scroller,showMinimap,top,vHeight,vWidth,w,width]);return react.createElement(InfiniteScroller,{scrollRef:scrollRef,minimap:minimap,className:className,draggable:!0===dataGridProps.isDraggable,scrollWidth:width+(null!=paddingRight?paddingRight:0),scrollHeight:height+(null!=paddingBottom?paddingBottom:0),clientHeight:clientHeight,rightElement:rightElement,paddingBottom:paddingBottom,paddingRight:paddingRight,rightElementSticky:rightElementSticky,update:onScrollUpdate,scrollToEnd:scrollToEnd},react.createElement(data_grid_dnd,_extends({eventTargetRef:scrollRef,width:clientWidth,height:clientHeight},dataGridProps)))};try{scrollingdatagrid.displayName="scrollingdatagrid",scrollingdatagrid.__docgenInfo={description:"",displayName:"scrollingdatagrid",props:{onVisibleRegionChanged:{defaultValue:null,description:"",name:"onVisibleRegionChanged",required:!1,type:{name:"(range: Rectangle, tx?: number, ty?: number) => void"}},scrollToEnd:{defaultValue:null,description:"",name:"scrollToEnd",required:!1,type:{name:"boolean"}},scrollRef:{defaultValue:null,description:"",name:"scrollRef",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},smoothScrollX:{defaultValue:null,description:"",name:"smoothScrollX",required:!1,type:{name:"boolean"}},smoothScrollY:{defaultValue:null,description:"",name:"smoothScrollY",required:!1,type:{name:"boolean"}},overscrollX:{defaultValue:null,description:"",name:"overscrollX",required:!1,type:{name:"number"}},rightElementSticky:{defaultValue:null,description:"",name:"rightElementSticky",required:!1,type:{name:"boolean"}},rightElement:{defaultValue:null,description:"",name:"rightElement",required:!1,type:{name:"ReactNode"}},showMinimap:{defaultValue:null,description:"",name:"showMinimap",required:!1,type:{name:"boolean"}},rowHeight:{defaultValue:null,description:"",name:"rowHeight",required:!0,type:{name:"number | ((index: number) => number)"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},cellXOffset:{defaultValue:null,description:"",name:"cellXOffset",required:!0,type:{name:"number"}},cellYOffset:{defaultValue:null,description:"",name:"cellYOffset",required:!0,type:{name:"number"}},translateX:{defaultValue:null,description:"",name:"translateX",required:!1,type:{name:"number"}},translateY:{defaultValue:null,description:"",name:"translateY",required:!1,type:{name:"number"}},freezeColumns:{defaultValue:null,description:"",name:"freezeColumns",required:!0,type:{name:"number"}},lastRowSticky:{defaultValue:null,description:"",name:"lastRowSticky",required:!0,type:{name:"boolean"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"readonly GridColumn[]"}},rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"number"}},groupHeaderHeight:{defaultValue:null,description:"",name:"groupHeaderHeight",required:!0,type:{name:"number"}},enableGroups:{defaultValue:null,description:"",name:"enableGroups",required:!0,type:{name:"boolean"}},canvasRef:{defaultValue:null,description:"",name:"canvasRef",required:!1,type:{name:"MutableRefObject<HTMLCanvasElement>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},getCellContent:{defaultValue:null,description:"",name:"getCellContent",required:!0,type:{name:"(cell: readonly [number, number]) => InnerGridCell"}},getGroupDetails:{defaultValue:null,description:"",name:"getGroupDetails",required:!1,type:{name:"GroupDetailsCallback"}},onHeaderMenuClick:{defaultValue:null,description:"",name:"onHeaderMenuClick",required:!1,type:{name:"(col: number, screenPosition: Rectangle) => void"}},selectedRows:{defaultValue:null,description:"",name:"selectedRows",required:!1,type:{name:"CompactSelection"}},selectedColumns:{defaultValue:null,description:"",name:"selectedColumns",required:!1,type:{name:"CompactSelection"}},selectedCell:{defaultValue:null,description:"",name:"selectedCell",required:!1,type:{name:"GridSelection"}},prelightCells:{defaultValue:null,description:"",name:"prelightCells",required:!1,type:{name:"readonly (readonly [number, number])[]"}},disabledRows:{defaultValue:null,description:"",name:"disabledRows",required:!1,type:{name:"CompactSelection"}},onItemHovered:{defaultValue:null,description:"",name:"onItemHovered",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseMove:{defaultValue:null,description:"",name:"onMouseMove",required:!0,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"(args: GridMouseEventArgs, isOutside: boolean) => void"}},onCellFocused:{defaultValue:null,description:"",name:"onCellFocused",required:!1,type:{name:"(args: readonly [number, number]) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: GridKeyEventArgs) => void"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"(event: GridKeyEventArgs) => void"}},verticalBorder:{defaultValue:null,description:"",name:"verticalBorder",required:!0,type:{name:"(col: number) => boolean"}},isDraggable:{defaultValue:null,description:"",name:"isDraggable",required:!1,type:{name:"boolean"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"(args: GridDragEventArgs) => void"}},drawCustomCell:{defaultValue:null,description:"",name:"drawCustomCell",required:!1,type:{name:"DrawCustomCellCallback"}},drawHeader:{defaultValue:null,description:"",name:"drawHeader",required:!1,type:{name:"DrawHeaderCallback"}},experimental:{defaultValue:null,description:"",name:"experimental",required:!1,type:{name:"{ readonly paddingRight?: number; readonly paddingBottom?: number; readonly disableFirefoxRescaling?: boolean; readonly isSubGrid?: boolean; }"}},headerIcons:{defaultValue:null,description:"",name:"headerIcons",required:!1,type:{name:"SpriteMap"}},onRowMoved:{defaultValue:null,description:"",name:"onRowMoved",required:!1,type:{name:"(startIndex: number, endIndex: number) => void"}},onColumnMoved:{defaultValue:null,description:"",name:"onColumnMoved",required:!1,type:{name:"(startIndex: number, endIndex: number) => void"}},onColumnResized:{defaultValue:null,description:"",name:"onColumnResized",required:!1,type:{name:"(column: GridColumn, newSize: number) => void"}},gridRef:{defaultValue:null,description:"",name:"gridRef",required:!1,type:{name:"MutableRefObject<DataGridRef>"}},maxColumnWidth:{defaultValue:null,description:"",name:"maxColumnWidth",required:!1,type:{name:"number"}},lockColumns:{defaultValue:null,description:"",name:"lockColumns",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/scrolling-data-grid/scrolling-data-grid.tsx#scrollingdatagrid"]={docgenInfo:scrollingdatagrid.__docgenInfo,name:"scrollingdatagrid",path:"packages/core/src/scrolling-data-grid/scrolling-data-grid.tsx#scrollingdatagrid"})}catch(__react_docgen_typescript_loader_error){}},20:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return useEventListener})),__webpack_require__.d(__webpack_exports__,"c",(function(){return degreesToRadians})),__webpack_require__.d(__webpack_exports__,"e",(function(){return disabledProps})),__webpack_require__.d(__webpack_exports__,"b",(function(){return EditPencil})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Checkmark})),__webpack_require__.d(__webpack_exports__,"f",(function(){return useDebouncedMemo})),__webpack_require__.d(__webpack_exports__,"d",(function(){return direction}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),lodash_debounce__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(149),lodash_debounce__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_2__);function useEventListener(eventName,handler,element,passive,capture){var _capture;capture=null!==(_capture=capture)&&void 0!==_capture&&_capture;const savedHandler=react__WEBPACK_IMPORTED_MODULE_0__.useRef();savedHandler.current=handler,react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{if(null===element||void 0===element.addEventListener)return;const el=element,eventListener=event=>{var _savedHandler$current;null===(_savedHandler$current=savedHandler.current)||void 0===_savedHandler$current||_savedHandler$current.call(el,event)};return el.addEventListener(eventName,eventListener,{passive:passive,capture:capture}),()=>{el.removeEventListener(eventName,eventListener,{capture:capture})}}),[eventName,element,passive,capture])}const PI=Math.PI;function degreesToRadians(degrees){return degrees*PI/180}const disabledProps=Object(styled_components__WEBPACK_IMPORTED_MODULE_1__.b)(["opacity:0.4;pointer-events:none;"]),EditPencil=props=>{var _props$fgColor;const fg=null!==(_props$fgColor=props.fgColor)&&void 0!==_props$fgColor?_props$fgColor:"currentColor";return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:fg,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:fg,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},Checkmark=props=>{var _props$fgColor2;const fg=null!==(_props$fgColor2=props.fgColor)&&void 0!==_props$fgColor2?_props$fgColor2:"currentColor";return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:fg,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function useDebouncedMemo(factory,deps,time){const[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState(factory),debouncedSetState=react__WEBPACK_IMPORTED_MODULE_0__.useRef(lodash_debounce__WEBPACK_IMPORTED_MODULE_2___default()(setState,time));return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{debouncedSetState.current((()=>factory()))}),deps),state}const ltrRange="A-Za-z--------",rtl=new RegExp("^[^"+ltrRange+"]*[---]"),ltr=new RegExp("^[^---]*["+ltrRange+"]");function direction(value){return rtl.test(value)?"rtl":ltr.test(value)?"ltr":"neutral"}try{degreesToRadians.displayName="degreesToRadians",degreesToRadians.__docgenInfo={description:"",displayName:"degreesToRadians",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/common/utils.tsx#degreesToRadians"]={docgenInfo:degreesToRadians.__docgenInfo,name:"degreesToRadians",path:"packages/core/src/common/utils.tsx#degreesToRadians"})}catch(__react_docgen_typescript_loader_error){}try{direction.displayName="direction",direction.__docgenInfo={description:"",displayName:"direction",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/common/utils.tsx#direction"]={docgenInfo:direction.__docgenInfo,name:"direction",path:"packages/core/src/common/utils.tsx#direction"})}catch(__react_docgen_typescript_loader_error){}try{EditPencil.displayName="EditPencil",EditPencil.__docgenInfo={description:"",displayName:"EditPencil",props:{fgColor:{defaultValue:null,description:"",name:"fgColor",required:!1,type:{name:"string"}},bgColor:{defaultValue:null,description:"",name:"bgColor",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/common/utils.tsx#EditPencil"]={docgenInfo:EditPencil.__docgenInfo,name:"EditPencil",path:"packages/core/src/common/utils.tsx#EditPencil"})}catch(__react_docgen_typescript_loader_error){}try{Checkmark.displayName="Checkmark",Checkmark.__docgenInfo={description:"",displayName:"Checkmark",props:{fgColor:{defaultValue:null,description:"",name:"fgColor",required:!1,type:{name:"string"}},bgColor:{defaultValue:null,description:"",name:"bgColor",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/common/utils.tsx#Checkmark"]={docgenInfo:Checkmark.__docgenInfo,name:"Checkmark",path:"packages/core/src/common/utils.tsx#Checkmark"})}catch(__react_docgen_typescript_loader_error){}},2480:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CustomCells",(function(){return CustomCells}));var styled_components_browser_esm=__webpack_require__(97),react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(421),dist_styled_components_browser_esm=__webpack_require__(7);const dataEditorBaseTheme={accentColor:"#4F5DFF",accentFg:"#FFFFFF",accentLight:"rgba(62, 116, 253, 0.1)",textDark:"#313139",textMedium:"#737383",textLight:"#B2B2C0",textBubble:"#313139",bgIconHeader:"#737383",fgIconHeader:"#FFFFFF",textHeader:"#313139",textGroupHeader:"#313139BB",textHeaderSelected:"#FFFFFF",bgCell:"#FFFFFF",bgCellMedium:"#FAFAFB",bgHeader:"#F7F7F8",bgHeaderHasFocus:"#E9E9EB",bgHeaderHovered:"#EFEFF1",bgBubble:"#EDEDF3",bgBubbleSelected:"#FFFFFF",bgSearchResult:"#fff9e3",borderColor:"rgba(115, 116, 131, 0.16)",horizontalBorderColor:"rgba(115, 116, 131, 0.16)",drilldownBorder:"rgba(0, 0, 0, 0)",linkColor:"#4F5DFF",cellHorizontalPadding:8,cellVerticalPadding:3,headerFontStyle:"600 13px",baseFontStyle:"13px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif"},styled=dist_styled_components_browser_esm.c;function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const Wrapper=styled.div`
    overflow: hidden;
    position: relative;

    width: ${p=>p.width}px;
    height: ${p=>p.height}px;

    > :first-child {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
    }
`,DataEditorContainer=p=>{const{width:width,height:height,children:children,...rest}=p;return react.createElement(Wrapper,_extends({width:width,height:height},rest),children)};DataEditorContainer.__docgenInfo={description:"",methods:[],displayName:"DataEditorContainer"};var data_grid_container=DataEditorContainer;function panic(){let message=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This should not happen";throw new Error(message)}function assert(fact){let message=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion failed";if(!fact)return panic(message)}function assertNever(_never){return panic("Hell froze over")}function maybe(fn,defaultValue){try{return fn()}catch{return defaultValue}}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-editor-container/data-grid-container.js"]={name:"DataEditorContainer",docgenInfo:DataEditorContainer.__docgenInfo,path:"packages/core/dist/js/data-editor-container/data-grid-container.js"});var fp=__webpack_require__(125),react_dom=__webpack_require__(54);function click_outside_container_extends(){return click_outside_container_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},click_outside_container_extends.apply(this,arguments)}class click_outside_container_ClickOutsideContainer extends react.PureComponent{constructor(){super(...arguments),this.wrapperRef=react.createRef(),this.clickOutside=event=>{if(null!==this.wrapperRef.current&&!this.wrapperRef.current.contains(event.target)){let node=event.target;for(;null!==node;){if(node.classList.contains("click-outside-ignore"))return;node=node.parentElement}this.props.onClickOutside()}}}componentDidMount(){document.addEventListener("mousedown",this.clickOutside,!0),document.addEventListener("contextmenu",this.clickOutside,!0)}componentWillUnmount(){document.removeEventListener("mousedown",this.clickOutside),document.removeEventListener("contextmenu",this.clickOutside)}render(){const{onClickOutside:onClickOutside,...rest}=this.props;return react.createElement("div",click_outside_container_extends({},rest,{ref:this.wrapperRef}),this.props.children)}}let _Symbol$iterator,GridCellKind,GridColumnIcon,InnerGridCellKind,emptyCompactSelection;function isEditableGridCell(cell){return cell.kind!==GridCellKind.Loading&&cell.kind!==GridCellKind.Bubble&&cell.kind!==GridCellKind.RowID&&cell.kind!==GridCellKind.Protected&&cell.kind!==GridCellKind.Drilldown&&cell.kind!==GridCellKind.Custom}function isInnerOnlyCell(cell){return cell.kind===InnerGridCellKind.Marker||cell.kind===InnerGridCellKind.NewRow}function isReadWriteCell(cell){return!(!isEditableGridCell(cell)||cell.kind===GridCellKind.Image||cell.kind===GridCellKind.Boolean)&&(cell.kind===GridCellKind.Text||cell.kind===GridCellKind.Number||cell.kind===GridCellKind.Markdown||cell.kind===GridCellKind.Uri?!0!==cell.readonly:void assertNever())}click_outside_container_ClickOutsideContainer.__docgenInfo={description:"",methods:[],displayName:"ClickOutsideContainer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/click-outside-container/click-outside-container.js"]={name:"ClickOutsideContainer",docgenInfo:click_outside_container_ClickOutsideContainer.__docgenInfo,path:"packages/core/dist/js/click-outside-container/click-outside-container.js"}),function(GridCellKind){GridCellKind.Uri="uri",GridCellKind.Text="text",GridCellKind.Image="image",GridCellKind.RowID="row-id",GridCellKind.Number="number",GridCellKind.Bubble="bubble",GridCellKind.Boolean="boolean",GridCellKind.Loading="loading",GridCellKind.Markdown="markdown",GridCellKind.Drilldown="drilldown",GridCellKind.Protected="protected",GridCellKind.Custom="custom"}(GridCellKind||(GridCellKind={})),function(GridColumnIcon){GridColumnIcon.HeaderRowID="headerRowID",GridColumnIcon.HeaderCode="headerCode",GridColumnIcon.HeaderNumber="headerNumber",GridColumnIcon.HeaderString="headerString",GridColumnIcon.HeaderBoolean="headerBoolean",GridColumnIcon.HeaderAudioUri="headerAudioUri",GridColumnIcon.HeaderVideoUri="headerVideoUri",GridColumnIcon.HeaderEmoji="headerEmoji",GridColumnIcon.HeaderImage="headerImage",GridColumnIcon.HeaderUri="headerUri",GridColumnIcon.HeaderPhone="headerPhone",GridColumnIcon.HeaderMarkdown="headerMarkdown",GridColumnIcon.HeaderDate="headerDate",GridColumnIcon.HeaderTime="headerTime",GridColumnIcon.HeaderEmail="headerEmail",GridColumnIcon.HeaderReference="headerReference",GridColumnIcon.HeaderIfThenElse="headerIfThenElse",GridColumnIcon.HeaderSingleValue="headerSingleValue",GridColumnIcon.HeaderLookup="headerLookup",GridColumnIcon.HeaderTextTemplate="headerTextTemplate",GridColumnIcon.HeaderMath="headerMath",GridColumnIcon.HeaderRollup="headerRollup",GridColumnIcon.HeaderJoinStrings="headerJoinStrings",GridColumnIcon.HeaderSplitString="headerSplitString",GridColumnIcon.HeaderGeoDistance="headerGeoDistance",GridColumnIcon.HeaderArray="headerArray",GridColumnIcon.RowOwnerOverlay="rowOwnerOverlay",GridColumnIcon.ProtectedColumnOverlay="protectedColumnOverlay"}(GridColumnIcon||(GridColumnIcon={})),function(InnerGridCellKind){InnerGridCellKind.NewRow="new-row",InnerGridCellKind.Marker="marker"}(InnerGridCellKind||(InnerGridCellKind={})),_Symbol$iterator=Symbol.iterator;class CompactSelection{constructor(items){this.items=items,this.offset=amount=>{if(0===amount)return this;const newItems=this.items.map((x=>[x[0]+amount,x[1]+amount]));return new CompactSelection(newItems)},this.add=selection=>{const slice="number"==typeof selection?[selection,selection+1]:selection,newItems=function mergeRanges(input){if(0===input.length)return[];const ranges=[...input],stack=[];return ranges.sort((function(a,b){return a[0]-b[0]})),stack.push([...ranges[0]]),ranges.slice(1).forEach((range=>{const top=stack[stack.length-1];top[1]<range[0]?stack.push([...range]):top[1]<range[1]&&(top[1]=range[1])})),stack}([...this.items,slice]);return new CompactSelection(newItems)},this.remove=selection=>{const items=[...this.items];for(const[i,slice]of items.entries()){const[start,end]=slice;if(start<=selection&&end>selection){const left=[start,selection],right=[selection+1,end],toAdd=[];left[0]!==left[1]&&toAdd.push(left),right[0]!==right[1]&&toAdd.push(right),items.splice(i,1,...toAdd);break}}return new CompactSelection(items)},this.first=()=>{if(0!==this.items.length)return this.items[0][0]},this.last=()=>{if(0!==this.items.length)return this.items.slice(-1)[0][1]-1},this.hasIndex=index=>{for(let i=0;i<this.items.length;i++){const[start,end]=this.items[i];if(index>=start&&index<end)return!0}return!1},this.hasAll=index=>{for(let x=index[0];x<index[1];x++)if(!this.hasIndex(x))return!1;return!0}}get length(){let len=0;for(const[start,end]of this.items)len+=end-start;return len}*[_Symbol$iterator](){for(const[start,end]of this.items)for(let x=start;x<end;x++)yield x}}CompactSelection.empty=()=>{var _emptyCompactSelectio;return null!==(_emptyCompactSelectio=emptyCompactSelection)&&void 0!==_emptyCompactSelectio?_emptyCompactSelectio:emptyCompactSelection=new CompactSelection([])},CompactSelection.fromSingleSelection=selection=>CompactSelection.empty().add(selection);var debounce=__webpack_require__(149),debounce_default=__webpack_require__.n(debounce);function useEventListener(eventName,handler,element,passive,capture){var _capture;capture=null!==(_capture=capture)&&void 0!==_capture&&_capture;const savedHandler=react.useRef();savedHandler.current=handler,react.useEffect((()=>{if(null===element||void 0===element.addEventListener)return;const el=element,eventListener=event=>{var _savedHandler$current;null===(_savedHandler$current=savedHandler.current)||void 0===_savedHandler$current||_savedHandler$current.call(el,event)};return el.addEventListener(eventName,eventListener,{passive:passive,capture:capture}),()=>{el.removeEventListener(eventName,eventListener,{capture:capture})}}),[eventName,element,passive,capture])}const PI=Math.PI;function degreesToRadians(degrees){return degrees*PI/180}const disabledProps=Object(dist_styled_components_browser_esm.b)(["opacity:0.4;pointer-events:none;"]),EditPencil=props=>{var _props$fgColor;const fg=null!==(_props$fgColor=props.fgColor)&&void 0!==_props$fgColor?_props$fgColor:"currentColor";return react.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:fg,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),react.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:fg,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},Checkmark=props=>{var _props$fgColor2;const fg=null!==(_props$fgColor2=props.fgColor)&&void 0!==_props$fgColor2?_props$fgColor2:"currentColor";return react.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:fg,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};const ltrRange="A-Za-z--------",rtl=new RegExp("^[^"+ltrRange+"]*[---]"),ltr=new RegExp("^[^---]*["+ltrRange+"]");function isGroupEqual(left,right){return(null!=left?left:"")===(null!=right?right:"")}function remapForDnDState(columns,dndState){let mappedCols=columns;if(void 0!==dndState){let writable=[...columns];const temp=mappedCols[dndState.src];dndState.src>dndState.dest?(writable.splice(dndState.src,1),writable.splice(dndState.dest,0,temp)):(writable.splice(dndState.dest+1,0,temp),writable.splice(dndState.src,1)),writable=writable.map(((c,i)=>({...c,sticky:columns[i].sticky}))),mappedCols=writable}return mappedCols}function getStickyWidth(columns,dndState){let result=0;const remapped=remapForDnDState(columns,dndState);for(let i=0;i<remapped.length;i++){const c=remapped[i];if(!c.sticky)break;result+=c.width}return result}function getEffectiveColumns(columns,cellXOffset,width,dndState,tx){const mappedCols=remapForDnDState(columns,dndState),sticky=[];for(const c of mappedCols){if(!c.sticky)break;sticky.push(c)}if(sticky.length>0)for(const c of sticky)width-=c.width;let endIndex=cellXOffset,curX=null!=tx?tx:0;for(;curX<=width&&endIndex<mappedCols.length;)curX+=mappedCols[endIndex].width,endIndex++;for(let i=cellXOffset;i<endIndex;i++){const c=mappedCols[i];c.sticky||sticky.push(c)}return sticky}EditPencil.__docgenInfo={description:"",methods:[],displayName:"EditPencil"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/common/utils.js"]={name:"EditPencil",docgenInfo:EditPencil.__docgenInfo,path:"packages/core/dist/js/common/utils.js"}),Checkmark.__docgenInfo={description:"",methods:[],displayName:"Checkmark"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/common/utils.js"]={name:"Checkmark",docgenInfo:Checkmark.__docgenInfo,path:"packages/core/dist/js/common/utils.js"});let metricsSize=0,metricsCache={};function measureTextCached(s,ctx,font){const key=`${s}_${null!=font?font:ctx.font}`;let metrics=metricsCache[key];return void 0===metrics&&(metrics=ctx.measureText(s),metricsCache[key]=metrics,metricsSize++),metricsSize>1e4&&(metricsCache={},metricsSize=0),metrics}function prepTextCell(args,overrideColor){const{ctx:ctx,theme:theme}=args;ctx.fillStyle=null!=overrideColor?overrideColor:theme.textDark}function drawTextCell(args,data){const{ctx:ctx,x:x,y:y,w:w,h:h,theme:theme}=args;if("rtl"===function direction(value){return rtl.test(value)?"rtl":ltr.test(value)?"ltr":"neutral"}(data=data.split(/\r?\n/)[0].slice(0,Math.round(w/4)))){const textWidth=measureTextCached(data,ctx,`${theme.baseFontStyle} ${theme.fontFamily}`).width;ctx.fillText(data,x+w-theme.cellHorizontalPadding-textWidth+.5,y+h/2)}else ctx.fillText(data,x+theme.cellHorizontalPadding+.5,y+h/2)}function drawCheckbox(ctx,theme,checked,x,y,width,height,highlighted){let hoverX=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-20,hoverY=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-20;const centerX=x+width/2,centerY=y+height/2,hovered=Math.abs(hoverX-width/2)<10&&Math.abs(hoverY-height/2)<10;checked?(ctx.beginPath(),roundedRect(ctx,centerX-9,centerY-9,18,18,4),ctx.fillStyle=highlighted?theme.accentColor:theme.textLight,ctx.fill(),ctx.beginPath(),ctx.moveTo(centerX-8+3.65005,centerY-8+7.84995),ctx.lineTo(centerX-8+6.37587,centerY-8+10.7304),ctx.lineTo(centerX-8+11.9999,centerY-8+4.74995),ctx.strokeStyle=theme.accentFg,ctx.lineJoin="round",ctx.lineCap="round",ctx.lineWidth=1.9,ctx.stroke()):(ctx.beginPath(),roundedRect(ctx,centerX-8.5,centerY-8.5,17,17,4),ctx.lineWidth=1,ctx.strokeStyle=hovered?theme.textMedium:theme.textLight,ctx.stroke())}function roundedRect(ctx,x,y,width,height,radius){"number"==typeof radius&&(radius={tl:radius,tr:radius,br:radius,bl:radius}),ctx.moveTo(x+radius.tl,y),ctx.arcTo(x+width,y,x+width,y+radius.tr,radius.tr),ctx.arcTo(x+width,y+height,x+width-radius.br,y+height,radius.br),ctx.arcTo(x,y+height,x,y+height-radius.bl,radius.bl),ctx.arcTo(x,y,x+radius.tl,y,radius.tl)}!async function clearCacheOnLoad(){var _document,_document$fonts;void 0!==(null===(_document=document)||void 0===_document||null===(_document$fonts=_document.fonts)||void 0===_document$fonts?void 0:_document$fonts.ready)&&(await document.fonts.ready,metricsSize=0,metricsCache={})}();const booleanCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:"false"},kind:GridCellKind.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,render:a=>function drawBoolean(args,data,canEdit){const{ctx:ctx,hoverAmount:hoverAmount,theme:theme,x:x,y:y,w:w,h:h,highlighted:highlighted,hoverX:hoverX,hoverY:hoverY}=args;ctx.globalAlpha=canEdit?.65+.35*hoverAmount:.4,drawCheckbox(ctx,theme,data,x,y,w,h,highlighted,hoverX,hoverY),ctx.globalAlpha=1}(a,a.cell.data,a.cell.allowEdit),onDelete:c=>({...c,data:!1}),onClick:(cell,x,y,bounds)=>{if(Math.abs(x-bounds.width/2)<=10&&Math.abs(y-bounds.height/2)<=10)return{...cell,data:!cell.data}}},BubblesOverlayEditorStyle=styled.div`
    display: flex;
    flex-wrap: wrap;

    .boe-bubble {
        display: flex;
        justify-content: center;
        align-items: center;

        border-radius: 100px;

        padding: 0 8px;
        height: 20px;

        background-color: ${p=>p.theme.bgBubble};
        color: ${p=>p.theme.textDark};
        margin: 2px;
    }

    textarea {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;

        opacity: 0;
    }
`,BubblesOverlayEditor=p=>{const{bubbles:bubbles,onKeyDown:onKeyDown}=p;return react.createElement(BubblesOverlayEditorStyle,null,bubbles.map(((b,i)=>react.createElement("div",{key:i,className:"boe-bubble"},b))),react.createElement("textarea",{autoFocus:!0,onKeyDown:onKeyDown}))};BubblesOverlayEditor.__docgenInfo={description:"",methods:[],displayName:"BubblesOverlayEditor"};var bubbles_overlay_editor=BubblesOverlayEditor;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-grid-overlay-editor/private/bubbles-overlay-editor.js"]={name:"BubblesOverlayEditor",docgenInfo:BubblesOverlayEditor.__docgenInfo,path:"packages/core/dist/js/data-grid-overlay-editor/private/bubbles-overlay-editor.js"});const bubbleCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:GridCellKind.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,render:a=>function drawBubbles(args,data){const{x:x,y:y,w:w,h:h,theme:theme,ctx:ctx,highlighted:highlighted}=args;let renderX=x+theme.cellHorizontalPadding;const renderBoxes=[];for(const s of data){if(renderX>x+w)break;const textWidth=measureTextCached(s,ctx,`${theme.baseFontStyle} ${theme.fontFamily}`).width;renderBoxes.push({x:renderX,width:textWidth}),renderX+=textWidth+16+4}ctx.beginPath(),renderBoxes.forEach((rectInfo=>{roundedRect(ctx,rectInfo.x,y+(h-20)/2,rectInfo.width+16,20,10)})),ctx.fillStyle=highlighted?theme.bgBubbleSelected:theme.bgBubble,ctx.fill(),renderBoxes.forEach(((rectInfo,i)=>{ctx.beginPath(),ctx.fillStyle=theme.textBubble,ctx.fillText(data[i],rectInfo.x+8,y+h/2)}))}(a,a.cell.data),getEditor:()=>p=>{const{onKeyDown:onKeyDown,value:value}=p;return react.createElement(bubbles_overlay_editor,{bubbles:value.data,onKeyDown:onKeyDown})}},DrilldownOverlayEditorStyle=styled.div`
    display: flex;
    flex-wrap: wrap;

    .doe-bubble {
        display: flex;
        justify-content: center;
        align-items: center;

        border-radius: 100px;

        padding: 0 8px;
        height: 24px;

        background-color: ${p=>p.theme.bgCell};
        color: ${p=>p.theme.textDark};
        margin: 2px;

        border-radius: 6px;

        box-shadow: 0 0 1px rgba(62, 65, 86, 0.4), 0 1px 3px rgba(62, 65, 86, 0.4);

        img {
            height: 16px;
            object-fit: contain;

            margin-right: 4px;
        }
    }

    textarea {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;

        opacity: 0;
    }
`,DrilldownOverlayEditor=p=>{const{drilldowns:drilldowns,onKeyDown:onKeyDown}=p;return react.createElement(DrilldownOverlayEditorStyle,null,drilldowns.map(((d,i)=>react.createElement("div",{key:i,className:"doe-bubble"},void 0!==d.img&&react.createElement("img",{src:d.img}),react.createElement("div",null,d.text)))),react.createElement("textarea",{autoFocus:!0,onKeyDown:onKeyDown}))};DrilldownOverlayEditor.__docgenInfo={description:"",methods:[],displayName:"DrilldownOverlayEditor"};var drilldown_overlay_editor=DrilldownOverlayEditor;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-grid-overlay-editor/private/drilldown-overlay-editor.js"]={name:"DrilldownOverlayEditor",docgenInfo:DrilldownOverlayEditor.__docgenInfo,path:"packages/core/dist/js/data-grid-overlay-editor/private/drilldown-overlay-editor.js"});const drilldownCellRenderer={getAccessibilityString:c=>c.data.map((d=>d.text)).join(", "),kind:GridCellKind.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,render:a=>function drawDrilldownCell(args,data){const{x:x,y:y,w:w,h:h,theme:theme,ctx:ctx,imageLoader:imageLoader,col:col,row:row}=args;let renderX=x+theme.cellHorizontalPadding;const renderBoxes=[];for(const el of data){if(renderX>x+w)break;const textWidth=measureTextCached(el.text,ctx,`${theme.baseFontStyle} ${theme.fontFamily}`).width;let imgWidth=0;void 0!==el.img&&void 0!==imageLoader.loadOrGetImage(el.img,col,row)&&(imgWidth=20);const renderWidth=textWidth+imgWidth+16;renderBoxes.push({x:renderX,width:renderWidth}),renderX+=renderWidth+4}ctx.beginPath(),renderBoxes.forEach((rectInfo=>{roundedRect(ctx,Math.floor(rectInfo.x),y+(h-24)/2,Math.floor(rectInfo.width),24,6)})),ctx.shadowColor="rgba(24, 25, 34, 0.4)",ctx.shadowBlur=1,ctx.fillStyle=theme.bgCell,ctx.fill(),ctx.shadowColor="rgba(24, 25, 34, 0.2)",ctx.shadowOffsetY=1,ctx.shadowBlur=5,ctx.fillStyle=theme.bgCell,ctx.fill(),ctx.shadowOffsetY=0,ctx.shadowBlur=0,ctx.shadowBlur=0,ctx.beginPath(),renderBoxes.forEach((rectInfo=>{roundedRect(ctx,Math.floor(rectInfo.x)+.5,Math.floor(y+(h-24)/2)+.5,Math.round(rectInfo.width),24,6)})),ctx.strokeStyle=theme.drilldownBorder,ctx.lineWidth=1,ctx.stroke(),renderBoxes.forEach(((rectInfo,i)=>{const d=data[i];let drawX=rectInfo.x+8;if(void 0!==d.img){const img=imageLoader.loadOrGetImage(d.img,col,row);if(void 0!==img){const imgSize=16;let srcX=0,srcY=0,srcWidth=img.width,srcHeight=img.height;srcWidth>srcHeight?(srcX+=(srcWidth-srcHeight)/2,srcWidth=srcHeight):srcHeight>srcWidth&&(srcY+=(srcHeight-srcWidth)/2,srcHeight=srcWidth),ctx.beginPath(),roundedRect(ctx,drawX,y+h/2-imgSize/2,imgSize,imgSize,3),ctx.save(),ctx.clip(),ctx.drawImage(img,srcX,srcY,srcWidth,srcHeight,drawX,y+h/2-imgSize/2,imgSize,imgSize),ctx.restore(),drawX+=imgSize+4}}ctx.beginPath(),ctx.fillStyle=theme.textBubble,ctx.fillText(d.text,drawX,y+h/2)}))}(a,a.cell.data),getEditor:()=>p=>{const{onKeyDown:onKeyDown,value:value}=p;return react.createElement(drilldown_overlay_editor,{drilldowns:value.data,onKeyDown:onKeyDown})}},ImageOverlayEditorStyle=styled.div`
    display: flex;

    height: 100%;

    .centering-container {
        display: flex;
        justify-content: center;
        align-items: center;

        height: 100%;

        img,
        canvas {
            max-height: calc(100vh - var(--overlay-top) - 20px);
            object-fit: contain;
            user-select: none;
        }

        canvas {
            max-width: 380px;
        }
    }

    .edit-icon {
        position: absolute;
        top: 12px;
        right: 0;
        width: 48px;
        height: 48px;
        color: ${p=>p.theme.accentColor};

        cursor: pointer;

        display: flex;
        justify-content: center;
        align-items: center;

        > * {
            width: 24px;
            height: 24px;
        }
    }

    textarea {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;

        opacity: 0;
    }
`;var js=__webpack_require__(192);const ImageOverlayEditor=p=>{const{urls:urls,canWrite:canWrite,onKeyDown:onKeyDown,onEditClick:onEditClick,renderImage:renderImage}=p,filtered=urls.filter((u=>""!==u));if(0===filtered.length)return null;const allowMove=filtered.length>1;return react.createElement(ImageOverlayEditorStyle,{onKeyDown:onKeyDown},react.createElement(js.Carousel,{showArrows:allowMove,showThumbs:!1,swipeable:allowMove,emulateTouch:allowMove,infiniteLoop:allowMove},filtered.map((url=>{var _renderImage;const innerContent=null!==(_renderImage=null==renderImage?void 0:renderImage(url))&&void 0!==_renderImage?_renderImage:react.createElement("img",{draggable:!1,src:url});return react.createElement("div",{className:"centering-container",key:url},innerContent)}))),canWrite&&onEditClick&&react.createElement("button",{className:"edit-icon",onClick:onEditClick},react.createElement(EditPencil,null)),react.createElement("textarea",{autoFocus:!0,onKeyDown:onKeyDown}))};ImageOverlayEditor.__docgenInfo={description:"",methods:[],displayName:"ImageOverlayEditor"};var image_overlay_editor=ImageOverlayEditor;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-grid-overlay-editor/private/image-overlay-editor.js"]={name:"ImageOverlayEditor",docgenInfo:ImageOverlayEditor.__docgenInfo,path:"packages/core/dist/js/data-grid-overlay-editor/private/image-overlay-editor.js"});const imageCellRenderer={getAccessibilityString:c=>c.data.join(", "),kind:GridCellKind.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,render:a=>{var _a$cell$displayData;return function drawImage(args,data){const{x:x,y:y,h:h,col:col,row:row,theme:theme,ctx:ctx,imageLoader:imageLoader}=args;let drawX=x+theme.cellHorizontalPadding;for(const i of data){if(0===i.length)continue;const img=imageLoader.loadOrGetImage(i,col,row);if(void 0!==img){const imgHeight=h-2*theme.cellVerticalPadding,imgWidth=img.width*(imgHeight/img.height);roundedRect(ctx,drawX,y+theme.cellVerticalPadding,imgWidth,imgHeight,4),ctx.save(),ctx.clip(),ctx.drawImage(img,drawX,y+theme.cellVerticalPadding,imgWidth,imgHeight),ctx.restore(),drawX+=imgWidth+4}}}(a,null!==(_a$cell$displayData=a.cell.displayData)&&void 0!==_a$cell$displayData?_a$cell$displayData:a.cell.data)},onDelete:c=>({...c,data:[]}),getEditor:()=>p=>{const{onKeyDown:onKeyDown,value:value,onFinishedEditing:onFinishedEditing,imageEditorOverride:imageEditorOverride}=p,ImageEditor=null!=imageEditorOverride?imageEditorOverride:image_overlay_editor;return react.createElement(ImageEditor,{urls:value.data,canWrite:value.allowAdd,onCancel:onFinishedEditing,onChange:newImage=>{onFinishedEditing({...value,data:[newImage]})},onKeyDown:onKeyDown})}},loadingCellRenderer={getAccessibilityString:()=>"",kind:GridCellKind.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,render:()=>{}};var marked=__webpack_require__(124),marked_default=__webpack_require__.n(marked);const MarkdownContainer=dist_styled_components_browser_esm.c.div.withConfig({displayName:"markdown-container__MarkdownContainer",componentId:"sc-rncfxa-0"})(["word-break:break-word;-webkit-touch-callout:default;padding-top:6px;> *{margin:0;}& *:last-child{margin-bottom:0;}& p img{width:100%;}"]);class markdown_div_MarkdownDiv extends react_default.a.PureComponent{constructor(){super(...arguments),this.targetElement=null,this.containerRefHook=element=>{this.targetElement=element,this.renderMarkdownIntoDiv()}}renderMarkdownIntoDiv(){const{targetElement:targetElement}=this;if(null===targetElement)return;const{contents:contents,createNode:createNode}=this.props,innerHTML=marked_default()(contents),childRange=document.createRange();childRange.selectNodeContents(targetElement),childRange.deleteContents();let newChild=null==createNode?void 0:createNode(innerHTML);if(void 0===newChild){const childDoc=document.createElement("template");childDoc.innerHTML=innerHTML,newChild=childDoc.content}targetElement.appendChild(newChild);const tags=targetElement.getElementsByTagName("a");for(let i=0;i<tags.length;i++){const tag=tags[i];tag.target="_blank",tag.rel="noreferrer noopener"}}render(){return this.renderMarkdownIntoDiv(),react_default.a.createElement(MarkdownContainer,{ref:this.containerRefHook})}}markdown_div_MarkdownDiv.__docgenInfo={description:"",methods:[{name:"renderMarkdownIntoDiv",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MarkdownDiv"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/markdown-div/markdown-div.js"]={name:"MarkdownDiv",docgenInfo:markdown_div_MarkdownDiv.__docgenInfo,path:"packages/core/dist/js/markdown-div/markdown-div.js"});const inputProps=Object(dist_styled_components_browser_esm.b)(["font-size:13px;line-height:16px;font-family:",";color:",";padding:0;margin:0;"],(p=>p.theme.fontFamily),(p=>p.theme.textDark)),InputBox=styled.textarea`
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    width: 100%;
    height: 100%;

    border-radius: 0px;

    resize: none;
    white-space: pre-wrap;
    min-width: 100%;
    overflow: hidden;
    border: 0;
    background-color: transparent;

    ::placeholder {
        color: ${p=>p.theme.textLight};
    }

    ${inputProps}
`,ShadowBox=styled.div`
    visibility: hidden;
    white-space: pre-wrap;
    word-wrap: break-word;

    width: max-content;
    max-width: 100%;

    min-width: 100%;

    ${inputProps}

    padding-bottom: 2px;
`,GrowingEntryStyle=styled.div`
    position: relative;
    margin-top: 6px;
`;function growing_entry_extends(){return growing_entry_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},growing_entry_extends.apply(this,arguments)}const GrowingEntry=props=>{const{placeholder:placeholder,value:value,onKeyDown:onKeyDown,highlight:highlight,...rest}=props,{onChange:onChange,className:className}=rest,inputRef=react.useRef(null),useText=null!=value?value:"";return assert(void 0!==onChange,"GrowingEntry must be a controlled input area"),react.useEffect((()=>{const ta=inputRef.current;if(null===ta)return;if(ta.disabled)return;const length=useText.toString().length;ta.focus(),ta.setSelectionRange(highlight?0:length,length)}),[]),react.createElement(GrowingEntryStyle,null,react.createElement(ShadowBox,{className:className},useText+"\n"),react.createElement(InputBox,growing_entry_extends({},rest,{ref:inputRef,onKeyDown:onKeyDown,value:useText,placeholder:placeholder,dir:"auto"})))};GrowingEntry.__docgenInfo={description:"",methods:[],displayName:"GrowingEntry"};var growing_entry=GrowingEntry;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/growing-entry/growing-entry.js"]={name:"GrowingEntry",docgenInfo:GrowingEntry.__docgenInfo,path:"packages/core/dist/js/growing-entry/growing-entry.js"});const MarkdownOverlayEditorStyle=styled.div`
    min-width: ${p=>p.targetRect.width}px;
    width: 100%;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    position: relative;
    color: ${p=>p.theme.textDark};

    ${GrowingEntryStyle} {
        flex-shrink: 1;
        min-width: 0;
    }

    .spacer {
        flex: 1;
    }

    .edit-icon {
        position: relative;
        cursor: pointer;

        display: flex;
        justify-content: center;
        align-items: center;

        color: ${p=>p.theme.accentColor};

        padding: 0;

        height: 24px;
        width: 24px;
        flex-shrink: 0;

        transition: all "0.125s ease";

        border-radius: 6px;

        > * {
            width: 16px;
            height: 16px;
        }
    }

    .edit-hover {
        :hover {
            background-color: ${p=>p.theme.accentLight};
            transition: background-color 150ms;
        }
    }

    .checkmark-hover {
        :hover {
            color: #ffffff;
            background-color: ${p=>p.theme.accentColor};
        }
    }

    .md-edit-textarea {
        position: relative;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;
        margin-top: 25px;
        opacity: 0;
        padding: 0;
    }

    .ml-6 {
        margin-left: 6px;
    }
`,MarkdownOverlayEditor=p=>{const{markdown:markdown,onChange:onChange,onKeyDown:onKeyDown,forceEditMode:forceEditMode,createNode:createNode,targetRect:targetRect,readonly:readonly,onFinish:onFinish}=p,[editMode,setEditMode]=react.useState(""===markdown||forceEditMode),onEditClick=react.useCallback((()=>{setEditMode((e=>!e))}),[]),addLeftPad=markdown?"ml-6":"";return editMode?react.createElement(MarkdownOverlayEditorStyle,{targetRect:targetRect},react.createElement(growing_entry,{autoFocus:!0,highlight:!1,onKeyDown:onKeyDown,value:markdown,onChange:onChange}),react.createElement("div",{className:`edit-icon checkmark-hover ${addLeftPad}`,onClick:()=>onFinish()},react.createElement(Checkmark,null))):react.createElement(MarkdownOverlayEditorStyle,{targetRect:targetRect},react.createElement(markdown_div_MarkdownDiv,{contents:markdown,createNode:createNode}),!readonly&&react.createElement(react.Fragment,null,react.createElement("div",{className:"spacer"}),react.createElement("div",{className:`edit-icon edit-hover ${addLeftPad}`,onClick:onEditClick},react.createElement(EditPencil,null))),react.createElement("textarea",{className:"md-edit-textarea",autoFocus:!0,onKeyDown:onKeyDown}))};MarkdownOverlayEditor.__docgenInfo={description:"",methods:[],displayName:"MarkdownOverlayEditor"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-grid-overlay-editor/private/markdown-overlay-editor.js"]={name:"MarkdownOverlayEditor",docgenInfo:MarkdownOverlayEditor.__docgenInfo,path:"packages/core/dist/js/data-grid-overlay-editor/private/markdown-overlay-editor.js"});const markdownCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:GridCellKind.Markdown,needsHover:!1,needsHoverPosition:!1,renderPrep:prepTextCell,render:a=>drawTextCell(a,a.cell.data),onDelete:c=>({...c,data:""}),getEditor:()=>p=>{const{onChange:onChange,onKeyDown:onKeyDown,value:value,target:target,onFinishedEditing:onFinishedEditing,markdownDivCreateNode:markdownDivCreateNode,forceEditMode:forceEditMode}=p;return react.createElement(MarkdownOverlayEditor,{onFinish:onFinishedEditing,targetRect:target,readonly:!0===value.readonly,markdown:value.data,onKeyDown:onKeyDown,onChange:e=>onChange({...value,data:e.target.value}),forceEditMode:forceEditMode,createNode:markdownDivCreateNode})}},markerCellRenderer={getAccessibilityString:c=>c.row.toString(),kind:InnerGridCellKind.Marker,needsHover:!0,needsHoverPosition:!1,renderPrep:function prepMarkerRowCell(args){const{ctx:ctx,theme:theme}=args;ctx.font=`9px ${theme.fontFamily}`},render:a=>function drawMarkerRowCell(args,index,checked,markerKind){const{ctx:ctx,x:x,y:y,w:width,h:height,hoverAmount:hoverAmount,theme:theme}=args,checkedboxAlpha=checked?1:hoverAmount;if("number"!==markerKind&&checkedboxAlpha>0&&(ctx.globalAlpha=checkedboxAlpha,drawCheckbox(ctx,theme,checked,x,y,width,height,!0),ctx.globalAlpha=1),"number"===markerKind||"both"===markerKind&&!checked){const text=(index+1).toString(),start=x+(width-measureTextCached(text,ctx,`9px ${theme.fontFamily}`).width)/2;"both"===markerKind&&0!==hoverAmount&&(ctx.globalAlpha=1-hoverAmount),ctx.fillStyle=theme.textLight,ctx.fillText(text,start,y+height/2),0!==hoverAmount&&(ctx.globalAlpha=1)}}(a,a.cell.row,a.cell.checked,a.cell.markerKind)},newRowCellRenderer={getAccessibilityString:()=>"",kind:InnerGridCellKind.NewRow,needsHover:!0,needsHoverPosition:!1,render:a=>function drawNewRowCell(args,data,isFirst){const{ctx:ctx,x:x,y:y,w:w,h:h,hoverAmount:hoverAmount,theme:theme}=args;ctx.beginPath(),ctx.globalAlpha=hoverAmount,ctx.rect(x,y,w,h),ctx.fillStyle=theme.bgHeaderHovered,ctx.fill(),ctx.globalAlpha=1,ctx.beginPath();const lineSize=isFirst?12:12*hoverAmount,xTranslate=isFirst?0:12*(1-hoverAmount)*.5,padPlus=theme.cellHorizontalPadding+4;lineSize>0&&(ctx.moveTo(x+padPlus+xTranslate,y+h/2),ctx.lineTo(x+padPlus+xTranslate+lineSize,y+h/2),ctx.moveTo(x+padPlus+xTranslate+.5*lineSize,y+h/2-.5*lineSize),ctx.lineTo(x+padPlus+xTranslate+.5*lineSize,y+h/2+.5*lineSize),ctx.lineWidth=2,ctx.strokeStyle=theme.bgIconHeader,ctx.lineCap="round",ctx.stroke()),ctx.fillStyle=theme.textMedium,ctx.fillText(data,24+x+theme.cellHorizontalPadding+.5,y+h/2),ctx.beginPath()}(a,a.cell.hint,a.cell.isFirst)},NumberOverlayEditorStyle=styled.div`
    display: flex;
    margin-top: 6px;
    color: ${p=>p.theme.textDark};

    > input {
        font-size: 13px;
        padding: 0;
        font-family: ${p=>p.theme.fontFamily};
        color: ${p=>p.theme.textDark};
    }
`;var react_number_format_es=__webpack_require__(193);function getDecimalSeparator(){var _Intl$NumberFormat,_Intl$NumberFormat$fo,_Intl$NumberFormat$fo2;const result=null===(_Intl$NumberFormat=Intl.NumberFormat())||void 0===_Intl$NumberFormat||null===(_Intl$NumberFormat$fo=_Intl$NumberFormat.formatToParts(1.1))||void 0===_Intl$NumberFormat$fo||null===(_Intl$NumberFormat$fo2=_Intl$NumberFormat$fo.find((part=>"decimal"===part.type)))||void 0===_Intl$NumberFormat$fo2?void 0:_Intl$NumberFormat$fo2.value;return null!=result?result:"."}const NumberOverlayEditor=p=>{const{value:value,onChange:onChange,onKeyDown:onKeyDown,disabled:disabled,highlight:highlight}=p;return react.createElement(NumberOverlayEditorStyle,null,react.createElement(react_number_format_es.a,{autoFocus:!0,onFocus:e=>e.target.setSelectionRange(highlight?0:e.target.value.length,e.target.value.length),disabled:!0===disabled,thousandSeparator:"."===getDecimalSeparator()?",":".",decimalSeparator:getDecimalSeparator(),value:null!=value?value:"",onValueChange:onChange,onKeyDown:onKeyDown}))};NumberOverlayEditor.__docgenInfo={description:"",methods:[],displayName:"NumberOverlayEditor"};var number_overlay_editor=NumberOverlayEditor;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-grid-overlay-editor/private/number-overlay-editor.js"]={name:"NumberOverlayEditor",docgenInfo:NumberOverlayEditor.__docgenInfo,path:"packages/core/dist/js/data-grid-overlay-editor/private/number-overlay-editor.js"});const numberCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:GridCellKind.Number,needsHover:!1,needsHoverPosition:!1,useLabel:!0,renderPrep:prepTextCell,render:a=>drawTextCell(a,a.cell.displayData),onDelete:c=>({...c,data:void 0}),getEditor:()=>p=>{const{isHighlighted:isHighlighted,onChange:onChange,onKeyDown:onKeyDown,value:value}=p;return react.createElement(number_overlay_editor,{highlight:isHighlighted,disabled:!0===value.readonly,value:value.data,onKeyDown:onKeyDown,onChange:x=>onChange({...value,data:x.floatValue})})}},protectedCellRenderer={getAccessibilityString:()=>"",kind:GridCellKind.Protected,needsHover:!1,needsHoverPosition:!1,render:function drawProtectedCell(args){const{ctx:ctx,theme:theme,x:x,y:y,w:w,h:h,highlighted:highlighted}=args;highlighted||(ctx.beginPath(),ctx.rect(x+1,y+1,w-1,h-1),ctx.fillStyle=theme.bgCellMedium,ctx.fill()),ctx.beginPath();let xStart=x+theme.cellHorizontalPadding+2.5;const center=y+h/2,p=2.5*Math.cos(degreesToRadians(30)),q=2.5*Math.sin(degreesToRadians(30));for(let i=0;i<12;i++)ctx.moveTo(xStart,center-2.5),ctx.lineTo(xStart,center+2.5),ctx.moveTo(xStart+p,center-q),ctx.lineTo(xStart-p,center+q),ctx.moveTo(xStart-p,center-q),ctx.lineTo(xStart+p,center+q),xStart+=8;ctx.lineWidth=1.1,ctx.lineCap="square",ctx.strokeStyle=theme.textLight,ctx.stroke()}},rowIDCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:GridCellKind.RowID,needsHover:!1,needsHoverPosition:!1,renderPrep:a=>prepTextCell(a,a.theme.textLight),render:a=>drawTextCell(a,a.cell.data)},textCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:GridCellKind.Text,needsHover:!1,needsHoverPosition:!1,renderPrep:prepTextCell,useLabel:!0,render:a=>drawTextCell(a,a.cell.displayData),onDelete:c=>({...c,data:""}),getEditor:()=>p=>{const{isHighlighted:isHighlighted,onChange:onChange,onKeyDown:onKeyDown,value:value}=p;return react.createElement(growing_entry,{highlight:isHighlighted,autoFocus:!0!==value.readonly,disabled:!0===value.readonly,onKeyDown:onKeyDown,value:value.data,onChange:e=>onChange({...value,data:e.target.value})})}},UriOverlayEditorStyle=styled.div`
    display: flex;

    flex-grow: 1;

    align-items: center;
    padding-top: 2px;

    .link-area {
        flex-grow: 1;
        flex-shrink: 1;

        margin-right: 8px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;

        color: ${p=>p.theme.linkColor};
        text-decoration: underline !important;
    }

    .edit-icon {
        flex-shrink: 0;
        width: 32px;
        color: ${p=>p.theme.accentColor};

        cursor: pointer;

        display: flex;
        justify-content: center;
        align-items: center;

        > * {
            width: 24px;
            height: 24px;
        }
    }

    textarea {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;

        opacity: 0;
    }
`,UriOverlayEditor=p=>{const{uri:uri,onChange:onChange,onKeyDown:onKeyDown,forceEditMode:forceEditMode,readonly:readonly}=p,[editMode,setEditMode]=react.useState(""===uri||forceEditMode),onEditClick=react.useCallback((()=>{setEditMode(!0)}),[]);return editMode?react.createElement(growing_entry,{highlight:!0,autoFocus:!0,onKeyDown:onKeyDown,value:uri,onChange:onChange}):react.createElement(UriOverlayEditorStyle,null,react.createElement("a",{className:"link-area",href:uri,target:"_blank",rel:"noopener noreferrer"},uri),!readonly&&react.createElement("div",{className:"edit-icon",onClick:onEditClick},react.createElement(EditPencil,null)),react.createElement("textarea",{autoFocus:!0,onKeyDown:onKeyDown}))};UriOverlayEditor.__docgenInfo={description:"",methods:[],displayName:"UriOverlayEditor"};var uri_overlay_editor=UriOverlayEditor;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-grid-overlay-editor/private/uri-overlay-editor.js"]={name:"UriOverlayEditor",docgenInfo:UriOverlayEditor.__docgenInfo,path:"packages/core/dist/js/data-grid-overlay-editor/private/uri-overlay-editor.js"});const uriCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:GridCellKind.Uri,needsHover:!1,needsHoverPosition:!1,useLabel:!0,renderPrep:prepTextCell,render:a=>drawTextCell(a,a.cell.data),onDelete:c=>({...c,data:""}),getEditor:()=>p=>{const{onChange:onChange,onKeyDown:onKeyDown,value:value,forceEditMode:forceEditMode}=p;return react.createElement(uri_overlay_editor,{forceEditMode:forceEditMode,uri:value.data,readonly:!0===value.readonly,onKeyDown:onKeyDown,onChange:e=>onChange({...value,data:e.target.value})})}},CellRenderers={[InnerGridCellKind.Marker]:markerCellRenderer,[InnerGridCellKind.NewRow]:newRowCellRenderer,[GridCellKind.Boolean]:booleanCellRenderer,[GridCellKind.Bubble]:bubbleCellRenderer,[GridCellKind.Drilldown]:drilldownCellRenderer,[GridCellKind.Image]:imageCellRenderer,[GridCellKind.Loading]:loadingCellRenderer,[GridCellKind.Markdown]:markdownCellRenderer,[GridCellKind.Number]:numberCellRenderer,[GridCellKind.Protected]:protectedCellRenderer,[GridCellKind.RowID]:rowIDCellRenderer,[GridCellKind.Text]:textCellRenderer,[GridCellKind.Uri]:uriCellRenderer},DataGridOverlayEditorStyle=styled.div`
    position: absolute;

    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-sizing: border-box;

    --overlay-top: ${p=>p.targetRect.y}px;

    left: ${p=>p.targetRect.x-1}px;
    top: ${p=>p.targetRect.y-1}px;
    min-width: ${p=>p.targetRect.width+2}px;
    min-height: ${p=>p.targetRect.height+2}px;
    width: max-content;
    max-width: 400px;
    max-height: calc(100vh - ${p=>p.targetRect.y+10}px);

    border-radius: 2px;
    background-color: ${p=>p.theme.bgCell};

    box-shadow: 0 0 0 1px ${p=>p.theme.accentColor}, 0px 0px 1px rgba(62, 65, 86, 0.4),
        0px 6px 12px rgba(62, 65, 86, 0.15);

    font-family: ${p=>p.theme.fontFamily};
    font-size: 13px;

    ${p=>p.pad&&`padding: ${Math.max(0,(p.targetRect.height-28)/2)}px 8.5px 3px;`}

    @keyframes glide_fade_in {
        from {
            opacity: 0%;
        }

        to {
            opacity: 100%;
        }
    }

    animation: glide_fade_in 60ms 1;

    .clip-region {
        display: flex;
        flex-direction: column;
        overflow-y: auto;
        overflow-x: hidden;
        border-radius: 2px;
        overflow: hidden;

        input {
            width: 100%;

            border: none;
            border-width: 0;
            outline: none;
        }

        textarea {
            border: none;
            border-width: 0;
            outline: none;
        }

        ${GrowingEntryStyle} {
            height: 100%;
        }
    }

    text-align: start;
`;var data_grid_overlay_editor=p=>{const{target:target,content:content,onFinishEditing:onFinishEditing,forceEditMode:forceEditMode,imageEditorOverride:imageEditorOverride,markdownDivCreateNode:markdownDivCreateNode,highlight:highlight,className:className,provideEditor:provideEditor}=p,[tempValue,setTempValue]=react.useState(forceEditMode?content:void 0),onClickOutside=react.useCallback((()=>{onFinishEditing(tempValue,[0,0])}),[tempValue,onFinishEditing]),onCustomFinishedEditing=react.useCallback((newValue=>{onFinishEditing(void 0!==newValue?newValue:tempValue,[0,0])}),[onFinishEditing,tempValue]),onKeyDown=react.useCallback((event=>{"Escape"===event.key?onFinishEditing(void 0,[0,0]):"Enter"!==event.key||event.shiftKey?"Tab"===event.key&&(onFinishEditing(tempValue,[event.shiftKey?-1:1,0]),event.stopPropagation(),event.preventDefault()):(onFinishEditing(tempValue,[0,1]),event.stopPropagation(),event.preventDefault())}),[onFinishEditing,tempValue]),targetValue=null!=tempValue?tempValue:content,CustomEditor=react.useMemo((()=>null==provideEditor?void 0:provideEditor(content)),[content,provideEditor]),[CellEditor,useLabel]=react.useMemo((()=>{var _renderer$getEditor;if(content.kind===GridCellKind.Custom)return[];const renderer=CellRenderers[content.kind];return[null===(_renderer$getEditor=renderer.getEditor)||void 0===_renderer$getEditor?void 0:_renderer$getEditor.call(renderer,content),renderer.useLabel]}),[content]);let editor,pad=!0;void 0!==CustomEditor?(pad=!0!==CustomEditor.disablePadding,editor=react.createElement(CustomEditor,{isHighlighted:highlight,onChange:setTempValue,value:targetValue,onFinishedEditing:onCustomFinishedEditing})):void 0!==CellEditor&&(editor=react.createElement(CellEditor,{forceEditMode:forceEditMode,isHighlighted:highlight,onChange:setTempValue,value:targetValue,onFinishedEditing:e=>onFinishEditing(null!=e?e:tempValue,[0,0]),onKeyDown:onKeyDown,target:target,imageEditorOverride:imageEditorOverride,markdownDivCreateNode:markdownDivCreateNode}));const portalElement=document.getElementById("portal");if(null===portalElement)return console.error('Cannot open Data Grid overlay editor, because portal not found.  Please add `<div id="portal" />` as the last child of your `<body>`.'),null;return Object(react_dom.createPortal)(react.createElement(click_outside_container_ClickOutsideContainer,{className:className,onClickOutside:onClickOutside},react.createElement(DataGridOverlayEditorStyle,{as:!0===useLabel?"label":void 0,targetRect:target,pad:pad},react.createElement("div",{className:"clip-region",onKeyDown:void 0===CustomEditor?void 0:onKeyDown},editor))),portalElement)},clamp=__webpack_require__(49),clamp_default=__webpack_require__.n(clamp),throttle=__webpack_require__(194),throttle_default=__webpack_require__.n(throttle);const imgPool=[];function packColRowToNumber(col,row){return 65536*row+col}function unpackCol(packed){return packed%65536}function unpackRow(packed,col){return(packed-col)/65536}function unpackNumberToColRow(packed){const col=unpackCol(packed);return[col,unpackRow(packed,col)]}var image_window_loader=class image_window_loader_ImageWindowLoader{constructor(){this.imageLoaded=()=>{},this.loadedLocations=[],this.window={x:0,y:0,width:0,height:0},this.freezeCols=0,this.isInWindow=packed=>{const col=unpackCol(packed),row=unpackRow(packed,col);if(col<this.freezeCols)return!0;const w=this.window;return col>=w.x&&col<=w.x+w.width&&row>=w.y&&row<=w.y+w.height},this.cache={},this.sendLoaded=throttle_default()((()=>{this.imageLoaded(this.loadedLocations),this.loadedLocations=[]}),20),this.clearOutOfWindow=()=>{const keys=Object.keys(this.cache);for(let i=0;i<keys.length;i++){const key=keys[i],obj=this.cache[key];let keep=!1;for(let j=0;j<obj.cells.length;j++){const packed=obj.cells[j];if(this.isInWindow(packed)){keep=!0;break}}keep?obj.cells=obj.cells.filter(this.isInWindow):(obj.cancel(),delete this.cache[key])}}}setCallback(imageLoaded){this.imageLoaded=imageLoaded}setWindow(window,freezeCols){this.window.x===window.x&&this.window.y===window.y&&this.window.width===window.width&&this.window.height===window.height&&this.freezeCols===freezeCols||(this.window=window,this.freezeCols=freezeCols,this.clearOutOfWindow())}loadOrGetImage(url,col,row){const key=`${url}`,current=this.cache[key];if(void 0!==current){const packed=packColRowToNumber(col,row);return void 0!==current.img||current.cells.includes(packed)||current.cells.push(packed),current.img}{var _imgPool$pop;const img=null!==(_imgPool$pop=imgPool.pop())&&void 0!==_imgPool$pop?_imgPool$pop:new Image;let canceled=!1;const result={img:void 0,cells:[packColRowToNumber(col,row)],url:url,cancel:()=>{canceled||(canceled=!0,imgPool.unshift(img))}};return requestAnimationFrame((async()=>{try{img.src=url,await img.decode();const toWrite=this.cache[key];if(void 0!==toWrite&&!canceled){toWrite.img=img;for(const packed of toWrite.cells)this.loadedLocations.push(unpackNumberToColRow(packed));this.sendLoaded()}}catch(e){result.cancel()}})),void(this.cache[key]=result)}}};const iconHead='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',headerUri=props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${fg}"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${fg}"/>\n</svg>\n  `},sprites={headerRowID:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}<rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${fg}"/></svg>`},headerNumber:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${fg}"/>\n  </svg>`},headerCode:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}<rect x="2" y="2" width="16" height="16" rx="4" fill="${bg}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${fg}"/></svg>`},headerString:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${fg}"/>\n</svg>`},headerBoolean:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n    <path\n        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"\n        fill="${bg}"\n    />\n    <path\n        fill-rule="evenodd"\n        clip-rule="evenodd"\n        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"\n        fill="${fg}"\n    />\n</svg>`},headerAudioUri:headerUri,headerVideoUri:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${fg}"/>\n</svg>`},headerEmoji:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${fg}"/>\n    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${fg}"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${fg}"/>\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${fg}"/>\n    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${fg}"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${fg}"/>\n  </svg>`},headerImage:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${fg}"/>\n</svg>`},headerUri:headerUri,headerPhone:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path fill="${fg}" d="M3 3h14v14H3z"/>\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${bg}"/>\n  </svg>`},headerMarkdown:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${fg}"/>\n  </svg>`},headerDate:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${fg}"/>\n</svg>`},headerTime:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${fg}"/>\n    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${fg}"/>\n  </svg>`},headerEmail:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${fg}"/>\n</svg>`},headerReference:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <rect x="2" y="8" width="10" height="8" rx="2" fill="${bg}"/>\n    <rect x="8" y="4" width="10" height="8" rx="2" fill="${bg}"/>\n    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${fg}"/>\n  </svg>`},headerIfThenElse:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path fill="${fg}" d="M4 3h12v14H4z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${bg}"/>\n</svg>`},headerSingleValue:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${fg}"/>\n  </svg>`},headerLookup:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${fg}"/>\n  </svg>`},headerTextTemplate:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${fg}"/>\n</svg>`},headerMath:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${fg}"/>\n  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${fg}"/>\n</svg>`},headerRollup:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${bg}"/>\n    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${fg}"/>\n  </svg>`},headerJoinStrings:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${fg}"/>\n</svg>`},headerSplitString:props=>{const fg=props.fgColor,bg=props.bgColor;return`\n    ${iconHead}\n    <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${fg}"/>\n  </svg>`},headerGeoDistance:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${bg}"/>\n  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${fg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${fg}"/>\n</svg>`},headerArray:props=>{const fg=props.fgColor,bg=props.bgColor;return`${iconHead}\n  <rect x="2" y="2" width="16" height="16" rx="2" fill="${bg}"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${fg}"/>\n</svg>`},rowOwnerOverlay:props=>{const fg=props.fgColor;return`\n    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${props.bgColor}" stroke="${fg}" stroke-width="2"/>\n  </svg>`},protectedColumnOverlay:props=>{const fg=props.fgColor;return`\n    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${props.bgColor}" stroke="${fg}" stroke-width="2"/>\n  </svg>\n`},renameIcon:props=>{const bg=props.bgColor;return`${iconHead}\n    <path stroke="${bg}" stroke-width="2" d="M12 3v14"/>\n    <path stroke="${bg}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>\n    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${bg}"/>\n  </svg>\n`}},variantList=["normal","selected","special"];function makeExtraMapIndex(bgColor,fgColor){return`${bgColor}|${fgColor}`}function getColorsForIndex(str){const r=str.split("|");return assert(2===r.length),r}function getColors(variant,theme){return"normal"===variant?[theme.bgIconHeader,theme.fgIconHeader]:"selected"===variant?["white",theme.accentColor]:[theme.accentColor,theme.bgHeader]}class data_grid_sprites_SpriteManager{constructor(headerIcons){this.colorMap=[],this.spriteCanvas=void 0,this.spriteList=void 0,this.headerIcons=void 0,this.headerIcons={...sprites,...null!=headerIcons?headerIcons:{}},this.spriteList=Object.keys(this.headerIcons)}drawSprite(sprite,variant,ctx,x,y,size,theme){if(void 0===this.spriteCanvas)throw new Error;const spriteIndex=this.spriteList.indexOf(sprite);if(-1===spriteIndex)throw new Error(`Unknown header icon: ${sprite}`);const[bgColor,fgColor]=getColors(variant,theme),variantIndex=this.colorMap.indexOf(makeExtraMapIndex(bgColor,fgColor)),xOffset=40*spriteIndex,yOffset=Math.max(0,40*variantIndex);ctx.drawImage(this.spriteCanvas,xOffset,yOffset,40,40,x,y,size,size)}async buildSpriteMap(theme,cols){const map=new Set;for(const v of variantList){const[bg,fg]=getColors(v,theme);map.add(makeExtraMapIndex(bg,fg))}for(const c of cols){var _c$themeOverride,_c$themeOverride2;if(void 0!==(null===(_c$themeOverride=c.themeOverride)||void 0===_c$themeOverride?void 0:_c$themeOverride.bgIconHeader)||void 0!==(null===(_c$themeOverride2=c.themeOverride)||void 0===_c$themeOverride2?void 0:_c$themeOverride2.fgIconHeader)){const finalTheme={...theme,...c.themeOverride};for(const v of variantList){const[bg,fg]=getColors(v,finalTheme);map.add(makeExtraMapIndex(bg,fg))}}}const newMap=[...map];newMap.sort();let hasDiff=!1;for(const[index,key]of newMap.entries())if(key!==this.colorMap[index]){hasDiff=!0;break}if(!hasDiff)return!1;this.colorMap=newMap,this.spriteCanvas=document.createElement("canvas"),this.spriteCanvas.width=40*this.spriteList.length,this.spriteCanvas.height=40*this.colorMap.length;const ctx=this.spriteCanvas.getContext("2d");if(null===ctx)return!1;let x=0;for(const key of this.spriteList){const sprite=this.headerIcons[key];let y=0;for(const ex of this.colorMap){const[bgColor,fgColor]=getColorsForIndex(ex),imgSource=new Image;imgSource.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(sprite({fgColor:fgColor,bgColor:bgColor}))}`,await imgSource.decode(),ctx.drawImage(imgSource,x,y,40,40),y+=40}x+=40}return!0}}var lodash_range=__webpack_require__(123),range_default=__webpack_require__.n(lodash_range);const cache={};let div=null;function parseToRgba(color){const normalizedColor=color.toLowerCase().trim();if(void 0!==cache[normalizedColor])return cache[normalizedColor];div=div||function createDiv(){const d=document.createElement("div");return d.classList.add("color2k-parser"),d.style.opacity="0",d.style.pointerEvents="none",d.style.position="fixed",document.body.appendChild(d),d}(),div.style.color="#000",div.style.color=normalizedColor;const control=getComputedStyle(div).color;div.style.color="#fff",div.style.color=normalizedColor;const computedColor=getComputedStyle(div).color;if(computedColor!==control)throw new Error("Could not parse color");const result=computedColor.replace(/[^\d.,]/g,"").split(",").map(parseFloat);return result.length<4&&result.push(1),cache[normalizedColor]=result,result}function withAlpha(color,alpha){const[r,g,b]=parseToRgba(color);return`rgba(${r}, ${g}, ${b}, ${alpha})`}function data_grid_render_drawCell(ctx,row,cell,col,x,y,w,h,highlighted,theme,drawCustomCell,imageLoader,hoverAmount,hoverInfo,frameTime,lastToken,enqueue){let hoverX,hoverY,result;void 0!==hoverInfo&&hoverInfo[0][0]===col&&hoverInfo[0][1]===row&&(hoverX=hoverInfo[1][0],hoverY=hoverInfo[1][1]);const args={ctx:ctx,theme:theme,col:col,row:row,cell:cell,x:x,y:y,w:w,h:h,highlighted:highlighted,hoverAmount:hoverAmount,hoverX:hoverX,hoverY:hoverY,imageLoader:imageLoader},needsAnim=function drawWithLastUpdate(args,lastUpdate,frameTime,draw){const{ctx:ctx,x:x,y:y,w:width,h:height,theme:theme}=args;let progress=Number.MAX_SAFE_INTEGER,forcePrep=!1;if(void 0!==lastUpdate&&(progress=frameTime-lastUpdate,progress<500)){const fade=1-progress/500;ctx.globalAlpha=fade,ctx.fillStyle=theme.bgSearchResult,ctx.fillRect(x,y,width,height),ctx.globalAlpha=1,forcePrep=!0}return draw(forcePrep),progress<500}(args,cell.lastUpdated,frameTime,(forcePrep=>{if(!(!isInnerOnlyCell(cell)&&!0===(null==drawCustomCell?void 0:drawCustomCell({ctx:ctx,cell:cell,theme:theme,rect:{x:x,y:y,width:w,height:h},col:col,row:row,hoverAmount:hoverAmount,hoverX:hoverX,hoverY:hoverY,highlighted:highlighted,imageLoader:imageLoader})))&&cell.kind!==GridCellKind.Custom){const r=CellRenderers[cell.kind];var _r$renderPrep;if(lastToken!==r||forcePrep)null===(_r$renderPrep=r.renderPrep)||void 0===_r$renderPrep||_r$renderPrep.call(r,args);r.render(args),result=r}}));return needsAnim&&(null==enqueue||enqueue([col,row])),result}function drawGridLines(ctx,effectiveCols,cellYOffset,translateX,translateY,width,height,groupHeaderHeight,totalHeaderHeight,getRowHeight,verticalBorder,lastRowSticky,rows,theme){var _theme$horizontalBord;let verticalOnly=arguments.length>14&&void 0!==arguments[14]&&arguments[14];const hColor=null!==(_theme$horizontalBord=theme.horizontalBorderColor)&&void 0!==_theme$horizontalBord?_theme$horizontalBord:theme.borderColor,vColor=theme.borderColor;ctx.beginPath(),ctx.moveTo(0,totalHeaderHeight+.5),ctx.lineTo(width,totalHeaderHeight+.5),ctx.strokeStyle=theme.bgHeader,ctx.lineWidth=1,ctx.stroke(),ctx.beginPath();let x=.5;for(let index=0;index<effectiveCols.length;index++){const c=effectiveCols[index];if(0===c.width)continue;x+=c.width;const tx=c.sticky?x:x+translateX;(index===effectiveCols.length-1||verticalBorder(index+1))&&(ctx.moveTo(tx,groupHeaderHeight),ctx.lineTo(tx,height)),vColor!==hColor&&(ctx.strokeStyle=vColor,ctx.stroke(),ctx.beginPath())}const stickyHeight=getRowHeight(rows-1),stickyRowY=height-stickyHeight+.5;if(lastRowSticky&&(ctx.moveTo(0,stickyRowY),ctx.lineTo(width,stickyRowY)),!0!==verticalOnly){let y=totalHeaderHeight+.5,row=cellYOffset,isHeader=!0;const target=lastRowSticky?height-stickyHeight:height;for(;y+translateY<=target;){const ty=isHeader?y:y+translateY;(!lastRowSticky||row!==rows-1||Math.abs(ty-stickyRowY)>1)&&(ctx.moveTo(0,ty),ctx.lineTo(width,ty)),y+=getRowHeight(row),isHeader=!1,row++}}ctx.strokeStyle=hColor,ctx.stroke(),ctx.beginPath()}function getActionBoundsForGroup(box,actions){const result=[];let x=box.x+box.width-26*actions.length;const y=box.y+box.height/2-13;for(let i=0;i<actions.length;i++)result.push({x:x,y:y,width:26,height:26}),x+=26;return result}function pointInRect(rect,x,y){return x>=rect.x&&x<=rect.x+rect.width&&y>=rect.y&&y<=rect.y+rect.height}function getHeaderMenuBounds(x,y,width,height){return{x:x+width-30,y:Math.max(y,y+height/2-15),width:30,height:Math.min(30,height)}}function data_grid_render_drawHeader(ctx,x,y,width,height,c,selected,theme,isHovered,hasSelectedCell,hoverAmount,spriteManager,drawHeaderCallback){const menuBounds=getHeaderMenuBounds(x,y,width,height);if(void 0!==drawHeaderCallback&&drawHeaderCallback({ctx:ctx,theme:theme,rect:{x:x,y:y,width:width,height:height},column:c,isSelected:selected,hoverAmount:hoverAmount,isHovered:isHovered,hasSelectedCell:hasSelectedCell,spriteManager:spriteManager,menuBounds:menuBounds}))return;const fillStyle=selected?theme.textHeaderSelected:theme.textHeader;let drawX=x+8;if(void 0!==c.icon){let variant=selected?"selected":"normal";"highlight"===c.style&&(variant=selected?"selected":"special"),spriteManager.drawSprite(c.icon,variant,ctx,drawX,y+(height-20)/2,20,theme),void 0!==c.overlayIcon&&spriteManager.drawSprite(c.overlayIcon,selected?"selected":"special",ctx,drawX+9,y+((height-18)/2+6),18,theme),drawX+=26}if(isHovered&&!0===c.hasMenu&&width>35){const fadeWidth=35,fadeStartPercent=(width-fadeWidth)/width,fadeEndPercent=(width-.7*fadeWidth)/width,grad=ctx.createLinearGradient(x,0,x+width,0),trans=withAlpha(fillStyle,0);grad.addColorStop(0,fillStyle),grad.addColorStop(fadeStartPercent,fillStyle),grad.addColorStop(fadeEndPercent,trans),grad.addColorStop(1,trans),ctx.fillStyle=grad}else ctx.fillStyle=fillStyle;if(ctx.fillText(c.title,drawX,y+height/2+1),isHovered&&!0===c.hasMenu){ctx.beginPath();const triangleX=menuBounds.x+menuBounds.width/2-5.5,triangleY=menuBounds.y+menuBounds.height/2-3;!function roundedPoly(ctx,points,radiusAll){const asVec=function(p,pp){const vx=pp.x-p.x,vy=pp.y-p.y,vlen=Math.sqrt(vx*vx+vy*vy),vnx=vx/vlen,vny=vy/vlen;return{x:vx,y:pp.y-p.y,len:vlen,nx:vnx,ny:vny,ang:Math.atan2(vny,vnx)}};let radius=radiusAll;const len=points.length;let p1=points[len-1];for(let i=0;i<len;i++){let p2=points[i%len];const p3=points[(i+1)%len],v1=asVec(p2,p1),v2=asVec(p2,p3),sinA=v1.nx*v2.ny-v1.ny*v2.nx,sinA90=v1.nx*v2.nx-v1.ny*-v2.ny;let angle=Math.asin(sinA<-1?-1:sinA>1?1:sinA),radDirection=1,drawDirection=!1;sinA90<0?angle<0?angle=Math.PI+angle:(angle=Math.PI-angle,radDirection=-1,drawDirection=!0):angle>0&&(radDirection=-1,drawDirection=!0),radius=void 0!==p2.radius?p2.radius:radiusAll;const halfAngle=angle/2;let cRadius,lenOut=Math.abs(Math.cos(halfAngle)*radius/Math.sin(halfAngle));lenOut>Math.min(v1.len/2,v2.len/2)?(lenOut=Math.min(v1.len/2,v2.len/2),cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))):cRadius=radius;let x=p2.x+v2.nx*lenOut,y=p2.y+v2.ny*lenOut;x+=-v2.ny*cRadius*radDirection,y+=v2.nx*cRadius*radDirection,ctx.arc(x,y,cRadius,v1.ang+Math.PI/2*radDirection,v2.ang-Math.PI/2*radDirection,drawDirection),p1=p2,p2=p3}ctx.closePath()}(ctx,[{x:triangleX,y:triangleY},{x:triangleX+11,y:triangleY},{x:triangleX+5.5,y:triangleY+6}],1),ctx.fillStyle=fillStyle,ctx.fill()}}function drawGridHeaders(ctx,effectiveCols,enableGroups,hovered,width,translateX,headerHeight,groupHeaderHeight,selectedColumns,dragAndDropState,isResizing,selectedCell,outerTheme,spriteManager,hoverValues,verticalBorder,getGroupDetails,damage,drawHeaderCallback){var _hovered$3;const totalHeaderHeight=headerHeight+groupHeaderHeight;if(totalHeaderHeight<=0)return;ctx.fillStyle=outerTheme.bgHeader,ctx.fillRect(0,0,width,totalHeaderHeight);const[hCol,hRow]=null!==(_hovered$3=null==hovered?void 0:hovered[0])&&void 0!==_hovered$3?_hovered$3:[],font=`${outerTheme.headerFontStyle} ${outerTheme.fontFamily}`;ctx.font=font,walkColumns(effectiveCols,0,translateX,0,totalHeaderHeight,((c,x,_y,clipX)=>{var _c$group,_hoverValues$find$hov,_hoverValues$find;if(void 0!==damage&&!damage.some((d=>-1===d[1]&&d[0]===c.sourceIndex)))return;const diff=Math.max(0,clipX-x);ctx.save(),ctx.beginPath(),ctx.rect(x+diff,groupHeaderHeight,c.width-diff,headerHeight),ctx.clip();const groupTheme=getGroupDetails(null!==(_c$group=c.group)&&void 0!==_c$group?_c$group:"").overrideTheme,theme=void 0===c.themeOverride&&void 0===groupTheme?outerTheme:{...outerTheme,...groupTheme,...c.themeOverride};theme.bgHeader!==outerTheme.bgHeader&&(ctx.fillStyle=theme.bgHeader,ctx.fill());const f=`${theme.headerFontStyle} ${theme.fontFamily}`;font!==f&&(ctx.font=f);const selected=selectedColumns.hasIndex(c.sourceIndex),noHover=void 0!==dragAndDropState||isResizing,hoveredBoolean=!noHover&&-1===hRow&&hCol===c.sourceIndex,hover=noHover?0:null!==(_hoverValues$find$hov=null===(_hoverValues$find=hoverValues.find((s=>s.item[0]===c.sourceIndex&&-1===s.item[1])))||void 0===_hoverValues$find?void 0:_hoverValues$find.hoverAmount)&&void 0!==_hoverValues$find$hov?_hoverValues$find$hov:0,hasSelectedCell=void 0!==selectedCell&&selectedCell.cell[0]===c.sourceIndex,bgFillStyle=selected?theme.accentColor:hasSelectedCell?theme.bgHeaderHasFocus:theme.bgHeader,y=enableGroups?groupHeaderHeight:0,xOffset=0===c.sourceIndex?0:1;selected?(ctx.fillStyle=bgFillStyle,ctx.fillRect(x+xOffset,y,c.width-xOffset,headerHeight)):(hasSelectedCell||hover>0)&&(ctx.beginPath(),ctx.rect(x+xOffset,y,c.width-xOffset,headerHeight),hasSelectedCell&&(ctx.fillStyle=theme.bgHeaderHasFocus,ctx.fill()),hover>0&&(ctx.globalAlpha=hover,ctx.fillStyle=theme.bgHeaderHovered,ctx.fill(),ctx.globalAlpha=1)),data_grid_render_drawHeader(ctx,x,y,c.width,headerHeight,c,selected,theme,hoveredBoolean,hasSelectedCell,hover,spriteManager,drawHeaderCallback),ctx.restore()})),enableGroups&&function drawGroups(ctx,effectiveCols,width,translateX,groupHeaderHeight,hovered,theme,spriteManager,_hoverValues,verticalBorder,getGroupDetails,damage){var _hovered$;const[hCol,hRow]=null!==(_hovered$=null==hovered?void 0:hovered[0])&&void 0!==_hovered$?_hovered$:[];let finalX=0;walkGroups(effectiveCols,width,translateX,groupHeaderHeight,((span,groupName,x,y,w,h)=>{var _groupTheme$textGroup;if(void 0!==damage&&!damage.some((d=>-2===d[1]&&d[0]>=span[0]&&d[0]<=span[1])))return;ctx.save(),ctx.beginPath(),ctx.rect(x,y,w,h),ctx.clip();const group=getGroupDetails(groupName),groupTheme=void 0===(null==group?void 0:group.overrideTheme)?theme:{...theme,...group.overrideTheme},isHovered=-2===hRow&&void 0!==hCol&&hCol>=span[0]&&hCol<=span[1],fillColor=isHovered?groupTheme.bgHeaderHovered:groupTheme.bgHeader;if(fillColor!==theme.bgHeader&&(ctx.fillStyle=fillColor,ctx.fill()),ctx.fillStyle=null!==(_groupTheme$textGroup=groupTheme.textGroupHeader)&&void 0!==_groupTheme$textGroup?_groupTheme$textGroup:groupTheme.textHeader,void 0!==group){let drawX=x;if(void 0!==group.icon&&(spriteManager.drawSprite(group.icon,"normal",ctx,drawX+8,(groupHeaderHeight-20)/2,20,groupTheme),drawX+=26),ctx.fillText(group.name,drawX+8,groupHeaderHeight/2+1),void 0!==group.actions&&isHovered){var _hovered$2;const actionBoxes=getActionBoundsForGroup({x:x,y:y,width:w,height:h},group.actions);ctx.beginPath();const fadeStartX=actionBoxes[0].x-10,fadeWidth=x+w-fadeStartX;ctx.rect(fadeStartX,0,fadeWidth,groupHeaderHeight);const grad=ctx.createLinearGradient(fadeStartX,0,fadeStartX+fadeWidth,0),trans=withAlpha(fillColor,0);grad.addColorStop(0,trans),grad.addColorStop(10/fadeWidth,fillColor),grad.addColorStop(1,fillColor),ctx.fillStyle=grad,ctx.fill(),ctx.globalAlpha=.6;const[mouseX,mouseY]=null!==(_hovered$2=null==hovered?void 0:hovered[1])&&void 0!==_hovered$2?_hovered$2:[-1,-1];for(let i=0;i<group.actions.length;i++){const action=group.actions[i],box=actionBoxes[i],actionHovered=pointInRect(box,mouseX+x,mouseY);actionHovered&&(ctx.globalAlpha=1),spriteManager.drawSprite(action.icon,"normal",ctx,box.x+box.width/2-10,box.y+box.height/2-10,20,groupTheme),actionHovered&&(ctx.globalAlpha=.6)}ctx.globalAlpha=1}}verticalBorder(span[0])&&(ctx.beginPath(),ctx.moveTo(x+.5,0),ctx.lineTo(x+.5,groupHeaderHeight),ctx.strokeStyle=theme.borderColor,ctx.lineWidth=1,ctx.stroke()),ctx.restore(),finalX=x+w})),ctx.beginPath(),ctx.moveTo(finalX+.5,0),ctx.lineTo(finalX+.5,groupHeaderHeight),ctx.moveTo(0,groupHeaderHeight+.5),ctx.lineTo(width,groupHeaderHeight+.5),ctx.strokeStyle=theme.borderColor,ctx.lineWidth=1,ctx.stroke()}(ctx,effectiveCols,width,translateX,groupHeaderHeight,hovered,outerTheme,spriteManager,0,verticalBorder,getGroupDetails,damage)}function intersectRect(x1,y1,w1,h1,x2,y2,w2,h2){return x1<=x2+w2&&x2<=x1+w1&&y1<=y2+h2&&y2<=y1+h1}function clipDamage(ctx,effectiveColumns,width,height,groupHeaderHeight,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,lastRowSticky,damage){if(void 0===damage||0===damage.length)return;const stickyRowHeight=lastRowSticky?getRowHeight(rows-1):0;ctx.beginPath(),walkGroups(effectiveColumns,width,translateX,groupHeaderHeight,((span,_group,x,y,w,h)=>{for(let i=0;i<damage.length;i++){const d=damage[i];if(-2===d[1]&&d[0]>=span[0]&&d[0]<=span[1]){ctx.rect(x,y,w,h);break}}})),walkColumns(effectiveColumns,cellYOffset,translateX,translateY,totalHeaderHeight,((c,drawX,colDrawY,clipX,startRow)=>{const diff=Math.max(0,clipX-drawX),finalX=drawX+diff+1,finalWidth=c.width-diff-1;for(let i=0;i<damage.length;i++){const d=damage[i];if(d[0]===c.sourceIndex&&(-1===d[1]||void 0===d[1])){ctx.rect(finalX,groupHeaderHeight,finalWidth,totalHeaderHeight-groupHeaderHeight);break}}walkRowsInCol(startRow,colDrawY,height,rows,getRowHeight,lastRowSticky,((drawY,row,rh,isSticky)=>{let isDamaged=!1;for(let i=0;i<damage.length;i++){const d=damage[i];if(d[0]===c.sourceIndex&&d[1]===row){isDamaged=!0;break}}if(isDamaged){const top=drawY+1,h=(isSticky?top+rh-1:Math.min(top+rh-1,height-stickyRowHeight))-top;h>0&&ctx.rect(finalX,top,finalWidth,h)}}))})),ctx.clip()}function drawCells(ctx,effectiveColumns,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,getCellContent,getGroupDetails,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,selectedCell,selectedColumns,prelightCells,drawCustomCell,imageLoader,hoverValues,hoverInfo,outerTheme,enqueue){var _damage$length;let toDraw=null!==(_damage$length=null==damage?void 0:damage.length)&&void 0!==_damage$length?_damage$length:Number.MAX_SAFE_INTEGER;const frameTime=performance.now();let font;walkColumns(effectiveColumns,cellYOffset,translateX,translateY,totalHeaderHeight,((c,drawX,colDrawStartY,clipX,startRow)=>{var _c$group2;const diff=Math.max(0,clipX-drawX),colDrawX=drawX+diff,colDrawY=totalHeaderHeight+1,colWidth=c.width-diff,colHeight=height-totalHeaderHeight-1;if(drawRegions.length>0){let found=!1;for(let i=0;i<drawRegions.length;i++){const dr=drawRegions[i];if(intersectRect(colDrawX,colDrawY,colWidth,colHeight,dr.x,dr.y,dr.width,dr.height)){found=!0;break}}if(!found)return}ctx.save(),ctx.beginPath(),ctx.rect(colDrawX,colDrawY,colWidth,colHeight),ctx.clip();const groupTheme=getGroupDetails(null!==(_c$group2=c.group)&&void 0!==_c$group2?_c$group2:"").overrideTheme,colTheme=void 0===c.themeOverride&&void 0===groupTheme?outerTheme:{...outerTheme,...groupTheme,...c.themeOverride},colFont=`${colTheme.baseFontStyle} ${colTheme.fontFamily}`;let lastToken;return colFont!==font&&(font=colFont,ctx.font=colFont),walkRowsInCol(startRow,colDrawStartY,height,rows,getRowHeight,lastRowSticky,((drawY,row,rh,isSticky)=>{if(void 0!==damage){let found=!1;for(let i=0;i<damage.length;i++){const d=damage[i];if(d[0]===c.sourceIndex&&d[1]===row){found=!0;break}}if(!found)return}if(drawRegions.length>0){let found=!1;for(let i=0;i<drawRegions.length;i++){const dr=drawRegions[i];if(intersectRect(drawX,drawY,c.width,rh,dr.x,dr.y,dr.width,dr.height)){found=!0;break}}if(!found)return}const rowSelected=selectedRows.hasIndex(row),rowDisabled=disabledRows.hasIndex(row),cell=row<rows?getCellContent([c.sourceIndex,row]):{kind:GridCellKind.Loading,allowOverlay:!1},theme=void 0===cell.themeOverride?colTheme:{...colTheme,...cell.themeOverride};ctx.beginPath();let highlighted=(null==selectedCell?void 0:selectedCell.cell[0])===c.sourceIndex&&(null==selectedCell?void 0:selectedCell.cell[1])===row||!isSticky&&(rowSelected||selectedColumns.hasIndex(c.sourceIndex));if(void 0!==(null==selectedCell?void 0:selectedCell.range)){const{range:range}=selectedCell;c.sourceIndex>=range.x&&c.sourceIndex<range.x+range.width&&row>=range.y&&row<range.y+range.height&&(highlighted=!0)}(isSticky||theme.bgCell!==outerTheme.bgCell)&&(ctx.fillStyle=theme.bgCell,ctx.fillRect(drawX,drawY,c.width,rh),lastToken=void 0),highlighted||rowDisabled?(rowDisabled&&(ctx.fillStyle=theme.bgHeader,ctx.fillRect(drawX,drawY,c.width,rh)),highlighted&&(ctx.fillStyle=theme.accentLight,ctx.fillRect(drawX,drawY,c.width,rh)),lastToken=void 0):!0===(null==prelightCells?void 0:prelightCells.some((pre=>pre[0]===c.sourceIndex&&pre[1]===row)))&&(ctx.fillStyle=theme.bgSearchResult,ctx.fillRect(drawX,drawY,c.width,rh),lastToken=void 0),"faded"===cell.style&&(ctx.globalAlpha=.6);const hoverValue=hoverValues.find((hv=>hv.item[0]===c.sourceIndex&&hv.item[1]===row));if(c.width>10){var _hoverValue$hoverAmou;if(theme!==colTheme){const cellFont=`${theme.baseFontStyle} ${theme.fontFamily}`;cellFont!==font&&(ctx.font=cellFont,font=cellFont)}const drawResult=data_grid_render_drawCell(ctx,row,cell,c.sourceIndex,drawX,drawY,c.width,rh,highlighted,theme,drawCustomCell,imageLoader,null!==(_hoverValue$hoverAmou=null==hoverValue?void 0:hoverValue.hoverAmount)&&void 0!==_hoverValue$hoverAmou?_hoverValue$hoverAmou:0,hoverInfo,frameTime,lastToken,enqueue);lastToken=drawResult}return ctx.globalAlpha=1,toDraw--,toDraw<=0})),ctx.restore(),toDraw<=0}))}function drawFocusRing(ctx,width,height,cellYOffset,translateX,translateY,effectiveCols,theme,totalHeaderHeight,selectedCell,getRowHeight,lastRowSticky,rows){if(void 0===selectedCell||effectiveCols.find((c=>c.sourceIndex===selectedCell.cell[0]===void 0)))return;const[targetCol,targetRow]=selectedCell.cell,stickRowHeight=lastRowSticky&&!(lastRowSticky&&targetRow===rows-1)?getRowHeight(rows-1)-1:0;ctx.save(),ctx.beginPath(),ctx.rect(0,totalHeaderHeight,width,height-totalHeaderHeight-stickRowHeight),ctx.clip(),walkColumns(effectiveCols,cellYOffset,translateX,translateY,totalHeaderHeight,((col,drawX,colDrawY,clipX,startRow)=>{if(col.sourceIndex===targetCol)return walkRowsInCol(startRow,colDrawY,height,rows,getRowHeight,lastRowSticky,((drawY,row,rh)=>{var _col$themeOverride$ac,_col$themeOverride;if(row===targetRow){if(clipX>drawX){const diff=Math.max(0,clipX-drawX);ctx.beginPath(),ctx.rect(drawX+diff,drawY,col.width-diff+1,rh+1),ctx.clip()}return ctx.beginPath(),ctx.rect(drawX+.5,drawY+.5,col.width,rh),ctx.strokeStyle=null!==(_col$themeOverride$ac=null===(_col$themeOverride=col.themeOverride)||void 0===_col$themeOverride?void 0:_col$themeOverride.accentColor)&&void 0!==_col$themeOverride$ac?_col$themeOverride$ac:theme.accentColor,ctx.lineWidth=1,ctx.stroke(),!0}})),!0})),ctx.restore()}function drawGrid(canvas,buffers,width,height,cellXOffset,cellYOffset,translateX,translateY,columns,mappedColumns,enableGroups,freezeColumns,dragAndDropState,theme,headerHeight,groupHeaderHeight,selectedRows,disabledRows,rowHeight,verticalBorder,selectedColumns,isResizing,selectedCell,lastRowSticky,rows,getCellContent,getGroupDetails,drawCustomCell,drawHeaderCallback,prelightCells,imageLoader,lastBlitData,canBlit,damage,hoverValues,hoverInfo,spriteManager,scrolling,enqueue){var _window$devicePixelRa;if(0===width||0===height)return;const dpr=scrolling?1:Math.ceil(null!==(_window$devicePixelRa=window.devicePixelRatio)&&void 0!==_window$devicePixelRa?_window$devicePixelRa:1);canvas.width===width*dpr&&canvas.height===height*dpr||(canvas.width=width*dpr,canvas.height=height*dpr);const overlayCanvas=buffers.overlay,totalHeaderHeight=enableGroups?groupHeaderHeight+headerHeight:headerHeight;overlayCanvas.width===width*dpr&&overlayCanvas.height===totalHeaderHeight*dpr||(overlayCanvas.width=width*dpr,overlayCanvas.height=totalHeaderHeight*dpr);const last=lastBlitData.current;if(!0===canBlit&&cellXOffset===last.cellXOffset&&cellYOffset===last.cellYOffset&&translateX===last.translateX&&translateY===last.translateY)return;const targetCtx=canvas.getContext("2d",{alpha:!1}),overlayCtx=overlayCanvas.getContext("2d",{alpha:!1});if(null===overlayCtx||null===targetCtx)return;const getRowHeight=r=>"number"==typeof rowHeight?rowHeight:rowHeight(r);overlayCtx.save(),overlayCtx.beginPath(),targetCtx.save(),targetCtx.beginPath(),overlayCtx.textBaseline="middle",targetCtx.textBaseline="middle",targetCtx.font=`${theme.baseFontStyle} ${theme.fontFamily}`,overlayCtx.font=`${theme.baseFontStyle} ${theme.fontFamily}`,1!==dpr&&(overlayCtx.scale(dpr,dpr),targetCtx.scale(dpr,dpr));const effectiveCols=getEffectiveColumns(mappedColumns,cellXOffset,width,dragAndDropState,translateX);let drawRegions=[];const drawHeaderTexture=()=>{drawGridHeaders(overlayCtx,effectiveCols,enableGroups,hoverInfo,width,translateX,headerHeight,groupHeaderHeight,selectedColumns,dragAndDropState,isResizing,selectedCell,theme,spriteManager,hoverValues,verticalBorder,getGroupDetails,damage,drawHeaderCallback),drawGridLines(overlayCtx,effectiveCols,cellYOffset,translateX,translateY,width,height,groupHeaderHeight,totalHeaderHeight,getRowHeight,verticalBorder,lastRowSticky,rows,theme,!0)};if(void 0!==damage){let doHeaders=!1;return(damage=damage.filter((x=>(doHeaders=doHeaders||x[1]<0,x[1]<0||intersectRect(cellXOffset,cellYOffset,effectiveCols.length,300,x[0],x[1],1,1)||intersectRect(0,cellYOffset,freezeColumns,300,x[0],x[1],1,1))))).length>0&&(clipDamage(targetCtx,effectiveCols,width,height,groupHeaderHeight,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,lastRowSticky,damage),targetCtx.fillStyle=theme.bgCell,targetCtx.fillRect(0,totalHeaderHeight+1,width,height-totalHeaderHeight-1),drawCells(targetCtx,effectiveCols,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,getCellContent,getGroupDetails,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,selectedCell,selectedColumns,prelightCells,drawCustomCell,imageLoader,hoverValues,hoverInfo,theme,enqueue)),doHeaders&&(clipDamage(overlayCtx,effectiveCols,width,totalHeaderHeight,groupHeaderHeight,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,lastRowSticky,damage),drawHeaderTexture()),targetCtx.restore(),void overlayCtx.restore()}if(canBlit&&cellXOffset===last.cellXOffset&&translateX===last.translateX||drawHeaderTexture(),!0===canBlit){const{regions:regions}=function blitLastFrame(ctx,canvas,last,cellXOffset,cellYOffset,translateX,translateY,lastRowSticky,width,height,rows,totalHeaderHeight,dpr,columns,effectiveCols,getRowHeight){const drawRegions=[];let blittedYOnly=!1;ctx.imageSmoothingEnabled=!1;const minY=Math.min(last.cellYOffset,cellYOffset),maxY=Math.max(last.cellYOffset,cellYOffset);let deltaY=0;for(let i=minY;i<maxY;i++)deltaY+=getRowHeight(i);cellYOffset>last.cellYOffset&&(deltaY=-deltaY),deltaY+=translateY-last.translateY;const minX=Math.min(last.cellXOffset,cellXOffset),maxX=Math.max(last.cellXOffset,cellXOffset);let deltaX=0;for(let i=minX;i<maxX;i++)deltaX+=columns[i].width;cellXOffset>last.cellXOffset&&(deltaX=-deltaX),deltaX+=translateX-last.translateX;let stickyWidth=getStickyWidth(effectiveCols);if(stickyWidth>0&&stickyWidth++,0!==deltaX&&0!==deltaY)return{regions:[],yOnly:!1};const stickyRowHeight=lastRowSticky?getRowHeight(rows-1):0,blitWidth=width-stickyWidth-Math.abs(deltaX),blitHeight=height-totalHeaderHeight-stickyRowHeight-Math.abs(deltaY)-1;if(blitWidth>150&&blitHeight>150){blittedYOnly=0===deltaX;const args={sx:0,sy:0,sw:width*dpr,sh:height*dpr,dx:0,dy:0,dw:width,dh:height};deltaY>0?(args.sy=(totalHeaderHeight+1)*dpr,args.sh=blitHeight*dpr,args.dy=deltaY+totalHeaderHeight+1,args.dh=blitHeight,drawRegions.push({x:0,y:totalHeaderHeight,width:width,height:deltaY+1})):deltaY<0&&(args.sy=(-deltaY+totalHeaderHeight+1)*dpr,args.sh=blitHeight*dpr,args.dy=totalHeaderHeight+1,args.dh=blitHeight,drawRegions.push({x:0,y:height+deltaY-stickyRowHeight,width:width,height:-deltaY+stickyRowHeight})),deltaX>0?(args.sx=stickyWidth*dpr,args.sw=blitWidth*dpr,args.dx=deltaX+stickyWidth,args.dw=blitWidth,drawRegions.push({x:stickyWidth-1,y:0,width:deltaX+2,height:height})):deltaX<0&&(args.sx=(stickyWidth-deltaX)*dpr,args.sw=blitWidth*dpr,args.dx=stickyWidth,args.dw=blitWidth,drawRegions.push({x:width+deltaX,y:0,width:-deltaX,height:height}),ctx.beginPath()),ctx.drawImage(canvas,args.sx,args.sy,args.sw,args.sh,args.dx,args.dy,args.dw,args.dh)}return ctx.imageSmoothingEnabled=!0,{regions:drawRegions,yOnly:blittedYOnly}}(targetCtx,canvas,last,cellXOffset,cellYOffset,translateX,translateY,lastRowSticky,width,height,rows,totalHeaderHeight,dpr,columns,effectiveCols,getRowHeight);drawRegions=regions}if(function overdrawStickyBoundaries(ctx,effectiveCols,width,height,totalHeaderHeight,lastRowSticky,rows,getRowHeight,theme){const drawX=getStickyWidth(effectiveCols);ctx.beginPath(),ctx.moveTo(0,totalHeaderHeight+.5),ctx.lineTo(width,totalHeaderHeight+.5),ctx.strokeStyle=theme.bgHeader,ctx.stroke(),ctx.beginPath();let doCell=!1;if(0!==drawX&&(ctx.moveTo(drawX+.5,0),ctx.lineTo(drawX+.5,height),doCell=!0),lastRowSticky){const h=getRowHeight(rows-1);ctx.moveTo(0,height-h+.5),ctx.lineTo(width,height-h+.5),doCell=!0}doCell&&(ctx.strokeStyle=theme.bgCell,ctx.stroke()),ctx.moveTo(0,totalHeaderHeight+.5),ctx.lineTo(width,totalHeaderHeight+.5),ctx.strokeStyle=theme.borderColor,ctx.stroke()}(targetCtx,effectiveCols,width,height,totalHeaderHeight,lastRowSticky,rows,getRowHeight,theme),void 0!==selectedCell&&selectedCell.cell[0]===freezeColumns-1&&drawFocusRing(targetCtx,width,height,cellYOffset,translateX,translateY,effectiveCols,theme,totalHeaderHeight,selectedCell,getRowHeight,lastRowSticky,rows),drawRegions.length>0){targetCtx.beginPath();for(const r of drawRegions)targetCtx.rect(r.x,r.y,r.width,r.height);targetCtx.clip(),targetCtx.beginPath()}targetCtx.fillStyle=theme.bgCell,targetCtx.fillRect(0,0,width,height),drawCells(targetCtx,effectiveCols,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,getCellContent,getGroupDetails,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,selectedCell,selectedColumns,prelightCells,drawCustomCell,imageLoader,hoverValues,hoverInfo,theme,enqueue),function drawBlanks(ctx,effectiveColumns,width,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,theme){void 0===damage&&walkColumns(effectiveColumns,cellYOffset,translateX,translateY,totalHeaderHeight,((c,drawX,colDrawY,clipX,startRow)=>{if(c!==effectiveColumns[effectiveColumns.length-1])return;drawX+=c.width;const x=Math.max(drawX,clipX);x>width||(ctx.save(),ctx.beginPath(),ctx.rect(x,totalHeaderHeight+1,1e4,height-totalHeaderHeight-1),ctx.clip(),walkRowsInCol(startRow,colDrawY,height,rows,getRowHeight,lastRowSticky,((drawY,row,rh,isSticky)=>{if(!isSticky&&drawRegions.length>0&&!drawRegions.some((dr=>intersectRect(drawX,drawY,1e4,rh,dr.x,dr.y,dr.width,dr.height))))return;const rowSelected=selectedRows.hasIndex(row),rowDisabled=disabledRows.hasIndex(row);ctx.beginPath(),rowDisabled&&(ctx.fillStyle=theme.bgHeader,ctx.fillRect(drawX,drawY,1e4,rh)),rowSelected&&(ctx.fillStyle=theme.accentLight,ctx.fillRect(drawX,drawY,1e4,rh))})),ctx.restore())}))}(targetCtx,effectiveCols,width,height,totalHeaderHeight,translateX,translateY,cellYOffset,rows,getRowHeight,selectedRows,disabledRows,lastRowSticky,drawRegions,damage,theme),drawGridLines(targetCtx,effectiveCols,cellYOffset,translateX,translateY,width,height,groupHeaderHeight,totalHeaderHeight,getRowHeight,verticalBorder,lastRowSticky,rows,theme),drawFocusRing(targetCtx,width,height,cellYOffset,translateX,translateY,effectiveCols,theme,totalHeaderHeight,selectedCell,getRowHeight,lastRowSticky,rows),null==imageLoader||imageLoader.setWindow({x:cellXOffset,y:cellYOffset,width:effectiveCols.length,height:100},freezeColumns),lastBlitData.current={cellXOffset:cellXOffset,cellYOffset:cellYOffset,translateX:translateX,translateY:translateY},targetCtx.restore(),overlayCtx.restore()}function walkRowsInCol(startRow,drawY,height,rows,getRowHeight,lastRowSticky,cb){let y=drawY,row=startRow,doSticky=lastRowSticky;for(;y<height||doSticky;){const doingSticky=doSticky&&y>=height;doingSticky&&(doSticky=!1,row=rows-1);const rh=getRowHeight(row);doingSticky&&(y=height-rh);if(!(doSticky&&row===rows-1)&&!0===cb(y,row,rh,doingSticky))break;if(doingSticky)break;y+=rh,row++}}function walkColumns(effectiveCols,cellYOffset,translateX,translateY,totalHeaderHeight,cb){let x=0,clipX=0;const drawY=totalHeaderHeight+translateY;for(const c of effectiveCols){let drawX;if(drawX=c.sticky?clipX:x+translateX,!0===cb(c,drawX,drawY,clipX,cellYOffset))break;x+=c.width,clipX+=c.sticky?c.width:0}}function walkGroups(effectiveCols,width,translateX,groupHeaderHeight,cb){let x=0,clipX=0;for(let index=0;index<effectiveCols.length;index++){var _startCol$group;const startCol=effectiveCols[index];let end=index+1,boxWidth=startCol.width;for(startCol.sticky&&(clipX+=boxWidth);end<effectiveCols.length&&isGroupEqual(effectiveCols[end].group,startCol.group)&&effectiveCols[end].sticky===effectiveCols[index].sticky;){const endCol=effectiveCols[end];boxWidth+=endCol.width,end++,index++,endCol.sticky&&(clipX+=endCol.width)}const localX=x+(startCol.sticky?0:translateX),delta=startCol.sticky?0:Math.max(0,clipX-localX),w=Math.min(boxWidth-delta,width-(localX+delta));cb([startCol.sourceIndex,effectiveCols[end-1].sourceIndex],null!==(_startCol$group=startCol.group)&&void 0!==_startCol$group?_startCol$group:"",localX+delta,0,w,groupHeaderHeight),x+=boxWidth}}const ease=new class Easing{constructor(p1x,p1y,p2x,p2y){this.ax=0,this.ay=0,this.bx=0,this.by=0,this.cx=0,this.cy=0,this.cx=3*p1x,this.bx=3*(p2x-p1x)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p1y,this.by=3*(p2y-p1y)-this.cy,this.ay=1-this.cy-this.by}sampleCurveX(t){return((this.ax*t+this.bx)*t+this.cx)*t}sampleCurveY(t){return((this.ay*t+this.by)*t+this.cy)*t}sampleCurveDerivativeX(t){return(3*this.ax*t+2*this.bx)*t+this.cx}solveCurveX(x){let t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){if(x2=this.sampleCurveX(t2)-x,Math.abs(x2)<1e-6)return t2;if(d2=this.sampleCurveDerivativeX(t2),Math.abs(d2)<1e-6)break;t2-=x2/d2}if(t0=0,t1=1,t2=x,t2<t0)return t0;if(t2>t1)return t1;for(;t0<t1;){if(x2=this.sampleCurveX(t2),Math.abs(x2-x)<1e-6)return t2;x>x2?t0=t2:t1=t2,t2=.5*(t1-t0)+t0}return t2}solve(x){return this.sampleCurveY(this.solveCurveX(x))}}(.25,.1,.25,1);class animation_manager_AnimationManager{constructor(callback){this.callback=callback,this.currentHoveredItem=void 0,this.leavingItems=[],this.lastAnimationTime=void 0,this.areSameItems=(left,right)=>(null==left?void 0:left[0])===(null==right?void 0:right[0])&&(null==left?void 0:left[1])===(null==right?void 0:right[1]),this.addToLeavingItems=item=>{void 0!==this.leavingItems.find((i=>this.areSameItems(i.item,item.item)))||this.leavingItems.push(item)},this.removeFromLeavingItems=item=>{var _leavingItem$hoverAmo;const leavingItem=this.leavingItems.find((e=>this.areSameItems(e.item,item)));return this.leavingItems=this.leavingItems.filter((i=>i!==leavingItem)),null!==(_leavingItem$hoverAmo=null==leavingItem?void 0:leavingItem.hoverAmount)&&void 0!==_leavingItem$hoverAmo?_leavingItem$hoverAmo:0},this.cleanUpLeavingElements=()=>{this.leavingItems=this.leavingItems.filter((i=>i.hoverAmount>0))},this.shouldStep=()=>{const hasLeavingItems=this.leavingItems.length>0,currentHoveredIsAnimating=void 0!==this.currentHoveredItem&&this.currentHoveredItem.hoverAmount<1;return hasLeavingItems||currentHoveredIsAnimating},this.getAnimatingItems=()=>void 0!==this.currentHoveredItem?[...this.leavingItems,this.currentHoveredItem]:this.leavingItems.map((x=>({...x,hoverAmount:ease.solve(x.hoverAmount)}))),this.step=timestamp=>{if(void 0===this.lastAnimationTime)this.lastAnimationTime=timestamp;else{const delta=(timestamp-this.lastAnimationTime)/80;for(const item of this.leavingItems)item.hoverAmount=clamp_default()(item.hoverAmount-delta,0,1);void 0!==this.currentHoveredItem&&(this.currentHoveredItem.hoverAmount=clamp_default()(this.currentHoveredItem.hoverAmount+delta,0,1));const animating=this.getAnimatingItems();this.callback(animating),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=timestamp,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0},this.setHovered=item=>{var _this$currentHoveredI;if(!this.areSameItems(null===(_this$currentHoveredI=this.currentHoveredItem)||void 0===_this$currentHoveredI?void 0:_this$currentHoveredI.item,item)){if(void 0!==this.currentHoveredItem&&this.addToLeavingItems(this.currentHoveredItem),void 0!==item){const hoverAmount=this.removeFromLeavingItems(item);this.currentHoveredItem={item:item,hoverAmount:hoverAmount}}else this.currentHoveredItem=void 0;void 0===this.lastAnimationTime&&window.requestAnimationFrame(this.step)}}}}const{userAgent:userAgent}=window.navigator;class Lazy{constructor(fn){this.fn=void 0,this.val=void 0,this.fn=fn}get value(){var _this$val;return null!==(_this$val=this.val)&&void 0!==_this$val?_this$val:this.val=this.fn()}}const browserIsFirefox=userAgent.includes("Firefox"),browserIsSafari=userAgent.indexOf("Mac OS")>-1&&userAgent.indexOf("Safari")>-1&&userAgent.indexOf("Chrome")<0,browserIsOSX=function lazy(fn){return new Lazy(fn)}((()=>window.navigator.platform.toLowerCase().startsWith("mac")));var data_grid=react.memo(react.forwardRef(((p,forwardedRef)=>{var _p$translateX,_p$translateY,_p$experimental,_eventTargetRef$curre;const{width:width,height:height,className:className,columns:columns,cellXOffset:cellXOffsetReal,cellYOffset:cellYOffset,headerHeight:headerHeight,groupHeaderHeight:groupHeaderHeight,rowHeight:rowHeight,rows:rows,getCellContent:getCellContent,onHeaderMenuClick:onHeaderMenuClick,selectedRows:selectedRows,enableGroups:enableGroups,selectedCell:selectedCell,selectedColumns:selectedColumns,freezeColumns:freezeColumns,lastRowSticky:lastRowSticky,onMouseDown:onMouseDown,onMouseUp:onMouseUp,onMouseMoveRaw:onMouseMoveRaw,onMouseMove:onMouseMove,onItemHovered:onItemHovered,dragAndDropState:dragAndDropState,onKeyDown:onKeyDown,onKeyUp:onKeyUp,canvasRef:canvasRef,onDragStart:onDragStart,eventTargetRef:eventTargetRef,isResizing:isResizing,isDragging:isDragging,isDraggable:isDraggable=!1,allowResize:allowResize,disabledRows:disabledRows,getGroupDetails:getGroupDetails,prelightCells:prelightCells,headerIcons:headerIcons,verticalBorder:verticalBorder,drawHeader:drawHeader,drawCustomCell:drawCustomCell,onCellFocused:onCellFocused}=p,translateX=null!==(_p$translateX=p.translateX)&&void 0!==_p$translateX?_p$translateX:0,translateY=null!==(_p$translateY=p.translateY)&&void 0!==_p$translateY?_p$translateY:0,cellXOffset=Math.max(freezeColumns,Math.min(columns.length-1,cellXOffsetReal)),theme=Object(dist_styled_components_browser_esm.d)(),ref=react.useRef(null),imageLoader=react.useMemo((()=>new image_window_loader),[]),canBlit=react.useRef(),damageRegion=react.useRef(void 0),[scrolling,setScrolling]=react.useState(!1),hoverValues=react.useRef([]),lastBlitData=react.useRef({cellXOffset:cellXOffset,cellYOffset:cellYOffset,translateX:translateX,translateY:translateY}),[hoveredItemInfo,setHoveredItemInfo]=react.useState(),[hoveredOnEdge,setHoveredOnEdge]=react.useState(),overlayRef=react.useRef(null),spriteManager=react.useMemo((()=>new data_grid_sprites_SpriteManager(headerIcons)),[headerIcons]),totalHeaderHeight=enableGroups?groupHeaderHeight+headerHeight:headerHeight,scrollingStopRef=react.useRef(-1),disableFirefoxRescaling=!0===(null===(_p$experimental=p.experimental)||void 0===_p$experimental?void 0:_p$experimental.disableFirefoxRescaling);react.useEffect((()=>{browserIsFirefox&&1!==window.devicePixelRatio&&!disableFirefoxRescaling&&(-1!==scrollingStopRef.current&&setScrolling(!0),window.clearTimeout(scrollingStopRef.current),scrollingStopRef.current=window.setTimeout((()=>{setScrolling(!1),scrollingStopRef.current=-1}),200))}),[cellYOffset,cellXOffset,translateX,translateY,disableFirefoxRescaling]),react.useEffect((()=>{(async()=>{await spriteManager.buildSpriteMap(theme,columns)&&lastDrawRef.current()})()}),[columns,spriteManager,theme]);const mappedColumns=function useMappedColumns(columns,freezeColumns){return react_default.a.useMemo((()=>columns.map(((c,i)=>({...c,sourceIndex:i,sticky:i<freezeColumns})))),[columns,freezeColumns])}(columns,freezeColumns),getBoundsForItem=react.useCallback(((canvas,col,row)=>{const rect=canvas.getBoundingClientRect(),result={x:rect.x,y:rect.y+totalHeaderHeight+translateY,width:0,height:0};if(col>=freezeColumns){const dir=cellXOffset>col?-1:1,freezeWidth=getStickyWidth(mappedColumns);result.x+=freezeWidth+translateX;for(let i=cellXOffset;i!==col;i+=dir)result.x+=mappedColumns[i].width*dir}else for(let i=0;i<col;i++)result.x+=mappedColumns[i].width;if(result.width=mappedColumns[col].width+1,-1===row)result.y=rect.y+groupHeaderHeight,result.height=headerHeight;else if(-2===row){result.y=rect.y,result.height=groupHeaderHeight;let start=col;const group=mappedColumns[col].group,sticky=mappedColumns[col].sticky;for(;start>0&&isGroupEqual(mappedColumns[start-1].group,group)&&mappedColumns[start-1].sticky===sticky;){const c=mappedColumns[start-1];result.x-=c.width,result.width+=c.width,start--}let end=col;for(;end+1<mappedColumns.length&&isGroupEqual(mappedColumns[end+1].group,group)&&mappedColumns[end+1].sticky===sticky;){const c=mappedColumns[end+1];result.width+=c.width,end++}if(!sticky){const freezeWidth=getStickyWidth(mappedColumns),clip=result.x-(rect.x+freezeWidth);clip<0&&(result.x-=clip,result.width+=clip),result.x+result.width>rect.right&&(result.width=rect.right-result.x)}}else if(lastRowSticky&&row===rows-1){const stickyHeight="number"==typeof rowHeight?rowHeight:rowHeight(row);result.y=rect.y+(height-stickyHeight),result.height=stickyHeight}else{const dir=cellYOffset>row?-1:1;for(let r=cellYOffset;r!==row;r+=dir)result.y+=("number"==typeof rowHeight?rowHeight:rowHeight(r))*dir;result.height=("number"==typeof rowHeight?rowHeight:rowHeight(row))+1}return result}),[totalHeaderHeight,translateY,freezeColumns,mappedColumns,lastRowSticky,rows,cellXOffset,translateX,groupHeaderHeight,headerHeight,rowHeight,height,cellYOffset]),getMouseArgsForPosition=react.useCallback(((canvas,posX,posY,ev)=>{const rect=canvas.getBoundingClientRect(),x=posX-rect.left,y=posY-rect.top,col=function getColumnIndexForX(targetX,effectiveColumns,translateX){let x=0;for(const c of effectiveColumns){if(targetX<=(c.sticky?x:x+(null!=translateX?translateX:0))+c.width)return c.sourceIndex;x+=c.width}return-1}(x,getEffectiveColumns(mappedColumns,cellXOffset,width,void 0,translateX),translateX),row=function getRowIndexForY(targetY,height,hasGroups,headerHeight,groupHeaderHeight,rows,rowHeight,cellYOffset,translateY,lastRowSticky){const totalHeaderHeight=headerHeight+groupHeaderHeight;if(hasGroups&&targetY<=groupHeaderHeight)return-2;if(targetY<=totalHeaderHeight)return-1;const lastRowHeight="number"==typeof rowHeight?rowHeight:rowHeight(rows-1);if(lastRowSticky&&targetY>height-lastRowHeight)return rows-1;const effectiveRows=rows-(lastRowSticky?1:0),ty=targetY-(null!=translateY?translateY:0);if("number"==typeof rowHeight){const target=Math.floor((ty-totalHeaderHeight)/rowHeight)+cellYOffset;if(target>=effectiveRows)return;return target}{let curY=totalHeaderHeight;for(let i=cellYOffset;i<effectiveRows;i++){const rh=rowHeight(i);if(ty<=curY+rh)return i;curY+=rh}return}}(y,height,enableGroups,headerHeight,groupHeaderHeight,rows,rowHeight,cellYOffset,translateY,lastRowSticky),shiftKey=!0===(null==ev?void 0:ev.shiftKey),ctrlKey=!0===(null==ev?void 0:ev.ctrlKey),metaKey=!0===(null==ev?void 0:ev.metaKey),isTouch=void 0!==ev&&!(ev instanceof MouseEvent);let result;if(-1===col||y<0||x<0||void 0===row||x>width||y>height){const horizontal=x>width?-1:x<0?1:0,vertical=y>height?1:y<0?-1:0;let isEdge=!1;if(-1===col&&-1===row){const b=getBoundsForItem(canvas,mappedColumns.length-1,-1);isEdge=posX<b.x+b.width+5}result={kind:"out-of-bounds",location:[-1!==col?col:x<0?0:mappedColumns.length-1,null!=row?row:rows-1],direction:[horizontal,vertical],shiftKey:shiftKey,ctrlKey:ctrlKey,metaKey:metaKey,isEdge:isEdge,isTouch:isTouch}}else if(row<=-1){let bounds=getBoundsForItem(canvas,col,row),isEdge=void 0!==bounds&&bounds.x+bounds.width-posX<=5;const previousCol=col-1;var _mappedColumns$previo,_mappedColumns$col$gr;if(posX-bounds.x<=5&&previousCol>=0)isEdge=!0,bounds=getBoundsForItem(canvas,previousCol,row),result={kind:enableGroups&&-2===row?"group-header":"header",location:[previousCol,row],bounds:bounds,group:null!==(_mappedColumns$previo=mappedColumns[previousCol].group)&&void 0!==_mappedColumns$previo?_mappedColumns$previo:"",isEdge:isEdge,shiftKey:shiftKey,ctrlKey:ctrlKey,metaKey:metaKey,isTouch:isTouch,localEventX:posX-bounds.x,localEventY:posY-bounds.y};else result={kind:enableGroups&&-2===row?"group-header":"header",group:null!==(_mappedColumns$col$gr=mappedColumns[col].group)&&void 0!==_mappedColumns$col$gr?_mappedColumns$col$gr:"",location:[col,row],bounds:bounds,isEdge:isEdge,shiftKey:shiftKey,ctrlKey:ctrlKey,metaKey:metaKey,isTouch:isTouch,localEventX:posX-bounds.x,localEventY:posY-bounds.y}}else{const bounds=getBoundsForItem(canvas,col,row);result={kind:"cell",location:[col,row],bounds:bounds,isEdge:void 0!==bounds&&bounds.x+bounds.width-posX<5,shiftKey:shiftKey,ctrlKey:ctrlKey,metaKey:metaKey,isTouch:isTouch,localEventX:posX-bounds.x,localEventY:posY-bounds.y}}return result}),[mappedColumns,cellXOffset,width,translateX,height,enableGroups,headerHeight,groupHeaderHeight,rows,rowHeight,cellYOffset,translateY,lastRowSticky,getBoundsForItem]);const[hoveredItem]=null!=hoveredItemInfo?hoveredItemInfo:[],enqueueRef=react.useRef((_item=>{})),hoverInfoRef=react.useRef(hoveredItemInfo);hoverInfoRef.current=hoveredItemInfo;const draw=react.useCallback((()=>{var _canBlit$current;const canvas=ref.current,overlay=overlayRef.current;null!==canvas&&null!==overlay&&drawGrid(canvas,{overlay:overlay},width,height,cellXOffset,cellYOffset,Math.round(translateX),Math.round(translateY),columns,mappedColumns,enableGroups,freezeColumns,dragAndDropState,theme,headerHeight,groupHeaderHeight,null!=selectedRows?selectedRows:CompactSelection.empty(),null!=disabledRows?disabledRows:CompactSelection.empty(),rowHeight,verticalBorder,null!=selectedColumns?selectedColumns:CompactSelection.empty(),isResizing,selectedCell,lastRowSticky,rows,getCellContent,null!=getGroupDetails?getGroupDetails:name=>({name:name}),drawCustomCell,drawHeader,prelightCells,imageLoader,lastBlitData,null!==(_canBlit$current=canBlit.current)&&void 0!==_canBlit$current&&_canBlit$current,damageRegion.current,hoverValues.current,hoverInfoRef.current,spriteManager,scrolling,enqueueRef.current)}),[width,height,cellXOffset,cellYOffset,translateX,translateY,columns,mappedColumns,enableGroups,freezeColumns,dragAndDropState,theme,headerHeight,groupHeaderHeight,selectedRows,disabledRows,rowHeight,verticalBorder,selectedColumns,isResizing,selectedCell,lastRowSticky,rows,getCellContent,getGroupDetails,drawCustomCell,drawHeader,prelightCells,imageLoader,spriteManager,scrolling]);canBlit.current=void 0!==canBlit.current,react.useEffect((()=>{canBlit.current=!1}),[width,height,columns,theme,headerHeight,rowHeight,rows,isResizing,getCellContent,selectedRows,selectedColumns,selectedCell,dragAndDropState,prelightCells,scrolling]);const lastDrawRef=react.useRef(draw);react.useEffect((()=>{draw(),lastDrawRef.current=draw}),[draw]),react.useEffect((()=>{(async()=>{var _document,_document$fonts;if(void 0===(null===(_document=document)||void 0===_document||null===(_document$fonts=_document.fonts)||void 0===_document$fonts?void 0:_document$fonts.ready))return;await document.fonts.ready;const prev=canBlit.current;canBlit.current=!1,lastDrawRef.current(),canBlit.current=prev})()}),[]);const damageInternal=react.useCallback((locations=>{const last=canBlit.current;canBlit.current=!1,damageRegion.current=locations,lastDrawRef.current(),damageRegion.current=void 0,canBlit.current=last}),[]),enqueue=function useAnimationQueue(draw){const queue=react.useRef([]),drawRef=react.useRef(draw);drawRef.current=draw;const loop=react.useCallback((()=>{window.requestAnimationFrame((()=>{const toDraw=queue.current;queue.current=[],drawRef.current(toDraw)}))}),[]);return react.useCallback((item=>{(function hasItem(arr,item){for(let i=0;i<arr.length;i++)if(arr[i][0]===item[0]&&arr[i][1]===item[1])return!0;return!1})(queue.current,item)||(0===queue.current.length&&loop(),queue.current.push(item))}),[loop])}(damageInternal);enqueueRef.current=enqueue;const damage=react.useCallback((cells=>{damageInternal(cells.map((x=>x.cell)))}),[damageInternal]);imageLoader.setCallback(damageInternal);const[hCol,hRow]=null!=hoveredItem?hoveredItem:[],headerHovered=void 0!==hCol&&-1===hRow,groupHeaderHovered=void 0!==hCol&&-2===hRow;let clickableInnerCellHovered=!1,editableBoolHovered=!1;if(void 0!==hCol&&void 0!==hRow&&hRow>0){const cell=getCellContent([hCol,hRow]);clickableInnerCellHovered=cell.kind===InnerGridCellKind.NewRow||cell.kind===InnerGridCellKind.Marker&&"number"!==cell.markerKind,editableBoolHovered=cell.kind===GridCellKind.Boolean&&!0===cell.allowEdit}const cursor=isDragging?"grabbing":null!=hoveredOnEdge&&hoveredOnEdge||isResizing?"col-resize":headerHovered||clickableInnerCellHovered||editableBoolHovered||groupHeaderHovered?"pointer":"default",style=react.useMemo((()=>({width:width,height:height,contain:"strict",display:"block",cursor:cursor})),[width,height,cursor]),target=null==eventTargetRef?void 0:eventTargetRef.current;null!=target&&(target.style.cursor=style.cursor);const groupHeaderActionForEvent=react.useCallback(((group,bounds,localEventX,localEventY)=>{if(void 0===getGroupDetails)return;const groupDesc=getGroupDetails(group);if(void 0!==groupDesc.actions){const boxes=getActionBoundsForGroup(bounds,groupDesc.actions);for(let i=0;i<boxes.length;i++){const box=boxes[i];if(pointInRect(box,localEventX+bounds.x,localEventY+box.y))return groupDesc.actions[i]}}}),[getGroupDetails]),isOverHeaderMenu=react.useCallback(((canvas,col,clientX,clientY)=>{const header=columns[col];if(!(isDragging||!0!==header.hasMenu||null!=hoveredOnEdge&&hoveredOnEdge)){const headerBounds=getBoundsForItem(canvas,col,-1),menuBounds=getHeaderMenuBounds(headerBounds.x,headerBounds.y,headerBounds.width,headerBounds.height);if(clientX>menuBounds.x&&clientX<menuBounds.x+menuBounds.width&&clientY>menuBounds.y&&clientY<menuBounds.y+menuBounds.height)return headerBounds}}),[columns,getBoundsForItem,hoveredOnEdge,isDragging]),onMouseDownImpl=react.useCallback((ev=>{const canvas=ref.current,eventTarget=null==eventTargetRef?void 0:eventTargetRef.current;if(null===canvas||ev.target!==canvas&&ev.target!==eventTarget)return;let clientX,clientY;if(ev instanceof MouseEvent){if(0!==ev.button)return;clientX=ev.clientX,clientY=ev.clientY}else clientX=ev.touches[0].clientX,clientY=ev.touches[0].clientY;if(ev.target===eventTarget&&null!==eventTarget){const bounds=eventTarget.getBoundingClientRect();if(clientX>bounds.left+eventTarget.clientWidth)return;if(clientY>bounds.top+eventTarget.clientHeight)return}const args=getMouseArgsForPosition(canvas,clientX,clientY,ev);if("header"!==args.kind||void 0===isOverHeaderMenu(canvas,args.location[0],clientX,clientY)){if("group-header"===args.kind){if(void 0!==groupHeaderActionForEvent(args.group,args.bounds,args.localEventX,args.localEventY))return}null==onMouseDown||onMouseDown(args)}}),[eventTargetRef,getMouseArgsForPosition,groupHeaderActionForEvent,isOverHeaderMenu,onMouseDown]);useEventListener("touchstart",onMouseDownImpl,window,!0),useEventListener("mousedown",onMouseDownImpl,window,!0);const onMouseUpImpl=react.useCallback((ev=>{const canvas=ref.current;if(void 0===onMouseUp||null===canvas)return;const eventTarget=null==eventTargetRef?void 0:eventTargetRef.current,isOutside=ev.target!==canvas&&ev.target!==eventTarget;let clientX,clientY;if(isOutside||ev.preventDefault(),ev instanceof MouseEvent){if(0!==ev.button)return;clientX=ev.clientX,clientY=ev.clientY}else clientX=ev.changedTouches[0].clientX,clientY=ev.changedTouches[0].clientY;const args=getMouseArgsForPosition(canvas,clientX,clientY,ev);if("header"===args.kind&&isOverHeaderMenu(canvas,args.location[0],clientX,clientY)){const[col]=args.location,headerBounds=isOverHeaderMenu(canvas,col,clientX,clientY);if(void 0!==headerBounds)return void(null==onHeaderMenuClick||onHeaderMenuClick(col,headerBounds))}else if("group-header"===args.kind){const action=groupHeaderActionForEvent(args.group,args.bounds,args.localEventX,args.localEventY);if(void 0!==action)return void action.onClick(args)}onMouseUp(args,isOutside)}),[onMouseUp,eventTargetRef,getMouseArgsForPosition,isOverHeaderMenu,onHeaderMenuClick,groupHeaderActionForEvent]);useEventListener("mouseup",onMouseUpImpl,window,!1),useEventListener("touchend",onMouseUpImpl,window,!1);const onAnimationFrame=react.useCallback((values=>{const last=canBlit.current;canBlit.current=!1,damageRegion.current=values.map((x=>x.item)),hoverValues.current=values,lastDrawRef.current(),damageRegion.current=void 0,canBlit.current=last}),[]),animManagerValue=react.useMemo((()=>new animation_manager_AnimationManager(onAnimationFrame)),[onAnimationFrame]),animationManager=react.useRef(animManagerValue);animationManager.current=animManagerValue,react.useEffect((()=>{const am=animationManager.current;if(void 0===hoveredItem||hoveredItem[1]<0)return void am.setHovered(hoveredItem);const cell=getCellContent(hoveredItem);am.setHovered(cell.kind===GridCellKind.Custom||CellRenderers[cell.kind].needsHover?hoveredItem:void 0)}),[getCellContent,hoveredItem]);const hoveredRef=react.useRef();useEventListener("mousemove",react.useCallback((ev=>{const canvas=ref.current;if(null===canvas)return;const args=getMouseArgsForPosition(canvas,ev.clientX,ev.clientY,ev);if(function isSameItem(item,other){return item===other||(null==item?void 0:item.kind)===(null==other?void 0:other.kind)&&(null==item?void 0:item.location[0])===(null==other?void 0:other.location[0])&&(null==item?void 0:item.location[1])===(null==other?void 0:other.location[1])}(args,hoveredRef.current)){if("cell"===args.kind||"header"===args.kind||"group-header"===args.kind){const newInfo=[args.location,[args.localEventX,args.localEventY]];if(setHoveredItemInfo(newInfo),hoverInfoRef.current=newInfo,"cell"===args.kind){const toCheck=getCellContent(args.location);(toCheck.kind===GridCellKind.Custom||CellRenderers[toCheck.kind].needsHoverPosition)&&damageInternal([args.location])}else"group-header"===args.kind&&damageInternal([args.location])}}else null==onItemHovered||onItemHovered(args),setHoveredItemInfo("out-of-bounds"===args.kind?void 0:[args.location,[args.localEventX,args.localEventY]]),hoveredRef.current=args;setHoveredOnEdge("header"===args.kind&&args.isEdge&&!0===allowResize),null==onMouseMoveRaw||onMouseMoveRaw(ev),onMouseMove(args)}),[getMouseArgsForPosition,allowResize,onMouseMoveRaw,onMouseMove,onItemHovered,getCellContent,damageInternal]),window,!0);const onKeyDownImpl=react.useCallback((event=>{const canvas=ref.current;if(null===canvas)return;let bounds;void 0!==selectedCell&&(bounds=getBoundsForItem(canvas,selectedCell.cell[0],selectedCell.cell[1])),null==onKeyDown||onKeyDown({bounds:bounds,cancel:()=>{event.stopPropagation(),event.preventDefault()},ctrlKey:event.ctrlKey,metaKey:event.metaKey,shiftKey:event.shiftKey,key:event.key,keyCode:event.keyCode})}),[onKeyDown,selectedCell,getBoundsForItem]),onKeyUpImpl=react.useCallback((event=>{const canvas=ref.current;if(null===canvas)return;let bounds;void 0!==selectedCell&&(bounds=getBoundsForItem(canvas,selectedCell.cell[0],selectedCell.cell[1])),null==onKeyUp||onKeyUp({bounds:bounds,cancel:()=>{event.stopPropagation(),event.preventDefault()},ctrlKey:event.ctrlKey,metaKey:event.metaKey,shiftKey:event.shiftKey,key:event.key,keyCode:event.keyCode})}),[onKeyUp,selectedCell,getBoundsForItem]),refImpl=react.useCallback((instance=>{ref.current=instance,void 0!==canvasRef&&(canvasRef.current=instance)}),[canvasRef]);useEventListener("dragstart",react.useCallback((event=>{const canvas=ref.current;if(null===canvas||!isDraggable)return!1;let dragMime,dragData;const args=getMouseArgsForPosition(canvas,event.clientX,event.clientY);let dragImage,dragImageX,dragImageY;if(null==onDragStart||onDragStart({...args,setData:(mime,payload)=>{dragMime=mime,dragData=payload},setDragImage:(image,x,y)=>{dragImage=image,dragImageX=x,dragImageY=y}}),void 0!==dragMime&&void 0!==dragData&&null!==event.dataTransfer)if(event.dataTransfer.setData(dragMime,dragData),event.dataTransfer.effectAllowed="link",void 0!==dragImage&&void 0!==dragImageX&&void 0!==dragImageY)event.dataTransfer.setDragImage(dragImage,dragImageX,dragImageY);else{const[col,row]=args.location;if(void 0!==row){const offscreen=document.createElement("canvas"),boundsForDragTarget=getBoundsForItem(canvas,col,row);offscreen.width=boundsForDragTarget.width,offscreen.height=boundsForDragTarget.height;const ctx=offscreen.getContext("2d");null!==ctx&&(ctx.fillStyle=theme.bgCell,ctx.fillRect(0,0,offscreen.width,offscreen.height),data_grid_render_drawCell(ctx,row,getCellContent([col,row]),0,0,0,boundsForDragTarget.width,boundsForDragTarget.height,!1,theme,drawCustomCell,imageLoader,1,void 0,0)),offscreen.style.left="-100%",offscreen.style.position="absolute",document.body.appendChild(offscreen),event.dataTransfer.setDragImage(offscreen,boundsForDragTarget.width/2,boundsForDragTarget.height/2),window.setTimeout((()=>{document.body.removeChild(offscreen)}),0)}}else event.preventDefault()}),[isDraggable,getMouseArgsForPosition,onDragStart,getBoundsForItem,theme,getCellContent,drawCustomCell,imageLoader]),null!==(_eventTargetRef$curre=null==eventTargetRef?void 0:eventTargetRef.current)&&void 0!==_eventTargetRef$curre?_eventTargetRef$curre:null,!1,!1);const focusRef=react.useRef(null),focusElement=react.useCallback((el=>{if(null!==ref.current&&ref.current.contains(document.activeElement)){var _canvasRef$current;if(null===el)null==canvasRef||null===(_canvasRef$current=canvasRef.current)||void 0===_canvasRef$current||_canvasRef$current.focus({preventScroll:!0});else el.focus({preventScroll:!0});focusRef.current=el}}),[canvasRef]);react.useImperativeHandle(forwardedRef,(()=>({focus:()=>{const el=focusRef.current;var _canvasRef$current2;null!==el&&document.contains(el)?el.focus({preventScroll:!0}):null==canvasRef||null===(_canvasRef$current2=canvasRef.current)||void 0===_canvasRef$current2||_canvasRef$current2.focus({preventScroll:!0})},getBounds:(col,row)=>{if(void 0!==canvasRef&&null!==canvasRef.current)return getBoundsForItem(canvasRef.current,col,null!=row?row:-1)},damage:damage})),[canvasRef,damage,getBoundsForItem]);const accessibilityTree=function useDebouncedMemo(factory,deps,time){const[state,setState]=react.useState(factory),debouncedSetState=react.useRef(debounce_default()(setState,time));return react.useEffect((()=>{debouncedSetState.current((()=>factory()))}),deps),state}((()=>{const effectiveCols=getEffectiveColumns(mappedColumns,cellXOffset,width,dragAndDropState,translateX);return react.createElement("div",{role:"grid","aria-rowcount":rows,"aria-colcount":mappedColumns.length},react.createElement("div",{role:"rowgroup"},react.createElement("div",{role:"row","aria-rowindex":1,"row-index":1},effectiveCols.map((c=>react.createElement("div",{role:"columnheader","aria-colindex":c.sourceIndex+1,key:c.sourceIndex},c.title))))),react.createElement("div",{role:"rowgroup"},range_default()(cellYOffset,Math.min(rows,cellYOffset+50)).map((row=>react.createElement("div",{role:"row",key:row,"aria-rowindex":row+2,"row-index":row+2},effectiveCols.map((c=>{var _selectedCell$cell;const col=c.sourceIndex,key=`${col},${row}`,[fCol,fRow]=null!==(_selectedCell$cell=null==selectedCell?void 0:selectedCell.cell)&&void 0!==_selectedCell$cell?_selectedCell$cell:[],focused=fCol===col&&fRow===row,id=`glide-cell-${col}-${row}`;return react.createElement("div",{key:key,role:"gridcell","aria-colindex":col+1,id:id,"data-testid":id,onClick:()=>{const canvas=null==canvasRef?void 0:canvasRef.current;if(null!=canvas)return null==onKeyDown?void 0:onKeyDown({bounds:getBoundsForItem(canvas,col,row),cancel:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1})},onFocusCapture:e=>{if(e.target!==focusRef.current)return null==onCellFocused?void 0:onCellFocused([col,row])},ref:focused?focusElement:void 0,tabIndex:-1},(cell=getCellContent([col,row])).kind===GridCellKind.Custom?cell.copyData:CellRenderers[cell.kind].getAccessibilityString(cell));var cell})))))))}),[cellXOffset,cellYOffset,mappedColumns,dragAndDropState,focusElement,getCellContent,null==selectedCell?void 0:selectedCell.cell,translateX,width],200),stickyShadow=react.useMemo((()=>{if(!mappedColumns[0].sticky)return null;const stickyX=getStickyWidth(mappedColumns,dragAndDropState),props={position:"absolute",top:0,left:stickyX,width:style.width-stickyX,height:style.height,opacity:cellXOffset>freezeColumns||0!==translateX?1:0,pointerEvents:"none",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)",transition:"opacity 150ms"};return react.createElement("div",{style:props})}),[cellXOffset,dragAndDropState,freezeColumns,mappedColumns,style.height,style.width,translateX]),overlayStyle=react.useMemo((()=>({position:"absolute",top:0,left:0,width:style.width})),[style.width]);return react.createElement(react.Fragment,null,react.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:0,onKeyDown:onKeyDownImpl,onKeyUp:onKeyUpImpl,className:className,ref:refImpl,style:style},accessibilityTree),react.createElement("canvas",{ref:overlayRef,style:overlayStyle}),stickyShadow)})));const DataGridDnd=p=>{const[resizeColStartX,setResizeColStartX]=react.useState(),[resizeCol,setResizeCol]=react.useState(),[dragCol,setDragCol]=react.useState(),[dropCol,setDropCol]=react.useState(),[dragColActive,setDragColActive]=react.useState(!1),[dragStartX,setDragStartX]=react.useState(),[dragRow,setDragRow]=react.useState(),[dropRow,setDropRow]=react.useState(),[dragRowActive,setDragRowActive]=react.useState(!1),[dragStartY,setDragStartY]=react.useState(),{onColumnMoved:onColumnMoved,onColumnResized:onColumnResized,gridRef:gridRef,maxColumnWidth:maxColumnWidth,onHeaderMenuClick:onHeaderMenuClick,onRowMoved:onRowMoved,lockColumns:lockColumns,getCellContent:getCellContent}=p,{onMouseDown:onMouseDown,onMouseUp:onMouseUp,onItemHovered:onItemHovered,isDraggable:isDraggable=!1,columns:columns,selectedColumns:selectedColumns}=p,onItemHoveredImpl=react.useCallback((args=>{const[col,row]=args.location;void 0!==dragCol&&dropCol!==col&&col>=lockColumns?(setDragColActive(!0),setDropCol(col)):void 0!==dragRow&&void 0!==row?(setDragRowActive(!0),setDropRow(Math.max(0,row))):null==onItemHovered||onItemHovered(args)}),[dragCol,dragRow,dropCol,onItemHovered,lockColumns]),canDragCol=void 0!==onColumnMoved,onMouseDownImpl=react.useCallback((args=>{let shouldFireEvent=!0;const[col,row]=args.location;if(!isDraggable)if("out-of-bounds"===args.kind&&args.isEdge){var _gridRef$current;const bounds=null==gridRef||null===(_gridRef$current=gridRef.current)||void 0===_gridRef$current?void 0:_gridRef$current.getBounds(columns.length-1,-1);void 0!==bounds&&(setResizeColStartX(bounds.x),setResizeCol(columns.length-1))}else"header"===args.kind&&col>=lockColumns?args.isEdge?(shouldFireEvent=!1,setResizeColStartX(args.bounds.x),setResizeCol(col)):"header"===args.kind&&canDragCol&&(setDragStartX(args.bounds.x),setDragCol(col)):"cell"===args.kind&&lockColumns>0&&0===col&&void 0!==row&&void 0!==onRowMoved&&(setDragStartY(args.bounds.y),setDragRow(row));shouldFireEvent&&(null==onMouseDown||onMouseDown(args))}),[isDraggable,onMouseDown,lockColumns,onRowMoved,gridRef,columns.length,canDragCol]),onHeaderMenuClickMangled=react.useCallback(((col,screenPosition)=>{dragColActive||dragRowActive||null==onHeaderMenuClick||onHeaderMenuClick(col,screenPosition)}),[dragColActive,dragRowActive,onHeaderMenuClick]),lastResizeWidthRef=react.useRef(-1),onMouseUpImpl=react.useCallback(((args,isOutside)=>{if(void 0!==resizeCol&&!0===(null==selectedColumns?void 0:selectedColumns.hasIndex(resizeCol)))for(const c of selectedColumns)c!==resizeCol&&(null==onColumnResized||onColumnResized(columns[c],lastResizeWidthRef.current));lastResizeWidthRef.current=-1,setDragRow(void 0),setDropRow(void 0),setDragStartY(void 0),setDragRowActive(!1),setDragCol(void 0),setDropCol(void 0),setDragStartX(void 0),setDragColActive(!1),setResizeCol(void 0),setResizeColStartX(void 0),void 0!==dragCol&&void 0!==dropCol&&(null==onColumnMoved||onColumnMoved(dragCol,dropCol)),void 0!==dragRow&&void 0!==dropRow&&(null==onRowMoved||onRowMoved(dragRow,dropRow)),null==onMouseUp||onMouseUp(args,isOutside)}),[columns,dragCol,dragRow,dropCol,dropRow,onColumnMoved,onColumnResized,onMouseUp,onRowMoved,resizeCol,selectedColumns]),dragOffset=react.useMemo((()=>{if(void 0!==dragCol&&void 0!==dropCol&&dragCol!==dropCol)return{src:dragCol,dest:dropCol}}),[dragCol,dropCol]),maxColumnWidthValue=void 0===maxColumnWidth?500:maxColumnWidth<50?50:maxColumnWidth,onMouseMove=react.useCallback((event=>{if(void 0!==dragCol&&void 0!==dragStartX){Math.abs(event.clientX-dragStartX)>20&&setDragColActive(!0)}else if(void 0!==dragRow&&void 0!==dragStartY){Math.abs(event.clientY-dragStartY)>20&&setDragRowActive(!0)}else if(void 0!==resizeCol&&void 0!==resizeColStartX){const column=columns[resizeCol],newWidth=clamp_default()(event.clientX-resizeColStartX,50,maxColumnWidthValue);if(null==onColumnResized||onColumnResized(column,newWidth),lastResizeWidthRef.current=newWidth,void 0!==resizeCol&&(null==selectedColumns?void 0:selectedColumns.first())===resizeCol)for(const c of selectedColumns)c!==resizeCol&&(null==onColumnResized||onColumnResized(columns[c],lastResizeWidthRef.current))}}),[dragCol,dragStartX,dragRow,dragStartY,resizeCol,resizeColStartX,columns,maxColumnWidthValue,onColumnResized,selectedColumns]),getMangledCellContent=react.useCallback((cell=>{if(void 0===dragRow||void 0===dropRow)return getCellContent(cell);let[col,row]=cell;return row===dropRow?row=dragRow:(row>dropRow&&(row-=1),row>=dragRow&&(row+=1)),getCellContent([col,row])}),[dragRow,dropRow,getCellContent]);return react.createElement(data_grid,{cellXOffset:p.cellXOffset,cellYOffset:p.cellYOffset,columns:p.columns,enableGroups:p.enableGroups,freezeColumns:p.freezeColumns,onMouseMove:p.onMouseMove,groupHeaderHeight:p.groupHeaderHeight,headerHeight:p.headerHeight,height:p.height,lastRowSticky:p.lastRowSticky,rowHeight:p.rowHeight,rows:p.rows,verticalBorder:p.verticalBorder,width:p.width,canvasRef:p.canvasRef,className:p.className,disabledRows:p.disabledRows,drawCustomCell:p.drawCustomCell,drawHeader:p.drawHeader,eventTargetRef:p.eventTargetRef,experimental:p.experimental,getGroupDetails:p.getGroupDetails,headerIcons:p.headerIcons,isDraggable:p.isDraggable,onCellFocused:p.onCellFocused,onDragStart:p.onDragStart,onKeyDown:p.onKeyDown,onKeyUp:p.onKeyUp,prelightCells:p.prelightCells,selectedCell:p.selectedCell,selectedColumns:p.selectedColumns,selectedRows:p.selectedRows,translateX:p.translateX,translateY:p.translateY,getCellContent:getMangledCellContent,isResizing:void 0!==resizeCol,onHeaderMenuClick:onHeaderMenuClickMangled,isDragging:dragColActive,onItemHovered:onItemHoveredImpl,onMouseDown:onMouseDownImpl,allowResize:void 0!==onColumnResized,onMouseUp:onMouseUpImpl,dragAndDropState:dragOffset,onMouseMoveRaw:onMouseMove,ref:gridRef})};DataGridDnd.__docgenInfo={description:"",methods:[],displayName:"DataGridDnd"};var data_grid_dnd=DataGridDnd;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-grid-dnd/data-grid-dnd.js"]={name:"DataGridDnd",docgenInfo:DataGridDnd.__docgenInfo,path:"packages/core/dist/js/data-grid-dnd/data-grid-dnd.js"});var dist_index_esm=__webpack_require__(72);const ScrollRegionStyle=styled.div`
    .dvn-scroller {
        overflow: ${browserIsSafari?"scroll":"auto"};
        transform: translate3d(0, 0, 0);
    }

    .dvn-scroll-inner {
        display: flex;
        pointer-events: none;

        > * {
            flex-shrink: 0;
        }

        .dvn-spacer {
            flex-grow: 1;
        }

        .dvn-stack {
            display: flex;
            flex-direction: column;
        }
    }

    .dvn-underlay > * {
        position: absolute;
        left: 0;
        top: 0;
    }

    canvas {
        outline: none;

        * {
            height: 0;
        }
    }
`,InfiniteScroller=p=>{const{children:children,clientHeight:clientHeight,scrollHeight:scrollHeight,scrollWidth:scrollWidth,update:update,draggable:draggable,className:className,paddingBottom:paddingBottom=0,paddingRight:paddingRight=0,rightElement:rightElement,rightElementSticky:rightElementSticky=!1,scrollRef:scrollRef,scrollToEnd:scrollToEnd,minimap:minimap,style:style}=p,padders=[],offsetY=react.useRef(0),lastScrollY=react.useRef(0),scroller=react.useRef(null),dpr=window.devicePixelRatio;react.useEffect((()=>{const el=scroller.current;null!==el&&!0===scrollToEnd&&(el.scrollLeft=el.scrollWidth-el.clientWidth)}),[scrollToEnd]);const onScroll=react.useCallback((()=>{const el=scroller.current;if(null===el)return;const newY=el.scrollTop,delta=lastScrollY.current-newY,scrollableHeight=el.scrollHeight-el.clientHeight,maxFakeY=Math.max(0,scrollHeight-el.clientHeight);if(lastScrollY.current=newY,scrollableHeight>0&&(Math.abs(delta)>2e3||0===newY||newY===scrollableHeight)&&scrollHeight>el.scrollHeight+5){const prog=newY/scrollableHeight,recomputed=(scrollHeight-el.clientHeight)*prog;offsetY.current=recomputed-newY}update({x:el.scrollLeft,y:Math.min(maxFakeY,newY+offsetY.current),width:el.clientWidth-paddingRight,height:el.clientHeight-paddingBottom})}),[paddingBottom,paddingRight,scrollHeight,update]),lastProps=react.useRef(),nomEvent=react.useCallback((e=>{e.stopPropagation()}),[]),setRefs=react.useCallback((instance=>{scroller.current=instance,void 0!==scrollRef&&(scrollRef.current=instance)}),[scrollRef]);let key=0,h=0;for(;h<scrollHeight;){const toAdd=Math.min(5e6,scrollHeight-h);padders.push(react.createElement("div",{key:key++,style:{width:scrollWidth,height:toAdd}})),h+=toAdd}return react.createElement("div",{style:style},react.createElement(dist_index_esm.a,null,(props=>{var _lastProps$current,_lastProps$current2;return 0===props.width||0===props.height?null:((null===(_lastProps$current=lastProps.current)||void 0===_lastProps$current?void 0:_lastProps$current.height)===props.height&&(null===(_lastProps$current2=lastProps.current)||void 0===_lastProps$current2?void 0:_lastProps$current2.width)===props.width||(window.setTimeout(onScroll,0),lastProps.current=props),react.createElement(ScrollRegionStyle,null,minimap,react.createElement("div",{className:"dvn-underlay"},children),react.createElement("div",{ref:setRefs,style:props,draggable:draggable,onDragStart:e=>{draggable||(e.stopPropagation(),e.preventDefault())},className:"dvn-scroller "+(null!=className?className:""),onScroll:onScroll},react.createElement("div",{className:"dvn-scroll-inner"},react.createElement("div",{className:"dvn-stack"},padders),void 0!==rightElement&&react.createElement(react.Fragment,null,react.createElement("div",{className:"dvn-spacer"}),react.createElement("div",{onMouseDown:nomEvent,onMouseUp:nomEvent,onMouseMove:nomEvent,style:{height:props.height,maxHeight:clientHeight-Math.ceil(dpr%1),position:"sticky",top:0,marginBottom:-40,marginRight:paddingRight,right:rightElementSticky?null!=paddingRight?paddingRight:0:void 0,pointerEvents:"auto"}},rightElement))))))})))};function scrolling_data_grid_extends(){return scrolling_data_grid_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},scrolling_data_grid_extends.apply(this,arguments)}InfiniteScroller.__docgenInfo={description:"",methods:[],displayName:"InfiniteScroller"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/scrolling-data-grid/infinite-scroller.js"]={name:"InfiniteScroller",docgenInfo:InfiniteScroller.__docgenInfo,path:"packages/core/dist/js/scrolling-data-grid/infinite-scroller.js"});const MinimapStyle=dist_styled_components_browser_esm.c.div.withConfig({displayName:"scrolling-data-grid__MinimapStyle",componentId:"sc-r4h7c0-0"})(["position:absolute;right:44px;bottom:44px;background-color:",";background:linear-gradient(",",",");border-radius:4px;z-index:1;box-shadow:0 0 0 1px ",",0 2px 5px rgba(0,0,0,0.08);overflow:hidden;.header{position:absolute;left:0;top:0;width:100%;height:4px;background-color:",";box-shadow:0 0 0 1px ",";}.locationMarker{position:absolute;border:1px solid ",";background-color:",";}"],(p=>p.theme.bgCell),(p=>p.theme.bgCell),(p=>p.theme.bgCellMedium),(p=>p.theme.borderColor),(p=>p.theme.bgHeader),(p=>p.theme.borderColor),(p=>p.theme.accentColor),(p=>p.theme.accentLight)),GridScroller=p=>{var _scrollRef$current,_scroller$scrollLeft,_scroller$scrollTop;const{columns:columns,rows:rows,rowHeight:rowHeight,headerHeight:headerHeight,groupHeaderHeight:groupHeaderHeight,enableGroups:enableGroups,freezeColumns:freezeColumns,experimental:experimental}=p,{paddingRight:paddingRight,paddingBottom:paddingBottom}=null!=experimental?experimental:{},{className:className,onVisibleRegionChanged:onVisibleRegionChanged,scrollToEnd:scrollToEnd,scrollRef:scrollRef,rightElement:rightElement,rightElementSticky:rightElementSticky,overscrollX:overscrollX,showMinimap:showMinimap=!1,...dataGridProps}=p,{smoothScrollX:smoothScrollX=!1,smoothScrollY:smoothScrollY=!1}=p,[clientWidth,setClientWidth]=react.useState(10),[clientHeight,setClientHeight]=react.useState(10),last=react.useRef(),lastX=react.useRef(),lastY=react.useRef(),width=react.useMemo((()=>{let r=Math.max(0,null!=overscrollX?overscrollX:0);for(const c of columns)r+=c.width;return r}),[columns,overscrollX]);let height=enableGroups?headerHeight+groupHeaderHeight:headerHeight;if("number"==typeof rowHeight)height+=rows*rowHeight;else for(let r=0;r<rows;r++)height+=rowHeight(r);const lastArgs=react.useRef(),processArgs=react.useCallback((()=>{const args=lastArgs.current;if(void 0===args)return;setClientHeight(args.height),setClientWidth(args.width);let x=0,tx=0,cellRight=0,cellX=0,stickyColWidth=0;for(let i=0;i<freezeColumns;i++)stickyColWidth+=columns[i].width;for(const c of columns){const cx=x-stickyColWidth;if(args.x>=cx+c.width)x+=c.width,cellX++,cellRight++;else if(args.x>cx)x+=c.width,smoothScrollX?tx+=cx-args.x:cellX++,cellRight++;else{if(!(args.x+args.width>cx))break;x+=c.width,cellRight++}}let ty=0,cellY=0,cellBottom=0;if("number"==typeof rowHeight)smoothScrollY?(cellY=Math.floor(args.y/rowHeight),ty=cellY*rowHeight-args.y):cellY=Math.ceil(args.y/rowHeight),cellBottom=Math.ceil(args.height/rowHeight)+cellY,ty<0&&cellBottom++;else{let y=0;for(let row=0;row<rows;row++){const rh=rowHeight(row),cy=y+(smoothScrollY?0:rh/2);if(args.y>=y+rh)y+=rh,cellY++,cellBottom++;else if(args.y>cy)y+=rh,smoothScrollY?ty+=cy-args.y:cellY++,cellBottom++;else{if(!(args.y+args.height>rh/2+y))break;y+=rh,cellBottom++}}}const rect={x:cellX,y:cellY,width:cellRight-cellX,height:cellBottom-cellY},oldRect=last.current;void 0!==oldRect&&oldRect.y===rect.y&&oldRect.x===rect.x&&oldRect.height===rect.height&&oldRect.width===rect.width&&lastX.current===tx&&lastY.current===ty||(null==onVisibleRegionChanged||onVisibleRegionChanged({x:cellX,y:cellY,width:cellRight-cellX,height:cellBottom-cellY},tx,ty),last.current=rect,lastX.current=tx,lastY.current=ty)}),[columns,rowHeight,rows,onVisibleRegionChanged,freezeColumns,smoothScrollX,smoothScrollY]),onScrollUpdate=react.useCallback((args=>{lastArgs.current=args,processArgs()}),[processArgs]);react.useEffect((()=>{processArgs()}),[processArgs]);const scroller=null!==(_scrollRef$current=null==scrollRef?void 0:scrollRef.current)&&void 0!==_scrollRef$current?_scrollRef$current:void 0,aspect=clamp_default()(width/height,2/3,1.5),w=aspect>1?200:Math.ceil(200*aspect),h=aspect>1?Math.ceil(200/aspect):200,hRatio=w/width,vRatio=h/height,vWidth=Math.min(clientWidth*Math.max(hRatio,.01),w),vHeight=Math.min(clientHeight*Math.max(vRatio,.01),h),left=(null!==(_scroller$scrollLeft=null==scroller?void 0:scroller.scrollLeft)&&void 0!==_scroller$scrollLeft?_scroller$scrollLeft:0)/(width-clientWidth)*(w-vWidth),top=(null!==(_scroller$scrollTop=null==scroller?void 0:scroller.scrollTop)&&void 0!==_scroller$scrollTop?_scroller$scrollTop:0)/(height-clientHeight)*(h-vHeight),minimap=react.useMemo((()=>{if(!showMinimap||0===vWidth||0===vHeight)return;const handleMouse=e=>{if(void 0===scroller)return;const bounds=e.currentTarget.getBoundingClientRect(),x=e.clientX-bounds.x-vWidth/2,y=e.clientY-bounds.y-vHeight/2,newScrollLeft=(width-scroller.clientWidth)*(x/(w-vWidth)),newScrollTop=(height-scroller.clientHeight)*(y/(h-vHeight));scroller.scrollTo({left:newScrollLeft,top:newScrollTop,behavior:"mousemove"===e.type?"auto":"smooth"})};return react.createElement(MinimapStyle,{style:{width:w,height:h},"data-testid":"minimap-container",onMouseMove:e=>{1===e.buttons&&handleMouse(e)},onClick:handleMouse},react.createElement("div",{className:"header"}),react.createElement("div",{className:"locationMarker",onDragStart:e=>e.preventDefault(),style:{left:left,top:top,width:vWidth,height:vHeight,borderRadius:Math.min(vWidth,.2*vHeight,9)}}))}),[h,height,left,scroller,showMinimap,top,vHeight,vWidth,w,width]);return react.createElement(InfiniteScroller,{scrollRef:scrollRef,minimap:minimap,className:className,draggable:!0===dataGridProps.isDraggable,scrollWidth:width+(null!=paddingRight?paddingRight:0),scrollHeight:height+(null!=paddingBottom?paddingBottom:0),clientHeight:clientHeight,rightElement:rightElement,paddingBottom:paddingBottom,paddingRight:paddingRight,rightElementSticky:rightElementSticky,update:onScrollUpdate,scrollToEnd:scrollToEnd},react.createElement(data_grid_dnd,scrolling_data_grid_extends({eventTargetRef:scrollRef,width:clientWidth,height:clientHeight},dataGridProps)))};GridScroller.__docgenInfo={description:"",methods:[],displayName:"GridScroller"};var scrolling_data_grid=GridScroller;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/scrolling-data-grid/scrolling-data-grid.js"]={name:"GridScroller",docgenInfo:GridScroller.__docgenInfo,path:"packages/core/dist/js/scrolling-data-grid/scrolling-data-grid.js"});const SearchWrapper=styled.div`
    position: absolute;
    top: 4px;
    right: 20px;

    background-color: ${p=>p.theme.bgCell};
    color: ${p=>p.theme.textDark};

    padding: 8px;
    border: 1px solid ${p=>p.theme.borderColor};

    font-size: 13px;

    transform: translateX(${p=>p.showSearch?0:400}px);
    transition: transform 0.15s;

    .search-bar-inner {
        display: flex;
    }

    .search-status {
        margin-top: 4px;
        font-size: 11px;
    }

    .search-progress {
        position: absolute;
        height: 4px;
        left: 0;
        bottom: 0;

        background-color: ${p=>p.theme.textLight};
    }

    input {
        width: 220px;
        color: ${p=>p.theme.textDark};
        border: none;
        border-width: 0;
        outline: none;
    }

    button {
        width: 24px;
        height: 24px;
        padding: 0;

        border: none;
        outline: none;
        background: none;

        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        color: ${p=>p.theme.textMedium};

        :hover {
            color: ${p=>p.theme.textDark};
        }

        .button-icon {
            width: 16px;
            height: 16px;
        }

        :disabled {
            ${disabledProps}
        }
    }
`,upArrow=react.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},react.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),downArrow=react.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},react.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),closeX=react.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},react.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})),DataGridSearch=p=>{const{getCellsForSelection:getCellsForSelection,onSearchResultsChanged:onSearchResultsChanged,searchColOffset:searchColOffset,showSearch:showSearch=!1,onSearchClose:onSearchClose,canvasRef:canvasRef,cellYOffset:cellYOffset,rows:rows,columns:columns,getCellContent:getCellContent}=p,[searchString,setSearchString]=react.useState(""),[searchStatus,setSearchStatus]=react.useState(),searchStatusRef=react.useRef(searchStatus);searchStatusRef.current=searchStatus;const inputRef=react.useRef(null),searchHandle=react.useRef(),[searchResults,setSearchResults]=react.useState([]),cancelSearch=react.useCallback((()=>{void 0!==searchHandle.current&&(window.cancelAnimationFrame(searchHandle.current),searchHandle.current=void 0)}),[]),getCellsForSelectionMangled=react.useCallback((selection=>{if(void 0!==getCellsForSelection)return getCellsForSelection(selection.range);if(void 0===selection.range)return[[getCellContent(selection.cell)]];const range=selection.range,result=[];for(let row=range.y;row<range.y+range.height;row++){const inner=[];for(let col=range.x;col<range.x+range.width;col++)inner.push(getCellContent([col+searchColOffset,row]));result.push(inner)}return result}),[getCellContent,getCellsForSelection,searchColOffset]),cellYOffsetRef=react.useRef(cellYOffset);cellYOffsetRef.current=cellYOffset;const beginSearch=react.useCallback((str=>{const regex=new RegExp(str.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"i");let startY=cellYOffsetRef.current,searchStride=Math.min(10,rows),rowsSearched=0;setSearchStatus(void 0),setSearchResults([]);const runningResult=[],tick=()=>{var _searchStatusRef$curr,_searchStatusRef$curr2;const tStart=performance.now(),rowsLeft=rows-rowsSearched,data=getCellsForSelectionMangled({cell:[0,0],range:{x:0,y:startY,width:columns.length-searchColOffset,height:Math.min(searchStride,rowsLeft,rows-startY)}});let added=!1;data.forEach(((d,row)=>d.forEach(((cell,col)=>{let testString;switch(cell.kind){case GridCellKind.Text:case GridCellKind.Number:testString=cell.displayData;break;case GridCellKind.Uri:case GridCellKind.Markdown:testString=cell.data;break;case GridCellKind.Boolean:testString=cell.data.toString();break;case GridCellKind.Image:case GridCellKind.Bubble:testString=cell.data.join("")}void 0!==testString&&regex.test(testString)&&(runningResult.push([col+searchColOffset,row+startY]),added=!0)}))));const tEnd=performance.now();added&&setSearchResults([...runningResult]),rowsSearched+=data.length,assert(rowsSearched<=rows);const selectedIndex=null!==(_searchStatusRef$curr=null===(_searchStatusRef$curr2=searchStatusRef.current)||void 0===_searchStatusRef$curr2?void 0:_searchStatusRef$curr2.selectedIndex)&&void 0!==_searchStatusRef$curr?_searchStatusRef$curr:-1;setSearchStatus({results:runningResult.length,rowsSearched:rowsSearched,selectedIndex:selectedIndex}),null==onSearchResultsChanged||onSearchResultsChanged(runningResult,selectedIndex),startY+searchStride>=rows?startY=0:startY+=searchStride;const tElapsed=tEnd-tStart,scalar=10/Math.max(tElapsed,1);searchStride=Math.ceil(searchStride*scalar),rowsSearched<rows&&runningResult.length<1e3&&(searchHandle.current=window.requestAnimationFrame(tick))};cancelSearch(),searchHandle.current=window.requestAnimationFrame(tick)}),[cancelSearch,columns.length,getCellsForSelectionMangled,onSearchResultsChanged,rows,searchColOffset]),onClose=react.useCallback((()=>{var _canvasRef$current;null==onSearchClose||onSearchClose(),setSearchStatus(void 0),setSearchResults([]),null==onSearchResultsChanged||onSearchResultsChanged([],-1),cancelSearch(),null==canvasRef||null===(_canvasRef$current=canvasRef.current)||void 0===_canvasRef$current||_canvasRef$current.focus()}),[cancelSearch,canvasRef,onSearchClose,onSearchResultsChanged]),onSearchChange=react.useCallback((event=>{setSearchString(event.target.value),""===event.target.value?(setSearchStatus(void 0),setSearchResults([]),cancelSearch()):beginSearch(event.target.value)}),[beginSearch,cancelSearch]);react.useEffect((()=>{showSearch&&null!==inputRef.current&&(setSearchString(""),inputRef.current.focus({preventScroll:!0}))}),[showSearch]);const onNext=react.useCallback((ev=>{var _ev$stopPropagation;if(null==ev||null===(_ev$stopPropagation=ev.stopPropagation)||void 0===_ev$stopPropagation||_ev$stopPropagation.call(ev),void 0===searchStatus)return;const newIndex=(searchStatus.selectedIndex+1)%searchStatus.results;setSearchStatus({...searchStatus,selectedIndex:newIndex}),null==onSearchResultsChanged||onSearchResultsChanged(searchResults,newIndex)}),[searchStatus,onSearchResultsChanged,searchResults]),onPrev=react.useCallback((ev=>{var _ev$stopPropagation2;if(null==ev||null===(_ev$stopPropagation2=ev.stopPropagation)||void 0===_ev$stopPropagation2||_ev$stopPropagation2.call(ev),void 0===searchStatus)return;let newIndex=(searchStatus.selectedIndex-1)%searchStatus.results;newIndex<0&&(newIndex+=searchStatus.results),setSearchStatus({...searchStatus,selectedIndex:newIndex}),null==onSearchResultsChanged||onSearchResultsChanged(searchResults,newIndex)}),[onSearchResultsChanged,searchResults,searchStatus]),onSearchKeyDown=react.useCallback((event=>{(event.ctrlKey||event.metaKey)&&"f"===event.key||"Escape"===event.key?(onClose(),event.stopPropagation(),event.preventDefault()):"Enter"===event.key&&(event.shiftKey?onPrev():onNext())}),[onClose,onNext,onPrev]);react.useEffect((()=>()=>{cancelSearch()}),[cancelSearch]);const searchbox=react.useMemo((()=>{var _searchStatus$rowsSea,_searchStatus$results,_searchStatus$results2;let resultString;void 0!==searchStatus&&(resultString=searchStatus.results>=1e3?"over 1000":`${searchStatus.results} result${1!==searchStatus.results?"s":""}`,searchStatus.selectedIndex>=0&&(resultString=`${searchStatus.selectedIndex+1} of ${resultString}`));const cancelEvent=ev=>{ev.stopPropagation()},progressStyle={width:`${Math.floor((null!==(_searchStatus$rowsSea=null==searchStatus?void 0:searchStatus.rowsSearched)&&void 0!==_searchStatus$rowsSea?_searchStatus$rowsSea:0)/rows*100)}%`};return react.createElement(SearchWrapper,{showSearch:showSearch,onMouseDown:cancelEvent,onMouseMove:cancelEvent,onMouseUp:cancelEvent,onClick:cancelEvent},react.createElement("div",{className:"search-bar-inner"},react.createElement("input",{"data-testid":"search-input",ref:inputRef,onChange:onSearchChange,value:searchString,tabIndex:showSearch?void 0:-1,onKeyDownCapture:onSearchKeyDown}),react.createElement("button",{tabIndex:showSearch?void 0:-1,onClick:onPrev,disabled:0===(null!==(_searchStatus$results=null==searchStatus?void 0:searchStatus.results)&&void 0!==_searchStatus$results?_searchStatus$results:0)},upArrow),react.createElement("button",{tabIndex:showSearch?void 0:-1,onClick:onNext,disabled:0===(null!==(_searchStatus$results2=null==searchStatus?void 0:searchStatus.results)&&void 0!==_searchStatus$results2?_searchStatus$results2:0)},downArrow),void 0!==onSearchClose&&react.createElement("button",{"data-testid":"search-close-button",tabIndex:showSearch?void 0:-1,onClick:onClose},closeX)),void 0!==searchStatus&&react.createElement(react.Fragment,null,react.createElement("div",{className:"search-status"},react.createElement("div",{"data-testid":"search-result-area"},resultString)),react.createElement("div",{className:"search-progress",style:progressStyle})))}),[onClose,onNext,onPrev,onSearchChange,onSearchClose,onSearchKeyDown,rows,searchStatus,searchString,showSearch]);return react.createElement(react.Fragment,null,react.createElement(scrolling_data_grid,{cellXOffset:p.cellXOffset,cellYOffset:p.cellYOffset,columns:p.columns,enableGroups:p.enableGroups,freezeColumns:p.freezeColumns,getCellContent:p.getCellContent,groupHeaderHeight:p.groupHeaderHeight,headerHeight:p.headerHeight,lastRowSticky:p.lastRowSticky,lockColumns:p.lockColumns,rowHeight:p.rowHeight,onMouseMove:p.onMouseMove,rows:p.rows,verticalBorder:p.verticalBorder,canvasRef:p.canvasRef,className:p.className,disabledRows:p.disabledRows,drawCustomCell:p.drawCustomCell,drawHeader:p.drawHeader,experimental:p.experimental,getGroupDetails:p.getGroupDetails,gridRef:p.gridRef,headerIcons:p.headerIcons,isDraggable:p.isDraggable,maxColumnWidth:p.maxColumnWidth,onCellFocused:p.onCellFocused,onColumnMoved:p.onColumnMoved,onColumnResized:p.onColumnResized,onDragStart:p.onDragStart,onHeaderMenuClick:p.onHeaderMenuClick,onItemHovered:p.onItemHovered,onKeyUp:p.onKeyUp,onMouseDown:p.onMouseDown,onMouseUp:p.onMouseUp,onRowMoved:p.onRowMoved,onVisibleRegionChanged:p.onVisibleRegionChanged,overscrollX:p.overscrollX,rightElement:p.rightElement,rightElementSticky:p.rightElementSticky,scrollRef:p.scrollRef,scrollToEnd:p.scrollToEnd,selectedCell:p.selectedCell,selectedColumns:p.selectedColumns,selectedRows:p.selectedRows,showMinimap:p.showMinimap,smoothScrollX:p.smoothScrollX,smoothScrollY:p.smoothScrollY,translateX:p.translateX,translateY:p.translateY,onKeyDown:p.onKeyDown,prelightCells:searchResults}),searchbox)};DataGridSearch.__docgenInfo={description:"",methods:[],displayName:"DataGridSearch"};var data_grid_search=DataGridSearch;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-grid-search/data-grid-search.js"]={name:"DataGridSearch",docgenInfo:DataGridSearch.__docgenInfo,path:"packages/core/dist/js/data-grid-search/data-grid-search.js"});const GroupRename=p=>{const{bounds:bounds,group:group,onClose:onClose,canvasBounds:canvasBounds,onFinish:onFinish}=p,[value,setValue]=react_default.a.useState(group);return react_default.a.createElement(_StyledClickOutsideContainer,{style:{position:"absolute",left:bounds.x-canvasBounds.left+1,top:bounds.y-canvasBounds.top,width:bounds.width-2,height:bounds.height},onClickOutside:onClose},react_default.a.createElement(_StyledInput,{"data-testid":"group-rename-input",value:value,onBlur:onClose,onFocus:e=>e.target.setSelectionRange(0,value.length),onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"===e.key?onFinish(value):"Escape"===e.key&&onClose()},autoFocus:!0,$_css:Math.max(16,bounds.height-10)}))};var _StyledClickOutsideContainer=Object(dist_styled_components_browser_esm.c)(click_outside_container_ClickOutsideContainer).withConfig({displayName:"group-rename___StyledClickOutsideContainer",componentId:"sc-1luhmq4-0"})(["padding:0 8px;display:flex;align-items:center;background-color:",";"],(t=>t.theme.bgHeader)),_StyledInput=Object(dist_styled_components_browser_esm.c)("input").withConfig({displayName:"group-rename___StyledInput",componentId:"sc-1luhmq4-1"})(["flex-grow:1;border:none;outline:none;background-color:",";border-radius:9px;padding:0 8px;box-shadow:0 0 0 1px ",";color:",";min-height:","px;font:"," ",";"],(t=>t.theme.bgHeaderHasFocus),(t=>t.theme.borderColor),(t=>t.theme.textGroupHeader),(p=>p.$_css),(t=>t.theme.headerFontStyle),(t=>t.theme.fontFamily));function data_editor_extends(){return data_editor_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},data_editor_extends.apply(this,arguments)}GroupRename.__docgenInfo={description:"",methods:[],displayName:"GroupRename"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-editor/group-rename.js"]={name:"GroupRename",docgenInfo:GroupRename.__docgenInfo,path:"packages/core/dist/js/data-editor/group-rename.js"});const loadingCell={kind:GridCellKind.Loading,allowOverlay:!1},DataEditor=react.forwardRef(((p,forwardedRef)=>{var _gridSelection$cell,_p$experimental;const[gridSelectionInner,setGridSelectionInner]=react.useState(),[selectedColumnsInner,setSelectedColumnsInner]=react.useState(CompactSelection.empty()),[selectedRowsInner,setSelectedRowsInner]=react.useState(CompactSelection.empty()),[overlay,setOverlay]=react.useState(),canvasRef=react.useRef(null),mouseState=react.useRef(),scrollRef=react.useRef(null),scrollTimer=react.useRef(),lastSent=react.useRef(),{isDraggable:isDraggable=!1,getCellsForSelection:getCellsForSelection,rowMarkers:rowMarkers="none",rowHeight:rowHeight=34,headerHeight:headerHeight=36,rowMarkerWidth:rowMarkerWidthRaw,imageEditorOverride:imageEditorOverride,markdownDivCreateNode:markdownDivCreateNode}=p,{columns:columns,rows:rows,getCellContent:getCellContent,onCellClicked:onCellClicked,onHeaderClicked:onHeaderClicked,onGroupHeaderClicked:onGroupHeaderClicked,onGroupHeaderRenamed:onGroupHeaderRenamed,onCellEdited:onCellEdited,enableDownfill:enableDownfill=!1,onRowAppended:onRowAppended,onColumnMoved:onColumnMoved,drawCell:drawCell,drawCustomCell:drawCustomCell,onDeleteRows:onDeleteRows,onDragStart:onDragStart,onMouseMove:onMouseMove,onPaste:onPaste,groupHeaderHeight:groupHeaderHeight=headerHeight,freezeColumns:freezeColumns=0,rowSelectionMode:rowSelectionMode="auto",onHeaderMenuClick:onHeaderMenuClick,getGroupDetails:getGroupDetails,onItemHovered:onItemHovered,onVisibleRegionChanged:onVisibleRegionChanged,selectedColumns:selectedColumnsOuter,onSelectedColumnsChange:setSelectedColumnsOuter,selectedRows:selectedRowsOuter,onSelectedRowsChange:setSelectedRowsOuter,gridSelection:gridSelectionOuter,onGridSelectionChange:onGridSelectionChange,provideEditor:provideEditor,trailingRowOptions:trailingRowOptions,verticalBorder:verticalBorder,...rest}=p,rowMarkerWidth=null!=rowMarkerWidthRaw?rowMarkerWidthRaw:rows>1e4?48:rows>1e3?44:rows>100?36:32,hasRowMarkers="none"!==rowMarkers,rowMarkerOffset=hasRowMarkers?1:0,showTrailingBlankRow=void 0!==onRowAppended,lastRowSticky=!0===(null==trailingRowOptions?void 0:trailingRowOptions.sticky),gridSelectionOuterMangled=react.useMemo((()=>void 0===gridSelectionOuter?void 0:{cell:[gridSelectionOuter.cell[0]+rowMarkerOffset,gridSelectionOuter.cell[1]],range:{...gridSelectionOuter.range,x:gridSelectionOuter.range.x+rowMarkerOffset}}),[gridSelectionOuter,rowMarkerOffset]),gridSelection=null!=gridSelectionOuterMangled?gridSelectionOuterMangled:gridSelectionInner,setGridSelection=react.useCallback((newVal=>{void 0!==onGridSelectionChange?onGridSelectionChange(void 0===newVal?void 0:{cell:[newVal.cell[0]-rowMarkerOffset,newVal.cell[1]],range:{...newVal.range,x:newVal.range.x-rowMarkerOffset}}):setGridSelectionInner(newVal)}),[onGridSelectionChange,rowMarkerOffset]),selectedRows=null!=selectedRowsOuter?selectedRowsOuter:selectedRowsInner,setSelectedRows=null!=setSelectedRowsOuter?setSelectedRowsOuter:setSelectedRowsInner,mangledOuterCols=null==selectedColumnsOuter?void 0:selectedColumnsOuter.offset(rowMarkerOffset),selectedColumns=null!=mangledOuterCols?mangledOuterCols:selectedColumnsInner,setSelectedColumns=react.useCallback(((newColumns,trigger)=>{void 0!==setSelectedColumnsOuter?null==setSelectedColumnsOuter||setSelectedColumnsOuter(newColumns.offset(-rowMarkerOffset),trigger):setSelectedColumnsInner(newColumns)}),[rowMarkerOffset,setSelectedColumnsOuter]),enableGroups=react.useMemo((()=>columns.some((c=>void 0!==c.group))),[columns]),totalHeaderHeight=enableGroups?headerHeight+groupHeaderHeight:headerHeight,[visibleRegion,setVisibleRegion]=react.useState({x:0,y:0,width:1,height:1}),cellXOffset=visibleRegion.x+rowMarkerOffset,cellYOffset=visibleRegion.y,gridRef=react.useRef(null),focus=react.useCallback((immediate=>{var _gridRef$current;!0===immediate?null===(_gridRef$current=gridRef.current)||void 0===_gridRef$current||_gridRef$current.focus():window.requestAnimationFrame((()=>{var _gridRef$current2;null===(_gridRef$current2=gridRef.current)||void 0===_gridRef$current2||_gridRef$current2.focus()}))}),[]),mangledRows=showTrailingBlankRow?rows+1:rows,mangledOnCellEdited=react.useCallback(((cell,newValue)=>{null==onCellEdited||onCellEdited([cell[0]-rowMarkerOffset,cell[1]],newValue)}),[onCellEdited,rowMarkerOffset]),mangledCols=react.useMemo((()=>"none"===rowMarkers?columns:[{title:"",width:rowMarkerWidth,icon:void 0,hasMenu:!1,style:"normal"},...columns]),[columns,rowMarkerWidth,rowMarkers]),getMangedCellContent=react.useCallback((_ref=>{let[col,row]=_ref;const isTrailing=showTrailingBlankRow&&row===mangledRows-1;if(0===col&&hasRowMarkers)return isTrailing?loadingCell:{kind:InnerGridCellKind.Marker,allowOverlay:!1,checked:selectedRows.hasIndex(row),markerKind:rowMarkers,row:row};if(isTrailing){var _trailingRowOptions$h;const isFirst=col===rowMarkerOffset,display=isFirst&&null!==(_trailingRowOptions$h=null==trailingRowOptions?void 0:trailingRowOptions.hint)&&void 0!==_trailingRowOptions$h?_trailingRowOptions$h:"";return{kind:InnerGridCellKind.NewRow,hint:display,isFirst:isFirst,allowOverlay:!1}}return getCellContent([col-rowMarkerOffset,row])}),[showTrailingBlankRow,mangledRows,hasRowMarkers,selectedRows,rowMarkers,rowMarkerOffset,null==trailingRowOptions?void 0:trailingRowOptions.hint,getCellContent]),reselect=react.useCallback(((bounds,initialValue)=>{if(void 0===gridSelection)return;const[col,row]=gridSelection.cell,c=getMangedCellContent([col,row]);if(c.kind!==GridCellKind.Boolean&&c.allowOverlay){let content=c;if(void 0!==initialValue)switch(content.kind){case GridCellKind.Text:content={...content,data:initialValue};break;case GridCellKind.Number:content={...content,data:maybe((()=>Number.parseFloat(initialValue)),0)};break;case GridCellKind.Markdown:case GridCellKind.Uri:content={...content,data:initialValue}}setOverlay({target:bounds,content:content,cell:[col,row],highlight:void 0===initialValue,forceEditMode:void 0!==initialValue})}}),[getMangedCellContent,gridSelection]),focusOnRowFromTrailingBlankRow=react.useCallback(((col,row)=>{var _gridRef$current3;const bounds=null===(_gridRef$current3=gridRef.current)||void 0===_gridRef$current3?void 0:_gridRef$current3.getBounds(col,row);if(void 0===bounds||null===scrollRef.current)return;let content=getMangedCellContent([col,row]);if(content.allowOverlay){switch(content.kind){case GridCellKind.Text:content={...content,data:""};break;case GridCellKind.Number:content={...content,data:void 0};break;case GridCellKind.Markdown:case GridCellKind.Uri:content={...content,data:""}}setOverlay({target:bounds,content:content,highlight:!0,cell:[col,row],forceEditMode:!0})}}),[getMangedCellContent]),scrollTo=react.useCallback((function(col,row){let dir=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"both";if(null!==scrollRef.current){const grid=gridRef.current,canvas=canvasRef.current;if(null!==grid&&null!==canvas){const bounds=grid.getBounds(col,row),scrollBounds=canvas.getBoundingClientRect();if(void 0!==bounds){let scrollX=0,scrollY=0;const sLeft=scrollBounds.left+rowMarkerOffset*rowMarkerWidth,sRight=scrollBounds.right,sTop=scrollBounds.top+totalHeaderHeight;let trailingRowHeight=0;lastRowSticky&&(trailingRowHeight="number"==typeof rowHeight?rowHeight:rowHeight(rows));const sBottom=scrollBounds.bottom-trailingRowHeight;sLeft>bounds.x?scrollX=bounds.x-sLeft:sRight<bounds.x+bounds.width&&(scrollX=bounds.x+bounds.width-sRight),sTop>bounds.y?scrollY=bounds.y-sTop:sBottom<bounds.y+bounds.height&&(scrollY=bounds.y+bounds.height-sBottom),"vertical"===dir?scrollX=0:"horizontal"===dir&&(scrollY=0),0===scrollX&&0===scrollY||scrollRef.current.scrollTo(scrollX+scrollRef.current.scrollLeft,scrollY+scrollRef.current.scrollTop)}}}}),[totalHeaderHeight,lastRowSticky,rowHeight,rowMarkerOffset,rowMarkerWidth,rows]);react.useImperativeHandle(forwardedRef,(()=>({updateCells:function(){for(var _gridRef$current4,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return null===(_gridRef$current4=gridRef.current)||void 0===_gridRef$current4?void 0:_gridRef$current4.damage(...args)},getBounds:function(){for(var _gridRef$current5,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return null===(_gridRef$current5=gridRef.current)||void 0===_gridRef$current5?void 0:_gridRef$current5.getBounds(...args)},scrollTo:scrollTo})),[scrollTo]);const focusCallback=react.useRef(focusOnRowFromTrailingBlankRow),getCellContentRef=react.useRef(getCellContent),rowsRef=react.useRef(rows);focusCallback.current=focusOnRowFromTrailingBlankRow,getCellContentRef.current=getCellContent,rowsRef.current=rows;const appendRow=react.useCallback((async col=>{const appendResult=null==onRowAppended?void 0:onRowAppended();let r,bottom=!0;void 0!==appendResult&&(r=await appendResult,"top"===r&&(bottom=!1),"number"==typeof r&&(bottom=!1));let backoff=0;const doFocus=()=>{if(rowsRef.current<=rows)return backoff<500&&window.setTimeout(doFocus,backoff),void(backoff=50+2*backoff);const row="number"==typeof r?r:bottom?rows:0;scrollTo(col,row),setGridSelection({cell:[col,row],range:{x:col,y:row,width:1,height:1}});const cell=getCellContentRef.current([col-rowMarkerOffset,row]);cell.allowOverlay&&isReadWriteCell(cell)&&!0!==cell.readonly&&window.setTimeout((()=>{focusCallback.current(col,row)}),0)};doFocus()}),[onRowAppended,rowMarkerOffset,rows,scrollTo,setGridSelection]),lastSelectedRowRef=react.useRef(),lastSelectedColRef=react.useRef(),onMouseDown=react.useCallback((args=>{mouseState.current={previousSelection:gridSelection};const isMultiKey=browserIsOSX.value?args.metaKey:args.ctrlKey;if("cell"===args.kind){lastSelectedColRef.current=void 0;const[col,row]=args.location;if(0===col&&hasRowMarkers){if(!0===showTrailingBlankRow&&row===rows||"number"===rowMarkers)return;setGridSelection(void 0),setOverlay(void 0),focus(),setSelectedColumns(CompactSelection.empty(),"selection");const isSelected=selectedRows.hasIndex(row),lastHighlighted=lastSelectedRowRef.current;if(args.shiftKey&&void 0!==lastHighlighted&&selectedRows.hasIndex(lastHighlighted)){const newSlice=[Math.min(lastHighlighted,row),Math.max(lastHighlighted,row)+1];setSelectedRows(isMultiKey||"multi"===rowSelectionMode?selectedRows.add(newSlice):CompactSelection.fromSingleSelection(newSlice))}else isMultiKey||args.isTouch||"multi"===rowSelectionMode?isSelected?setSelectedRows(selectedRows.remove(row)):(setSelectedRows(selectedRows.add(row)),lastSelectedRowRef.current=row):isSelected&&1===selectedRows.length?setSelectedRows(CompactSelection.empty()):(setSelectedRows(CompactSelection.fromSingleSelection(row)),lastSelectedRowRef.current=row)}else if(col>=rowMarkerOffset&&showTrailingBlankRow&&row===rows)appendRow(col);else if((null==gridSelection?void 0:gridSelection.cell[0])!==col||gridSelection.cell[1]!==row){const isLastStickyRow=lastRowSticky&&row===rows,startedFromLastSticky=lastRowSticky&&void 0!==gridSelection&&gridSelection.cell[1]===rows;if(args.shiftKey&&void 0!==gridSelection&&!startedFromLastSticky){if(isLastStickyRow)return;const[sCol,sRow]=gridSelection.cell,left=Math.min(col,sCol),right=Math.max(col,sCol),top=Math.min(row,sRow),bottom=Math.max(row,sRow);setGridSelection({...gridSelection,range:{x:left,y:top,width:right-left+1,height:bottom-top+1}}),lastSelectedRowRef.current=void 0,focus()}else setGridSelection({cell:[col,row],range:{x:col,y:row,width:1,height:1}}),setSelectedColumns(CompactSelection.empty(),"selection"),setSelectedRows(CompactSelection.empty()),lastSelectedRowRef.current=void 0,setOverlay(void 0),focus()}}else if("header"===args.kind){const[col]=args.location;if(setGridSelection(void 0),setOverlay(void 0),hasRowMarkers&&0===col)lastSelectedRowRef.current=void 0,lastSelectedColRef.current=void 0,selectedRows.length!==rows?setSelectedRows(CompactSelection.fromSingleSelection([0,rows])):setSelectedRows(CompactSelection.empty()),focus();else{const lastCol=lastSelectedColRef.current;if(args.shiftKey&&void 0!==lastCol&&selectedColumns.hasIndex(lastCol)){const newSlice=[Math.min(lastCol,col),Math.max(lastCol,col)+1];setSelectedColumns(isMultiKey?selectedColumns.add(newSlice):CompactSelection.fromSingleSelection(newSlice),"header")}else isMultiKey?(selectedColumns.hasIndex(col)?setSelectedColumns(selectedColumns.remove(col),"header"):setSelectedColumns(selectedColumns.add(col),"header"),lastSelectedColRef.current=col):(setSelectedColumns(CompactSelection.fromSingleSelection(col),"header"),lastSelectedColRef.current=col);setSelectedRows(CompactSelection.empty()),lastSelectedRowRef.current=void 0,focus()}}else if("out-of-bounds"===args.kind)setGridSelection(void 0),setOverlay(void 0),focus(),setSelectedColumns(CompactSelection.empty(),"selection"),setSelectedRows(CompactSelection.empty()),lastSelectedRowRef.current=void 0,lastSelectedColRef.current=void 0;else if("group-header"===args.kind){const[col]=args.location;if(col<rowMarkerOffset)return;const needle=mangledCols[col];let start=col,end=col;for(let i=col-1;i>=rowMarkerOffset&&isGroupEqual(needle.group,mangledCols[i].group);i--)start--;for(let i=col+1;i<mangledCols.length&&isGroupEqual(needle.group,mangledCols[i].group);i++)end++;if(setSelectedRows(CompactSelection.empty()),setGridSelection(void 0),focus(),isMultiKey)if(selectedColumns.hasAll([start,end+1])){let newVal=selectedColumns;for(let index=start;index<=end;index++)newVal=newVal.remove(index);setSelectedColumns(newVal,"group")}else setSelectedColumns(selectedColumns.add([start,end+1]),"group");else setSelectedColumns(CompactSelection.fromSingleSelection([start,end+1]),"group")}}),[gridSelection,hasRowMarkers,rowMarkerOffset,showTrailingBlankRow,rows,rowMarkers,setGridSelection,focus,setSelectedColumns,selectedRows,rowSelectionMode,setSelectedRows,appendRow,lastRowSticky,selectedColumns,mangledCols]),[renameGroup,setRenameGroup]=react.useState(),onMouseUp=react.useCallback(((args,isOutside)=>{var _mouse$previousSelect;const mouse=mouseState.current;if(mouseState.current=void 0,isOutside)return;let prevented=!1;const preventDefault=()=>{prevented=!0};if(void 0!==scrollTimer.current&&window.clearInterval(scrollTimer.current),"header"===args.kind&&(null==onHeaderClicked||onHeaderClicked(args.location[0]-rowMarkerOffset,{...args,preventDefault:preventDefault})),"group-header"===args.kind&&(null==onGroupHeaderClicked||onGroupHeaderClicked(args.location[0]-rowMarkerOffset,{...args,preventDefault:preventDefault})),"cell"===args.kind&&(null==onCellClicked||onCellClicked([args.location[0]-rowMarkerOffset,args.location[1]],{...args,preventDefault:preventDefault}),void 0!==gridSelection&&void 0!==(null==mouse||null===(_mouse$previousSelect=mouse.previousSelection)||void 0===_mouse$previousSelect?void 0:_mouse$previousSelect.cell)&&!prevented)){const[col,row]=args.location,[selectedCol,selectedRow]=gridSelection.cell,[prevCol,prevRow]=mouse.previousSelection.cell,c=getMangedCellContent([col,row]),r=c.kind===GridCellKind.Custom?void 0:CellRenderers[c.kind];if(void 0!==r&&void 0!==r.onClick){const newVal=r.onClick(c,args.localEventX,args.localEventY,args.bounds);var _gridRef$current6;if(void 0!==newVal&&!isInnerOnlyCell(newVal)&&isEditableGridCell(newVal))mangledOnCellEdited(args.location,newVal),null===(_gridRef$current6=gridRef.current)||void 0===_gridRef$current6||_gridRef$current6.damage([{cell:args.location}])}col===selectedCol&&col===prevCol&&row===selectedRow&&row===prevRow&&reselect(args.bounds)}}),[getMangedCellContent,gridSelection,mangledOnCellEdited,onCellClicked,onGroupHeaderClicked,onHeaderClicked,reselect,rowMarkerOffset]),onHeaderMenuClickInner=react.useCallback(((col,screenPosition)=>{null==onHeaderMenuClick||onHeaderMenuClick(col-rowMarkerOffset,screenPosition)}),[onHeaderMenuClick,rowMarkerOffset]),onVisibleRegionChangedImpl=react.useCallback(((region,tx,ty)=>{const newRegion={...region,x:region.x-rowMarkerOffset,height:showTrailingBlankRow&&region.y+region.height>=rows?region.height-1:region.height,tx:tx,ty:ty};setVisibleRegion(newRegion),null==onVisibleRegionChanged||onVisibleRegionChanged(newRegion,tx,ty)}),[onVisibleRegionChanged,rowMarkerOffset,rows,showTrailingBlankRow]),onColumnMovedImpl=react.useCallback(((startIndex,endIndex)=>{null==onColumnMoved||onColumnMoved(startIndex-rowMarkerOffset,endIndex-rowMarkerOffset),setSelectedColumns(CompactSelection.fromSingleSelection(endIndex),"drag")}),[onColumnMoved,rowMarkerOffset,setSelectedColumns]),onDragStartImpl=react.useCallback((args=>{null==onDragStart||onDragStart({...args,location:[args.location[0]-rowMarkerOffset,args.location[1]]})}),[onDragStart,rowMarkerOffset]),onMouseMoveImpl=react.useCallback((args=>{const a={...args,location:[args.location[0]-rowMarkerOffset,args.location[1]]};null==onMouseMove||onMouseMove(a)}),[onMouseMove,rowMarkerOffset]),onItemHoveredImpl=react.useCallback((args=>{if(void 0!==mouseState.current&&void 0!==gridSelection&&!isDraggable){const[selectedCol,selectedRow]=gridSelection.cell;let[col,row]=args.location;const startedFromLastStickyRow=lastRowSticky&&selectedRow===rows;if(lastRowSticky&&row===rows||startedFromLastStickyRow)return;0===col&&hasRowMarkers&&(col=1);const deltaX=col-selectedCol,deltaY=(null!=row?row:0)-selectedRow,newRange={x:deltaX>=0?selectedCol:col,y:deltaY>=0?selectedRow:null!=row?row:0,width:Math.abs(deltaX)+1,height:Math.abs(deltaY)+1};if(setGridSelection({...gridSelection,range:newRange}),"out-of-bounds"===args.kind&&null!==scrollRef.current){const[horizontal,vertical]=args.direction;let scrollX=0,scrollY=0;-1===horizontal?scrollX=columns[columns.length-1].width:1===horizontal&&(scrollX=-columns[0].width),0!==vertical&&(scrollY="number"==typeof rowHeight?rowHeight*vertical:rowHeight(null!=row?row:0)*vertical),void 0!==scrollTimer.current&&window.clearInterval(scrollTimer.current),scrollTimer.current=window.setInterval((()=>{var _scrollRef$current;null===(_scrollRef$current=scrollRef.current)||void 0===_scrollRef$current||_scrollRef$current.scrollBy(-100*horizontal,scrollY)}),200),scrollRef.current.scrollBy(scrollX,scrollY)}else void 0!==scrollTimer.current&&window.clearInterval(scrollTimer.current)}null==onItemHovered||onItemHovered({...args,location:[args.location[0]-rowMarkerOffset,args.location[1]]})}),[gridSelection,isDraggable,onItemHovered,rowMarkerOffset,lastRowSticky,rows,hasRowMarkers,setGridSelection,columns,rowHeight]),copyToClipboard=react.useCallback((cells=>{function escape(str){return/\n|"|\t/.test(str)&&(str=`"${str.replace(/"/g,'""')}"`),str}const formatCell=cell=>{switch(cell.kind){case GridCellKind.Text:case GridCellKind.Number:return escape(cell.displayData);case GridCellKind.Markdown:case GridCellKind.RowID:case GridCellKind.Uri:return escape(cell.data);case GridCellKind.Image:case GridCellKind.Bubble:return cell.data.reduce(((pv,cv)=>`${escape(pv)},${escape(cv)}`));case GridCellKind.Boolean:return cell.data?"TRUE":"FALSE";case GridCellKind.Loading:return"#LOADING";case GridCellKind.Protected:return"************";case GridCellKind.Drilldown:return cell.data.map((i=>i.text)).reduce(((pv,cv)=>`${escape(pv)},${escape(cv)}`));case GridCellKind.Custom:return escape(cell.copyData);default:assertNever()}},str=cells.map((row=>row.map(formatCell).join("\t"))).join("\n");window.navigator.clipboard.writeText(str)}),[]),adjustSelection=react.useCallback((direction=>{var _oldRange$x,_oldRange$y,_oldRange$width,_oldRange$height;if(void 0===gridSelection)return;const[x,y]=direction,[col,row]=gridSelection.cell,oldRange=gridSelection.range;let left=null!==(_oldRange$x=null==oldRange?void 0:oldRange.x)&&void 0!==_oldRange$x?_oldRange$x:col,top=null!==(_oldRange$y=null==oldRange?void 0:oldRange.y)&&void 0!==_oldRange$y?_oldRange$y:row,width=null!==(_oldRange$width=null==oldRange?void 0:oldRange.width)&&void 0!==_oldRange$width?_oldRange$width:1,height=null!==(_oldRange$height=null==oldRange?void 0:oldRange.height)&&void 0!==_oldRange$height?_oldRange$height:1;let isTop=0===top-row;y<0&&1===height&&(isTop=!1);const heightDiff=isTop?y:-1*y;let isLeft=0===left-col;x<0&&1===width&&(isLeft=!1);const widthDiff=isLeft?x:-1*x;if(isTop){const maxHeight=rows-top;height+=heightDiff,height=Math.min(maxHeight,height),scrollTo(0,top+height-1,"vertical")}else top-=heightDiff,height=Math.abs(top-row)+1,scrollTo(0,top,"vertical");isLeft?(width+=widthDiff,scrollTo(left+width-1,0,"horizontal")):(left-=widthDiff,left=Math.max(rowMarkerOffset,left),width=Math.abs(left-col)+1,scrollTo(left,0,"horizontal")),setGridSelection({...gridSelection,range:{x:left,y:top,width:width,height:height}})}),[gridSelection,rowMarkerOffset,rows,scrollTo,setGridSelection]),updateSelectedCell=react.useCallback((function(col,row){let fromEditingTrailingRow=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const rowMax=mangledRows-(fromEditingTrailingRow?0:1);return col=Object(fp.clamp)(rowMarkerOffset,columns.length-1+rowMarkerOffset,col),row=Object(fp.clamp)(0,rowMax,row),(col!==(null==gridSelection?void 0:gridSelection.cell[0])||row!==(null==gridSelection?void 0:gridSelection.cell[1]))&&(setGridSelection({cell:[col,row],range:{x:col,y:row,width:1,height:1}}),void 0!==lastSent.current&&lastSent.current[0]===col&&lastSent.current[1]===row&&(lastSent.current=void 0),scrollTo(col,row),!0)}),[mangledRows,rowMarkerOffset,columns.length,null==gridSelection?void 0:gridSelection.cell,setGridSelection,scrollTo]),onFinishEditing=react.useCallback(((newValue,movement)=>{void 0!==(null==overlay?void 0:overlay.cell)&&void 0!==newValue&&(null==mangledOnCellEdited||mangledOnCellEdited(overlay.cell,newValue),window.requestAnimationFrame((()=>{var _gridRef$current7;null===(_gridRef$current7=gridRef.current)||void 0===_gridRef$current7||_gridRef$current7.damage([{cell:overlay.cell}])}))),focus(!0),setOverlay(void 0);const[movX,movY]=movement;if(void 0!==gridSelection&&(0!==movX||0!==movY)){const isEditingTrailingRow=gridSelection.cell[1]===mangledRows-1&&void 0!==newValue;updateSelectedCell(gridSelection.cell[0]+movX,gridSelection.cell[1]+movY,isEditingTrailingRow)}}),[null==overlay?void 0:overlay.cell,focus,gridSelection,mangledOnCellEdited,mangledRows,updateSelectedCell]),[selCol,selRow]=null!==(_gridSelection$cell=null==gridSelection?void 0:gridSelection.cell)&&void 0!==_gridSelection$cell?_gridSelection$cell:[],onCellFocused=react.useCallback((cell=>{selCol===cell[0]&&selRow===cell[1]||(setGridSelection({cell:cell,range:{x:cell[0],y:cell[1],width:1,height:1}}),setSelectedRows(CompactSelection.empty()))}),[selCol,selRow,setGridSelection,setSelectedRows]),onKeyDown=react.useCallback((event=>{(async()=>{const overlayOpen=void 0!==overlay,shiftKey=event.shiftKey,isOSX=browserIsOSX.value,isPrimaryKey=isOSX?event.metaKey:event.ctrlKey,isDeleteKey="Delete"===event.key||isOSX&&"Backspace"===event.key;if("Escape"===event.key)return overlayOpen?void setOverlay(void 0):(setGridSelection(void 0),setSelectedRows(CompactSelection.empty()),void setSelectedColumns(CompactSelection.empty(),"selection"));if(isDeleteKey&&0!==selectedRows.length&&void 0===gridSelection)return event.cancel(),focus(),null==onDeleteRows||onDeleteRows(Array.from(selectedRows)),void setSelectedRows(CompactSelection.empty());function deleteRange(range){var _gridRef$current8;focus();const damaged=[];for(let x=range.x;x<range.x+range.width;x++)for(let y=range.y;y<range.y+range.height;y++){const cellValue=getCellContent([x-rowMarkerOffset,y]);if(isEditableGridCell(cellValue)&&cellValue.allowOverlay||cellValue.kind===GridCellKind.Boolean){var _r$onDelete;const r=CellRenderers[cellValue.kind],newVal=null===(_r$onDelete=r.onDelete)||void 0===_r$onDelete?void 0:_r$onDelete.call(r,cellValue);void 0!==newVal&&(mangledOnCellEdited([x,y],newVal),damaged.push([x,y]))}}null===(_gridRef$current8=gridRef.current)||void 0===_gridRef$current8||_gridRef$current8.damage(damaged.map((x=>({cell:x}))))}if(isDeleteKey&&selectedColumns.length>0&&void 0===gridSelection){event.cancel();for(const col of selectedColumns)deleteRange({x:col,y:0,width:1,height:rows});return}if(void 0===gridSelection)return;let[col,row]=gridSelection.cell;if("Enter"===event.key&&void 0!==event.bounds)overlayOpen?(setOverlay(void 0),row++):row===rows&&showTrailingBlankRow?window.setTimeout((()=>{appendRow(col)}),0):(reselect(event.bounds),event.cancel());else if(68===event.keyCode&&isPrimaryKey&&gridSelection.range.height>1&&enableDownfill){var _gridRef$current9;const damage=[],r=gridSelection.range;for(let x=0;x<r.width;x++){const fillCol=x+r.x,fillVal=getMangedCellContent([fillCol,r.y]);if(!isInnerOnlyCell(fillVal)&&isEditableGridCell(fillVal))for(let y=1;y<r.height;y++){const target=[fillCol,y+r.y];damage.push(target),null==mangledOnCellEdited||mangledOnCellEdited(target,{...fillVal})}}null===(_gridRef$current9=gridRef.current)||void 0===_gridRef$current9||_gridRef$current9.damage(damage.map((c=>({cell:c})))),event.cancel()}else if("ArrowDown"===event.key)setOverlay(void 0),shiftKey?adjustSelection([0,isPrimaryKey?Number.MAX_SAFE_INTEGER:1]):row+=isPrimaryKey?Number.MAX_SAFE_INTEGER:1;else if("ArrowUp"===event.key)setOverlay(void 0),shiftKey?adjustSelection([0,isPrimaryKey?Number.MIN_SAFE_INTEGER:-1]):row+=isPrimaryKey?Number.MIN_SAFE_INTEGER:-1;else if("ArrowRight"===event.key)setOverlay(void 0),shiftKey?adjustSelection([isPrimaryKey?Number.MAX_SAFE_INTEGER:1,0]):col+=isPrimaryKey?Number.MAX_SAFE_INTEGER:1;else if("ArrowLeft"===event.key)setOverlay(void 0),shiftKey?adjustSelection([isPrimaryKey?Number.MIN_SAFE_INTEGER:-1,0]):col+=isPrimaryKey?Number.MIN_SAFE_INTEGER:-1;else if("Tab"===event.key)setOverlay(void 0),shiftKey?col--:col++;else if(isDeleteKey){event.cancel();deleteRange(gridSelection.range)}else if(!event.metaKey&&!event.ctrlKey&&String.fromCharCode(event.keyCode).match(/(\w|\s)/g)&&void 0!==event.bounds&&isReadWriteCell(getCellContent([col-rowMarkerOffset,Math.max(0,row-1)]))){if((!lastRowSticky||row!==rows)&&(visibleRegion.y>row||row>visibleRegion.y+visibleRegion.height||visibleRegion.x>col||col>visibleRegion.x+visibleRegion.width))return;let key=String.fromCharCode(event.keyCode);event.shiftKey||(key=key.toLowerCase()),reselect(event.bounds,key),event.cancel()}updateSelectedCell(col,row)&&event.cancel()})()}),[overlay,selectedRows,gridSelection,selectedColumns,enableDownfill,getCellContent,rowMarkerOffset,updateSelectedCell,setGridSelection,setSelectedRows,setSelectedColumns,focus,onDeleteRows,mangledOnCellEdited,rows,showTrailingBlankRow,appendRow,reselect,getMangedCellContent,adjustSelection,lastRowSticky,visibleRegion.y,visibleRegion.height,visibleRegion.x,visibleRegion.width]);useEventListener("paste",react.useCallback((async()=>{var _scrollRef$current2,_canvasRef$current;function pasteToCell(inner,target,toPaste){if(!isInnerOnlyCell(inner)&&isReadWriteCell(inner)&&!0!==inner.readonly)switch(inner.kind){case GridCellKind.Text:case GridCellKind.Markdown:case GridCellKind.Uri:return null==mangledOnCellEdited||mangledOnCellEdited(target,{...inner,data:toPaste}),!0;case GridCellKind.Number:{const newNumber=Number.parseFloat(toPaste);return!Number.isNaN(newNumber)&&(null==mangledOnCellEdited||mangledOnCellEdited(target,{...inner,data:newNumber}),!0)}default:assertNever()}return!1}const focused=!0===(null===(_scrollRef$current2=scrollRef.current)||void 0===_scrollRef$current2?void 0:_scrollRef$current2.contains(document.activeElement))||!0===(null===(_canvasRef$current=canvasRef.current)||void 0===_canvasRef$current?void 0:_canvasRef$current.contains(document.activeElement));let target=null==gridSelection?void 0:gridSelection.cell;var _selectedColumns$firs,_selectedRows$first;void 0===target&&1===selectedColumns.length&&(target=[null!==(_selectedColumns$firs=selectedColumns.first())&&void 0!==_selectedColumns$firs?_selectedColumns$firs:0,0]);void 0===target&&1===selectedRows.length&&(target=[rowMarkerOffset,null!==(_selectedRows$first=selectedRows.first())&&void 0!==_selectedRows$first?_selectedRows$first:0]);if(focused&&void 0!==target){var _gridRef$current10;const text=await navigator.clipboard.readText(),[gridCol,gridRow]=target;if(void 0===onPaste){return void pasteToCell(getMangedCellContent(target),target,text)}const data=function unquote(str){function descape(s){return s.startsWith('"')&&s.endsWith('"')&&(s=s.slice(1,-1).replace(/""/g,'"')),s}let State;!function(State){State[State.None=0]="None",State[State.inString=1]="inString",State[State.inStringPostQuote=2]="inStringPostQuote"}(State||(State={}));const result=[];let current=[],start=0,state=State.None;str=str.trim().replace(/\r\n/g,"\n");let index=0;for(const char of str){switch(state){case State.None:"\t"===char||"\n"===char?(current.push(str.slice(start,index)),start=index+1,"\n"===char&&(result.push(current),current=[])):'"'===char&&(state=State.inString);break;case State.inString:'"'===char&&(state=State.inStringPostQuote);break;case State.inStringPostQuote:'"'===char?state=State.inString:"\t"===char||"\n"===char?(current.push(descape(str.slice(start,index))),start=index+1,"\n"===char&&(result.push(current),current=[]),state=State.None):state=State.None}index++}return start<str.length&&current.push(descape(str.slice(start,str.length))),result.push(current),result}(text);if(!1===onPaste||"function"==typeof onPaste&&!0!==(null==onPaste?void 0:onPaste(target,data)))return;const damage=[];for(let row=0;row<data.length;row++){const dataRow=data[row];if(row+gridRow>=rows)break;for(let col=0;col<dataRow.length;col++){const dataItem=dataRow[col],index=[col+gridCol,row+gridRow];pasteToCell(getMangedCellContent(index),index,dataItem)&&damage.push(index)}}null===(_gridRef$current10=gridRef.current)||void 0===_gridRef$current10||_gridRef$current10.damage(damage.map((c=>({cell:c}))))}}),[getMangedCellContent,gridSelection,mangledOnCellEdited,onPaste,rowMarkerOffset,rows,selectedColumns,selectedRows]),window,!1,!0),useEventListener("copy",react.useCallback((()=>{var _scrollRef$current3,_canvasRef$current2;if((!0===(null===(_scrollRef$current3=scrollRef.current)||void 0===_scrollRef$current3?void 0:_scrollRef$current3.contains(document.activeElement))||!0===(null===(_canvasRef$current2=canvasRef.current)||void 0===_canvasRef$current2?void 0:_canvasRef$current2.contains(document.activeElement)))&&void 0!==getCellsForSelection)if(void 0!==gridSelection)copyToClipboard(getCellsForSelection({...gridSelection.range,x:gridSelection.range.x-rowMarkerOffset}));else if(void 0!==selectedRows&&selectedRows.length>0){const cells=Array.from(selectedRows).map((rowIndex=>getCellsForSelection({x:0,y:rowIndex,width:columns.length,height:1})[0]));copyToClipboard(cells)}else if(selectedColumns.length>=1){const results=[];for(const col of selectedColumns)results.push(getCellsForSelection({x:col-rowMarkerOffset,y:0,width:1,height:rows}));1===results.length&&copyToClipboard(results[0]);const toCopy=results.reduce(((pv,cv)=>pv.map(((row,index)=>[...row,...cv[index]]))));copyToClipboard(toCopy)}}),[columns.length,copyToClipboard,getCellsForSelection,gridSelection,rowMarkerOffset,rows,selectedColumns,selectedRows]),window,!0,!1);const onSearchResultsChanged=react.useCallback(((results,navIndex)=>{if(0===results.length||-1===navIndex)return;const[col,row]=results[navIndex];void 0!==lastSent.current&&lastSent.current[0]===col&&lastSent.current[1]===row||(lastSent.current=[col,row],updateSelectedCell(col,row))}),[updateSelectedCell]);react.useEffect((()=>{if(void 0===gridSelection)return;const[col,row]=gridSelection.cell;void 0!==mangledCols[col]&&updateSelectedCell(col,row)}),[mangledCols,rows,gridSelection,updateSelectedCell]);const disabledRows=react.useMemo((()=>!0===showTrailingBlankRow&&!0===(null==trailingRowOptions?void 0:trailingRowOptions.tint)?CompactSelection.fromSingleSelection(mangledRows-1):CompactSelection.empty()),[mangledRows,showTrailingBlankRow,null==trailingRowOptions?void 0:trailingRowOptions.tint]),theme=Object(dist_styled_components_browser_esm.d)(),mergedTheme=react.useMemo((()=>({...dataEditorBaseTheme,...theme})),[theme]),mangledVerticalBorder=react.useCallback((col=>{var _verticalBorder;return"boolean"==typeof verticalBorder?verticalBorder:null===(_verticalBorder=null==verticalBorder?void 0:verticalBorder(col-rowMarkerOffset))||void 0===_verticalBorder||_verticalBorder}),[rowMarkerOffset,verticalBorder]),mangledGetGroupDetails=react.useCallback((group=>{var _getGroupDetails;let result=null!==(_getGroupDetails=null==getGroupDetails?void 0:getGroupDetails(group))&&void 0!==_getGroupDetails?_getGroupDetails:{name:group};var _result$actions;void 0!==onGroupHeaderRenamed&&""!==group&&(result={icon:result.icon,name:result.name,overrideTheme:result.overrideTheme,actions:[...null!==(_result$actions=result.actions)&&void 0!==_result$actions?_result$actions:[],{title:"Rename",icon:"renameIcon",onClick:e=>setRenameGroup({group:result.name,bounds:e.bounds})}]});return result}),[getGroupDetails,onGroupHeaderRenamed]),drawCustomCellMangled=react.useMemo((()=>void 0!==drawCell?drawCell:void 0!==drawCustomCell?a=>drawCustomCell(a.ctx,a.cell,a.theme,a.rect,a.hoverAmount):void 0),[drawCell,drawCustomCell]),renameGroupNode=react.useMemo((()=>{if(void 0===renameGroup||null===canvasRef.current)return null;const{bounds:bounds,group:group}=renameGroup,canvasBounds=canvasRef.current.getBoundingClientRect();return react.createElement(GroupRename,{bounds:bounds,group:group,canvasBounds:canvasBounds,onClose:()=>setRenameGroup(void 0),onFinish:newVal=>{setRenameGroup(void 0),null==onGroupHeaderRenamed||onGroupHeaderRenamed(group,newVal)}})}),[onGroupHeaderRenamed,renameGroup]),mangledFreezeColumns=Math.min(mangledCols.length,freezeColumns+(hasRowMarkers?1:0));return react.createElement(dist_styled_components_browser_esm.a,{theme:mergedTheme},react.createElement(data_grid_search,data_editor_extends({},rest,{enableGroups:enableGroups,canvasRef:canvasRef,cellXOffset:cellXOffset,cellYOffset:cellYOffset,columns:mangledCols,drawCustomCell:drawCustomCellMangled,disabledRows:disabledRows,freezeColumns:mangledFreezeColumns,lockColumns:rowMarkerOffset,getCellContent:getMangedCellContent,getGroupDetails:mangledGetGroupDetails,headerHeight:headerHeight,groupHeaderHeight:enableGroups?groupHeaderHeight:0,lastRowSticky:lastRowSticky,onCellFocused:onCellFocused,onColumnMoved:void 0===onColumnMoved?void 0:onColumnMovedImpl,onDragStart:onDragStartImpl,onHeaderMenuClick:onHeaderMenuClickInner,onItemHovered:onItemHoveredImpl,onMouseMove:onMouseMoveImpl,onKeyDown:onKeyDown,onMouseDown:onMouseDown,onMouseUp:onMouseUp,onSearchResultsChanged:onSearchResultsChanged,onVisibleRegionChanged:onVisibleRegionChangedImpl,rowHeight:rowHeight,rows:mangledRows,scrollRef:scrollRef,searchColOffset:rowMarkerOffset,selectedCell:gridSelection,selectedColumns:selectedColumns,selectedRows:selectedRows,translateX:visibleRegion.tx,translateY:visibleRegion.ty,verticalBorder:mangledVerticalBorder,gridRef:gridRef})),renameGroupNode,void 0!==overlay&&react.createElement(data_grid_overlay_editor,data_editor_extends({},overlay,{className:!0===(null===(_p$experimental=p.experimental)||void 0===_p$experimental?void 0:_p$experimental.isSubGrid)?"click-outside-ignore":void 0,provideEditor:provideEditor,imageEditorOverride:imageEditorOverride,onFinishEditing:onFinishEditing,markdownDivCreateNode:markdownDivCreateNode})))}));DataEditor.__docgenInfo={description:"",methods:[],displayName:"DataEditor"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/dist/js/data-editor/data-editor.js"]={name:"DataEditor",docgenInfo:DataEditor.__docgenInfo,path:"packages/core/dist/js/data-editor/data-editor.js"});const starPoints=[[50,5],[61.23,39.55],[97.55,39.55],[68.16,60.9],[79.39,95.45],[50,74.1],[20.61,95.45],[31.84,60.9],[2.45,39.55],[38.77,39.55]];function pathStar(ctx,center,size){let moved=!1;for(const p of starPoints){const x=(p[0]-50)*(size/100)+center[0],y=(p[1]-50)*(size/100)+center[1];moved?ctx.lineTo(x,y):(ctx.moveTo(x,y),moved=!0)}ctx.closePath()}const StarSVG=()=>react.createElement("svg",{width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react.createElement("path",{d:"M47.1468 13.7811C48.0449 11.0172 51.9551 11.0172 52.8532 13.7812L60.5522 37.4762C60.9538 38.7123 62.1056 39.5491 63.4053 39.5491H88.3198C91.226 39.5491 92.4343 43.268 90.0831 44.9762L69.9269 59.6205C68.8755 60.3845 68.4355 61.7386 68.8371 62.9746L76.5361 86.6697C77.4342 89.4336 74.2707 91.732 71.9196 90.0238L51.7634 75.3794C50.7119 74.6155 49.2881 74.6155 48.2366 75.3795L28.0804 90.0238C25.7293 91.732 22.5659 89.4336 23.4639 86.6697L31.1629 62.9746C31.5645 61.7386 31.1245 60.3845 30.0731 59.6205L9.91686 44.9762C7.56572 43.268 8.77405 39.5491 11.6802 39.5491H36.5947C37.8944 39.5491 39.0462 38.7123 39.4478 37.4762L47.1468 13.7811Z",fill:"currentColor"})),EditorWrap=styled_components_browser_esm.a.div.withConfig({displayName:"star-cell__EditorWrap",componentId:"sc-o1c8dg-0"})([".active{color:",";}display:flex;align-items:center;padding:6px 0;color:",";> *{position:relative;width:16px;height:16px;cursor:pointer;margin-right:2px;svg{width:100%;height:100%;}}"],(p=>p.theme.textDark),(p=>p.theme.textLight));var star_cell={isMatch:cell=>"star-cell"===cell.data.kind,draw:(args,cell)=>{const{ctx:ctx,theme:theme,rect:rect,hoverAmount:hoverAmount}=args,{rating:rating}=cell.data;let drawX=theme.cellHorizontalPadding;const stars=Math.min(5,Math.ceil(rating));drawX+=8,ctx.beginPath();for(let i=0;i<stars;i++)pathStar(ctx,[drawX,rect.y+rect.height/2],16),drawX+=18;return ctx.fillStyle=theme.textDark,ctx.globalAlpha=.6+.4*hoverAmount,ctx.fill(),ctx.globalAlpha=1,!0},provideEditor:()=>p=>react.createElement(EditorWrap,null,[0,1,2,3,4].map((index=>react.createElement("div",{key:index,className:p.value.data.rating<index+1?"inactive":"active",onClick:()=>{p.onChange({...p.value,data:{...p.value.data,rating:index+1}})}},react.createElement(StarSVG,null)))))};var sparkline_cell={isMatch:cell=>"sparkline-cell"===cell.data.kind,draw:(args,cell)=>{const{ctx:ctx,theme:theme,rect:rect,hoverAmount:hoverAmount,hoverX:hoverX}=args;let{values:values,yAxis:yAxis,color:color,graphKind:graphKind="line",displayValues:displayValues}=cell.data;const[minY,maxY]=yAxis;if(0===values.length)return!0;values=values.map((x=>Math.min(1,Math.max(0,(x-minY)/(maxY-minY)))));const padX=theme.cellHorizontalPadding,drawX=padX+rect.x,y=rect.y+3,height=rect.height-6,width=rect.width-2*padX,zeroY=maxY<=0?y:minY>=0?y+height:y+height*(maxY/(maxY-minY));if(minY<=0&&maxY>=0&&(ctx.beginPath(),ctx.moveTo(drawX,zeroY),ctx.lineTo(drawX+width,zeroY),ctx.globalAlpha=.4,ctx.lineWidth=1,ctx.strokeStyle=theme.textLight,ctx.stroke(),ctx.globalAlpha=1),"bar"===graphKind){var _cell$data$color;ctx.beginPath();const margin=2,barWidth=(width-(values.length-1)*margin)/values.length;let x=drawX;for(const val of values){const barY=y+height-val*height;ctx.moveTo(x,zeroY),ctx.lineTo(x+barWidth,zeroY),ctx.lineTo(x+barWidth,barY),ctx.lineTo(x,barY),x+=barWidth+margin}ctx.fillStyle=null!==(_cell$data$color=cell.data.color)&&void 0!==_cell$data$color?_cell$data$color:theme.accentColor,ctx.fill()}else{1===values.length&&(values=[values[0],values[0]]),ctx.beginPath();const xStep=(rect.width-16)/(values.length-1),points=values.map(((val,ind)=>({x:drawX+xStep*ind,y:y+height-val*height})));let i;for(ctx.moveTo(points[0].x,points[0].y),i=1;i<points.length-2;i++){const xControl=(points[i].x+points[i+1].x)/2,yControl=(points[i].y+points[i+1].y)/2;ctx.quadraticCurveTo(points[i].x,points[i].y,xControl,yControl)}ctx.quadraticCurveTo(points[i].x,points[i].y,points[i+1].x,points[i+1].y),ctx.strokeStyle=null!=color?color:theme.accentColor,ctx.lineWidth=1+.5*hoverAmount,ctx.stroke(),ctx.lineTo(rect.x+rect.width-padX,zeroY),ctx.lineTo(rect.x+padX,zeroY),ctx.closePath(),ctx.globalAlpha=.2+.2*hoverAmount;const grad=ctx.createLinearGradient(0,y,0,y+1.4*height);grad.addColorStop(0,null!=color?color:theme.accentColor);const[r,g,b]=parseToRgba(null!=color?color:theme.accentColor);if(grad.addColorStop(1,`rgba(${r}, ${g}, ${b}, 0)`),ctx.fillStyle=grad,ctx.fill(),ctx.globalAlpha=1,void 0!==hoverX&&"line"===graphKind&&void 0!==displayValues){ctx.beginPath();const closest=Math.min(values.length-1,Math.max(0,Math.round((hoverX-padX)/xStep)));ctx.moveTo(drawX+closest*xStep,rect.y),ctx.lineTo(drawX+closest*xStep,rect.y+rect.height),ctx.lineWidth=1,ctx.strokeStyle=theme.textLight,ctx.stroke(),ctx.save(),ctx.font=`8px ${theme.fontFamily}`,ctx.fillStyle=theme.textMedium,ctx.textBaseline="top",ctx.fillText(displayValues[closest],drawX,rect.y+theme.cellVerticalPadding),ctx.restore()}}return!0},provideEditor:()=>{}};function tags_cell_roundedRect(ctx,x,y,width,height,radius){ctx.moveTo(x+radius,y),ctx.arcTo(x+width,y,x+width,y+radius,radius),ctx.arcTo(x+width,y+height,x+width-radius,y+height,radius),ctx.arcTo(x,y+height,x,y+height-radius,radius),ctx.arcTo(x,y,x+radius,y,radius)}const tags_cell_EditorWrap=styled_components_browser_esm.a.div.withConfig({displayName:"tags-cell__EditorWrap",componentId:"sc-zfe4jh-0"})(["display:flex;flex-direction:column;align-items:stretch;padding-top:6px;color:",";box-sizing:border-box;*{box-sizing:border-box;}&&&& label{display:flex;cursor:pointer;input{cursor:pointer;width:auto;}.pill{margin-left:8px;margin-right:6px;margin-bottom:6px;border-radius:","px;min-height:","px;padding:2px ","px;display:flex;align-items:center;font:12px ",";background-color:",";transition:box-shadow 150ms;&.unselected{opacity:0.8;}}}label:hover .pill{box-shadow:0 1px 4px rgba(0,0,0,0.15);}&&&&.readonly label{cursor:default;.pill{box-shadow:none !important;}}"],(p=>p.theme.textDark),10,20,6,(p=>p.theme.fontFamily),(p=>p.theme.bgBubble));const src_cells=[star_cell,sparkline_cell,{isMatch:c=>"tags-cell"===c.data.kind,draw:(args,cell)=>{const{ctx:ctx,theme:theme,rect:rect}=args,{possibleTags:possibleTags,tags:tags}=cell.data,drawArea={x:rect.x+theme.cellHorizontalPadding,y:rect.y+theme.cellVerticalPadding,width:rect.width-2*theme.cellHorizontalPadding,height:rect.height-2*theme.cellVerticalPadding},rows=Math.max(1,Math.floor(drawArea.height/26));let x=drawArea.x,row=1,y=drawArea.y+(drawArea.height-20*rows-6*(rows-1))/2;for(const tag of tags){var _possibleTags$find$co,_possibleTags$find;const color=null!==(_possibleTags$find$co=null===(_possibleTags$find=possibleTags.find((t=>t.tag===tag)))||void 0===_possibleTags$find?void 0:_possibleTags$find.color)&&void 0!==_possibleTags$find$co?_possibleTags$find$co:theme.bgBubble;ctx.font=`12px ${theme.fontFamily}`;const width=measureTextCached(tag,ctx).width+12,textY=10;if(x!==drawArea.x&&x+width>drawArea.x+drawArea.width&&row<rows&&(row++,y+=26,x=drawArea.x),ctx.fillStyle=color,ctx.beginPath(),tags_cell_roundedRect(ctx,x,y,width,20,10),ctx.fill(),ctx.fillStyle=theme.textDark,ctx.fillText(tag,x+6,y+textY),x+=width+8,x>drawArea.x+drawArea.width&&row>=rows)break}return!0},provideEditor:()=>p=>{const{onChange:onChange,value:value}=p,{possibleTags:possibleTags,tags:tags,readonly:readonly=!1}=value.data;return react.createElement(tags_cell_EditorWrap,{className:readonly?"readonly":""},possibleTags.map((t=>{const selected=-1!==tags.indexOf(t.tag);return react.createElement("label",{key:t.tag},!readonly&&react.createElement("input",{type:"checkbox",checked:selected,onChange:()=>{const newTags=selected?tags.filter((x=>x!==t.tag)):[...tags,t.tag];onChange({...p.value,data:{...value.data,tags:newTags}})}}),react.createElement("div",{className:"pill "+(selected?"selected":"unselected"),style:{backgroundColor:selected?t.color:void 0}},t.tag))})))}},{isMatch:cell=>"user-profile-cell"===cell.data.kind,draw:(args,cell)=>{const{ctx:ctx,rect:rect,theme:theme,imageLoader:imageLoader,col:col,row:row}=args,{image:image,name:name,initial:initial,tint:tint}=cell.data,xPad=theme.cellHorizontalPadding,radius=Math.min(12,rect.height/2-theme.cellVerticalPadding),drawX=rect.x+xPad,imageResult=imageLoader.loadOrGetImage(image,col,row);ctx.save(),ctx.beginPath(),ctx.arc(drawX+radius,rect.y+rect.height/2,radius,0,2*Math.PI),ctx.globalAlpha=.2,ctx.fillStyle=tint,ctx.fill(),ctx.globalAlpha=1,ctx.font=`600 16px ${theme.fontFamily}`;const metrics=measureTextCached(initial[0],ctx);return ctx.fillText(initial[0],drawX+radius-metrics.width/2,rect.y+rect.height/2+metrics.actualBoundingBoxAscent/2),void 0!==imageResult&&(ctx.save(),ctx.beginPath(),ctx.arc(drawX+radius,rect.y+rect.height/2,radius,0,2*Math.PI),ctx.clip(),ctx.drawImage(imageResult,drawX,rect.y+rect.height/2-radius,2*radius,2*radius),ctx.restore()),void 0!==name&&(ctx.font=`${theme.baseFontStyle} ${theme.fontFamily}`,ctx.fillStyle=theme.textDark,ctx.textBaseline="middle",ctx.fillText(name,drawX+2*radius+xPad,rect.y+rect.height/2)),ctx.restore(),!0},provideEditor:()=>p=>{var _value$data$name;const{isHighlighted:isHighlighted,onChange:onChange,value:value}=p;return react.createElement(growing_entry,{highlight:isHighlighted,autoFocus:!0,value:null!==(_value$data$name=value.data.name)&&void 0!==_value$data$name?_value$data$name:"",onChange:e=>onChange({...value,data:{...value.data,name:e.target.value}})})}}];var node_modules_lodash_range=__webpack_require__(268),lodash_range_default=__webpack_require__.n(node_modules_lodash_range),uniq=__webpack_require__(422),uniq_default=__webpack_require__.n(uniq);function cell_stories_extends(){return cell_stories_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},cell_stories_extends.apply(this,arguments)}const SimpleWrapper=styled_components_browser_esm.a.div.withConfig({displayName:"cellstories__SimpleWrapper",componentId:"sc-1vy1omt-0"})(["text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;box-sizing:border-box;*,*::before,*::after{box-sizing:inherit;}"]),SimpleThemeWrapper=p=>react.createElement(SimpleWrapper,null,react.createElement("div",{className:"content"},p.children));__webpack_exports__.default={title:"Extra Cells",decorators:[Story=>react.createElement(SimpleThemeWrapper,null,react.createElement(Story,null))]};const BeautifulStyle=styled_components_browser_esm.a.div.withConfig({displayName:"cellstories__BeautifulStyle",componentId:"sc-1vy1omt-1"})(["background-color:#2790b9;background:linear-gradient(90deg,#2790b9,#2070a9);color:white;padding:32px 48px;display:flex;flex-direction:column;height:100vh;font-family:sans-serif;& > h1{font-size:50px;font-weight:600;flex-shrink:0;margin:0 0 12px 0;}.sizer{flex-grow:1;background-color:white;border-radius:12px;box-shadow:rgba(9,30,66,0.25) 0px 4px 8px -2px,rgba(9,30,66,0.08) 0px 0px 0px 1px;.sizer-clip{border-radius:12px;overflow:hidden;transform:translateZ(0);height:100%;}}"]),BeautifulWrapper=p=>{const{title:title,children:children,description:description}=p;return react.createElement(BeautifulStyle,null,react.createElement("h1",null,title),description,react.createElement("div",{className:"sizer"},react.createElement("div",{className:"sizer-clip"},react.createElement(index_esm.a,null,(props=>{var _props$width,_props$height;return react.createElement(data_grid_container,{width:null!==(_props$width=props.width)&&void 0!==_props$width?_props$width:100,height:null!==(_props$height=props.height)&&void 0!==_props$height?_props$height:100},children)})))))},Description=styled_components_browser_esm.a.p.withConfig({displayName:"cellstories__Description",componentId:"sc-1vy1omt-2"})(["font-size:18px;flex-shrink:0;margin:0 0 20px 0;"]),defaultProps={smoothScrollX:!0,smoothScrollY:!0,isDraggable:!1,rowMarkers:"none"};let num=1;function rand(){return(num=16807*num%2147483647)/2147483647}const cell_stories_possibleTags=[{tag:"Bug",color:"#ff4d4d35"},{tag:"Feature",color:"#35f8ff35"},{tag:"Enhancement",color:"#48ff5735"},{tag:"First Issue",color:"#436fff35"},{tag:"PR",color:"#e0ff3235"},{tag:"Assigned",color:"#ff1eec35"}],CustomCells=()=>{const{drawCell:drawCell,provideEditor:provideEditor}=function useExtraCells(){return{drawCell:react.useCallback((args=>{const{cell:cell}=args;if(cell.kind!==GridCellKind.Custom)return!1;for(const c of src_cells)if(c.isMatch(cell))return c.draw(args,cell);return!1}),[]),provideEditor:react.useCallback((cell=>{if(cell.kind===GridCellKind.Custom)for(const c of src_cells)if(c.isMatch(cell))return c.provideEditor(cell)}),[])}}();return react.createElement(BeautifulWrapper,{title:"Custom cells",description:react.createElement(Description,null,"Some of our extension cells.")},react.createElement(DataEditor,cell_stories_extends({},defaultProps,{drawCell:drawCell,provideEditor:provideEditor,getCellContent:cell=>{const[col,row]=cell;if(0===col)return{kind:GridCellKind.Custom,allowOverlay:!0,copyData:"4",data:{kind:"star-cell",label:"Test",rating:4}};if(1===col){num=row+1;const values=lodash_range_default()(0,15).map((()=>100*rand()-50));return{kind:GridCellKind.Custom,allowOverlay:!1,copyData:"4",data:{kind:"sparkline-cell",values:values,displayValues:values.map((x=>Math.round(x).toString())),color:row%2==0?"#77c4c4":"#D98466",yAxis:[-50,50]}}}return 2===col?(num=row+1,{kind:GridCellKind.Custom,allowOverlay:!1,copyData:"4",data:{kind:"sparkline-cell",values:lodash_range_default()(0,15).map((()=>100*rand()-50)),color:row%2==0?"#77c4c4":"#D98466",graphKind:"bar",yAxis:[-50,50]}}):3===col?(num=row+1,rand(),{kind:GridCellKind.Custom,allowOverlay:!0,copyData:"4",data:{kind:"tags-cell",possibleTags:cell_stories_possibleTags,readonly:row%2==0,tags:uniq_default()([cell_stories_possibleTags[Math.round(1e3*rand())%cell_stories_possibleTags.length].tag,cell_stories_possibleTags[Math.round(1e3*rand())%cell_stories_possibleTags.length].tag,cell_stories_possibleTags[Math.round(1e3*rand())%cell_stories_possibleTags.length].tag,cell_stories_possibleTags[Math.round(1e3*rand())%cell_stories_possibleTags.length].tag])}}):(num=row+1,rand(),{kind:GridCellKind.Custom,allowOverlay:!0,copyData:"4",data:{kind:"user-profile-cell",image:row%2?void 0:"https://i.redd.it/aqc1hwhalsz71.jpg",initial:"B",tint:"#F1D86E",name:row%5?void 0:"Bee bb"}})},columns:[{title:"Stars",width:200},{title:"Sparkline",width:150},{title:"Sparkline (bars)",width:150},{title:"Tags",width:250},{title:"Profile",width:150}],rows:500})))};CustomCells.parameters={options:{showPanel:!1}};try{CustomCells.displayName="CustomCells",CustomCells.__docgenInfo={description:"",displayName:"CustomCells",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/cells/src/cell.stories.tsx#CustomCells"]={docgenInfo:CustomCells.__docgenInfo,name:"CustomCells",path:"packages/cells/src/cell.stories.tsx#CustomCells"})}catch(__react_docgen_typescript_loader_error){}},2482:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));var client_api=__webpack_require__(2486),esm=__webpack_require__(8),client=__webpack_require__(188);Object(client.addParameters)({options:{showRoots:!0,storySort:(a,b)=>a[1].id.localeCompare(b[1].id,void 0,{numeric:!0})}});const parameters={layout:"fullscreen"};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.c)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.d)(loader,!1)}));case"parameters":return Object(client_api.e)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(client_api.b)(enhancer)}));case"render":return Object(client_api.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.e)(v,!1);default:return console.log(key+" was not supported :( !")}}))},3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DataEditor}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),support=__webpack_require__(46),fp=__webpack_require__(125),react_dom=__webpack_require__(54);function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}class click_outside_container_ClickOutsideContainer extends react.PureComponent{constructor(){super(...arguments),this.wrapperRef=react.createRef(),this.clickOutside=event=>{if(null!==this.wrapperRef.current&&!this.wrapperRef.current.contains(event.target)){let node=event.target;for(;null!==node;){if(node.classList.contains("click-outside-ignore"))return;node=node.parentElement}this.props.onClickOutside()}}}componentDidMount(){document.addEventListener("mousedown",this.clickOutside,!0),document.addEventListener("contextmenu",this.clickOutside,!0)}componentWillUnmount(){document.removeEventListener("mousedown",this.clickOutside),document.removeEventListener("contextmenu",this.clickOutside)}render(){const{onClickOutside:onClickOutside,...rest}=this.props;return react.createElement("div",_extends({},rest,{ref:this.wrapperRef}),this.props.children)}}try{clickoutsidecontainer.displayName="clickoutsidecontainer",clickoutsidecontainer.__docgenInfo={description:"",displayName:"clickoutsidecontainer",props:{onClickOutside:{defaultValue:null,description:"",name:"onClickOutside",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/click-outside-container/click-outside-container.tsx#clickoutsidecontainer"]={docgenInfo:clickoutsidecontainer.__docgenInfo,name:"clickoutsidecontainer",path:"packages/core/src/click-outside-container/click-outside-container.tsx#clickoutsidecontainer"})}catch(__react_docgen_typescript_loader_error){}var data_grid_cells=__webpack_require__(66),data_grid_types=__webpack_require__(1),styles=__webpack_require__(14),growing_entry_style=__webpack_require__(96);const DataGridOverlayEditorStyle=styles.b.div`
    position: absolute;

    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-sizing: border-box;

    --overlay-top: ${p=>p.targetRect.y}px;

    left: ${p=>p.targetRect.x-1}px;
    top: ${p=>p.targetRect.y-1}px;
    min-width: ${p=>p.targetRect.width+2}px;
    min-height: ${p=>p.targetRect.height+2}px;
    width: max-content;
    max-width: 400px;
    max-height: calc(100vh - ${p=>p.targetRect.y+10}px);

    border-radius: 2px;
    background-color: ${p=>p.theme.bgCell};

    box-shadow: 0 0 0 1px ${p=>p.theme.accentColor}, 0px 0px 1px rgba(62, 65, 86, 0.4),
        0px 6px 12px rgba(62, 65, 86, 0.15);

    font-family: ${p=>p.theme.fontFamily};
    font-size: 13px;

    ${p=>p.pad&&`padding: ${Math.max(0,(p.targetRect.height-28)/2)}px 8.5px 3px;`}

    @keyframes glide_fade_in {
        from {
            opacity: 0%;
        }

        to {
            opacity: 100%;
        }
    }

    animation: glide_fade_in 60ms 1;

    .clip-region {
        display: flex;
        flex-direction: column;
        overflow-y: auto;
        overflow-x: hidden;
        border-radius: 2px;
        overflow: hidden;

        input {
            width: 100%;

            border: none;
            border-width: 0;
            outline: none;
        }

        textarea {
            border: none;
            border-width: 0;
            outline: none;
        }

        ${growing_entry_style.a} {
            height: 100%;
        }
    }

    text-align: start;
`;try{DataGridOverlayEditorStyle.displayName="DataGridOverlayEditorStyle",DataGridOverlayEditorStyle.__docgenInfo={description:"",displayName:"DataGridOverlayEditorStyle",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},targetRect:{defaultValue:null,description:"",name:"targetRect",required:!0,type:{name:"Rectangle"}},pad:{defaultValue:null,description:"",name:"pad",required:!0,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/data-grid-overlay-editor-style.tsx#DataGridOverlayEditorStyle"]={docgenInfo:DataGridOverlayEditorStyle.__docgenInfo,name:"DataGridOverlayEditorStyle",path:"packages/core/src/data-grid-overlay-editor/data-grid-overlay-editor-style.tsx#DataGridOverlayEditorStyle"})}catch(__react_docgen_typescript_loader_error){}var data_grid_overlay_editor=p=>{const{target:target,content:content,onFinishEditing:onFinishEditing,forceEditMode:forceEditMode,imageEditorOverride:imageEditorOverride,markdownDivCreateNode:markdownDivCreateNode,highlight:highlight,className:className,provideEditor:provideEditor}=p,[tempValue,setTempValue]=react.useState(forceEditMode?content:void 0),onClickOutside=react.useCallback((()=>{onFinishEditing(tempValue,[0,0])}),[tempValue,onFinishEditing]),onCustomFinishedEditing=react.useCallback((newValue=>{onFinishEditing(void 0!==newValue?newValue:tempValue,[0,0])}),[onFinishEditing,tempValue]),onKeyDown=react.useCallback((event=>{"Escape"===event.key?onFinishEditing(void 0,[0,0]):"Enter"!==event.key||event.shiftKey?"Tab"===event.key&&(onFinishEditing(tempValue,[event.shiftKey?-1:1,0]),event.stopPropagation(),event.preventDefault()):(onFinishEditing(tempValue,[0,1]),event.stopPropagation(),event.preventDefault())}),[onFinishEditing,tempValue]),targetValue=null!=tempValue?tempValue:content,CustomEditor=react.useMemo((()=>null==provideEditor?void 0:provideEditor(content)),[content,provideEditor]),[CellEditor,useLabel]=react.useMemo((()=>{var _renderer$getEditor;if(content.kind===data_grid_types.b.Custom)return[];const renderer=data_grid_cells.a[content.kind];return[null===(_renderer$getEditor=renderer.getEditor)||void 0===_renderer$getEditor?void 0:_renderer$getEditor.call(renderer,content),renderer.useLabel]}),[content]);let editor,pad=!0;void 0!==CustomEditor?(pad=!0!==CustomEditor.disablePadding,editor=react.createElement(CustomEditor,{isHighlighted:highlight,onChange:setTempValue,value:targetValue,onFinishedEditing:onCustomFinishedEditing})):void 0!==CellEditor&&(editor=react.createElement(CellEditor,{forceEditMode:forceEditMode,isHighlighted:highlight,onChange:setTempValue,value:targetValue,onFinishedEditing:e=>onFinishEditing(null!=e?e:tempValue,[0,0]),onKeyDown:onKeyDown,target:target,imageEditorOverride:imageEditorOverride,markdownDivCreateNode:markdownDivCreateNode}));const portalElement=document.getElementById("portal");if(null===portalElement)return console.error('Cannot open Data Grid overlay editor, because portal not found.  Please add `<div id="portal" />` as the last child of your `<body>`.'),null;return Object(react_dom.createPortal)(react.createElement(click_outside_container_ClickOutsideContainer,{className:className,onClickOutside:onClickOutside},react.createElement(DataGridOverlayEditorStyle,{as:!0===useLabel?"label":void 0,targetRect:target,pad:pad},react.createElement("div",{className:"clip-region",onKeyDown:void 0===CustomEditor?void 0:onKeyDown},editor))),portalElement)};try{datagridoverlayeditor.displayName="datagridoverlayeditor",datagridoverlayeditor.__docgenInfo={description:"",displayName:"datagridoverlayeditor",props:{target:{defaultValue:null,description:"",name:"target",required:!0,type:{name:"Rectangle"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"GridCell"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onFinishEditing:{defaultValue:null,description:"",name:"onFinishEditing",required:!0,type:{name:"(newCell: GridCell, movement: readonly [0 | 1 | -1, 0 | 1 | -1]) => void"}},forceEditMode:{defaultValue:null,description:"",name:"forceEditMode",required:!0,type:{name:"boolean"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!0,type:{name:"boolean"}},imageEditorOverride:{defaultValue:null,description:"",name:"imageEditorOverride",required:!1,type:{name:"ImageEditorType"}},markdownDivCreateNode:{defaultValue:null,description:"",name:"markdownDivCreateNode",required:!1,type:{name:"(content: string) => DocumentFragment"}},provideEditor:{defaultValue:null,description:"",name:"provideEditor",required:!1,type:{name:"ProvideEditorCallback<GridCell>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/data-grid-overlay-editor.tsx#datagridoverlayeditor"]={docgenInfo:datagridoverlayeditor.__docgenInfo,name:"datagridoverlayeditor",path:"packages/core/src/data-grid-overlay-editor/data-grid-overlay-editor.tsx#datagridoverlayeditor"})}catch(__react_docgen_typescript_loader_error){}var scrolling_data_grid=__webpack_require__(196),utils=__webpack_require__(20);const SearchWrapper=styles.b.div`
    position: absolute;
    top: 4px;
    right: 20px;

    background-color: ${p=>p.theme.bgCell};
    color: ${p=>p.theme.textDark};

    padding: 8px;
    border: 1px solid ${p=>p.theme.borderColor};

    font-size: 13px;

    transform: translateX(${p=>p.showSearch?0:400}px);
    transition: transform 0.15s;

    .search-bar-inner {
        display: flex;
    }

    .search-status {
        margin-top: 4px;
        font-size: 11px;
    }

    .search-progress {
        position: absolute;
        height: 4px;
        left: 0;
        bottom: 0;

        background-color: ${p=>p.theme.textLight};
    }

    input {
        width: 220px;
        color: ${p=>p.theme.textDark};
        border: none;
        border-width: 0;
        outline: none;
    }

    button {
        width: 24px;
        height: 24px;
        padding: 0;

        border: none;
        outline: none;
        background: none;

        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        color: ${p=>p.theme.textMedium};

        :hover {
            color: ${p=>p.theme.textDark};
        }

        .button-icon {
            width: 16px;
            height: 16px;
        }

        :disabled {
            ${utils.e}
        }
    }
`;try{SearchWrapper.displayName="SearchWrapper",SearchWrapper.__docgenInfo={description:"",displayName:"SearchWrapper",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},showSearch:{defaultValue:null,description:"",name:"showSearch",required:!0,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-search/data-grid-search-style.tsx#SearchWrapper"]={docgenInfo:SearchWrapper.__docgenInfo,name:"SearchWrapper",path:"packages/core/src/data-grid-search/data-grid-search-style.tsx#SearchWrapper"})}catch(__react_docgen_typescript_loader_error){}const upArrow=react.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},react.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),downArrow=react.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},react.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),closeX=react.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},react.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"}));var data_grid_search=p=>{const{getCellsForSelection:getCellsForSelection,onSearchResultsChanged:onSearchResultsChanged,searchColOffset:searchColOffset,showSearch:showSearch=!1,onSearchClose:onSearchClose,canvasRef:canvasRef,cellYOffset:cellYOffset,rows:rows,columns:columns,getCellContent:getCellContent}=p,[searchString,setSearchString]=react.useState(""),[searchStatus,setSearchStatus]=react.useState(),searchStatusRef=react.useRef(searchStatus);searchStatusRef.current=searchStatus;const inputRef=react.useRef(null),searchHandle=react.useRef(),[searchResults,setSearchResults]=react.useState([]),cancelSearch=react.useCallback((()=>{void 0!==searchHandle.current&&(window.cancelAnimationFrame(searchHandle.current),searchHandle.current=void 0)}),[]),getCellsForSelectionMangled=react.useCallback((selection=>{if(void 0!==getCellsForSelection)return getCellsForSelection(selection.range);if(void 0===selection.range)return[[getCellContent(selection.cell)]];const range=selection.range,result=[];for(let row=range.y;row<range.y+range.height;row++){const inner=[];for(let col=range.x;col<range.x+range.width;col++)inner.push(getCellContent([col+searchColOffset,row]));result.push(inner)}return result}),[getCellContent,getCellsForSelection,searchColOffset]),cellYOffsetRef=react.useRef(cellYOffset);cellYOffsetRef.current=cellYOffset;const beginSearch=react.useCallback((str=>{const regex=new RegExp(str.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"i");let startY=cellYOffsetRef.current,searchStride=Math.min(10,rows),rowsSearched=0;setSearchStatus(void 0),setSearchResults([]);const runningResult=[],tick=()=>{var _searchStatusRef$curr,_searchStatusRef$curr2;const tStart=performance.now(),rowsLeft=rows-rowsSearched,data=getCellsForSelectionMangled({cell:[0,0],range:{x:0,y:startY,width:columns.length-searchColOffset,height:Math.min(searchStride,rowsLeft,rows-startY)}});let added=!1;data.forEach(((d,row)=>d.forEach(((cell,col)=>{let testString;switch(cell.kind){case data_grid_types.b.Text:case data_grid_types.b.Number:testString=cell.displayData;break;case data_grid_types.b.Uri:case data_grid_types.b.Markdown:testString=cell.data;break;case data_grid_types.b.Boolean:testString=cell.data.toString();break;case data_grid_types.b.Image:case data_grid_types.b.Bubble:testString=cell.data.join("")}void 0!==testString&&regex.test(testString)&&(runningResult.push([col+searchColOffset,row+startY]),added=!0)}))));const tEnd=performance.now();added&&setSearchResults([...runningResult]),rowsSearched+=data.length,Object(support.a)(rowsSearched<=rows);const selectedIndex=null!==(_searchStatusRef$curr=null===(_searchStatusRef$curr2=searchStatusRef.current)||void 0===_searchStatusRef$curr2?void 0:_searchStatusRef$curr2.selectedIndex)&&void 0!==_searchStatusRef$curr?_searchStatusRef$curr:-1;setSearchStatus({results:runningResult.length,rowsSearched:rowsSearched,selectedIndex:selectedIndex}),null==onSearchResultsChanged||onSearchResultsChanged(runningResult,selectedIndex),startY+searchStride>=rows?startY=0:startY+=searchStride;const tElapsed=tEnd-tStart,scalar=10/Math.max(tElapsed,1);searchStride=Math.ceil(searchStride*scalar),rowsSearched<rows&&runningResult.length<1e3&&(searchHandle.current=window.requestAnimationFrame(tick))};cancelSearch(),searchHandle.current=window.requestAnimationFrame(tick)}),[cancelSearch,columns.length,getCellsForSelectionMangled,onSearchResultsChanged,rows,searchColOffset]),onClose=react.useCallback((()=>{var _canvasRef$current;null==onSearchClose||onSearchClose(),setSearchStatus(void 0),setSearchResults([]),null==onSearchResultsChanged||onSearchResultsChanged([],-1),cancelSearch(),null==canvasRef||null===(_canvasRef$current=canvasRef.current)||void 0===_canvasRef$current||_canvasRef$current.focus()}),[cancelSearch,canvasRef,onSearchClose,onSearchResultsChanged]),onSearchChange=react.useCallback((event=>{setSearchString(event.target.value),""===event.target.value?(setSearchStatus(void 0),setSearchResults([]),cancelSearch()):beginSearch(event.target.value)}),[beginSearch,cancelSearch]);react.useEffect((()=>{showSearch&&null!==inputRef.current&&(setSearchString(""),inputRef.current.focus({preventScroll:!0}))}),[showSearch]);const onNext=react.useCallback((ev=>{var _ev$stopPropagation;if(null==ev||null===(_ev$stopPropagation=ev.stopPropagation)||void 0===_ev$stopPropagation||_ev$stopPropagation.call(ev),void 0===searchStatus)return;const newIndex=(searchStatus.selectedIndex+1)%searchStatus.results;setSearchStatus({...searchStatus,selectedIndex:newIndex}),null==onSearchResultsChanged||onSearchResultsChanged(searchResults,newIndex)}),[searchStatus,onSearchResultsChanged,searchResults]),onPrev=react.useCallback((ev=>{var _ev$stopPropagation2;if(null==ev||null===(_ev$stopPropagation2=ev.stopPropagation)||void 0===_ev$stopPropagation2||_ev$stopPropagation2.call(ev),void 0===searchStatus)return;let newIndex=(searchStatus.selectedIndex-1)%searchStatus.results;newIndex<0&&(newIndex+=searchStatus.results),setSearchStatus({...searchStatus,selectedIndex:newIndex}),null==onSearchResultsChanged||onSearchResultsChanged(searchResults,newIndex)}),[onSearchResultsChanged,searchResults,searchStatus]),onSearchKeyDown=react.useCallback((event=>{(event.ctrlKey||event.metaKey)&&"f"===event.key||"Escape"===event.key?(onClose(),event.stopPropagation(),event.preventDefault()):"Enter"===event.key&&(event.shiftKey?onPrev():onNext())}),[onClose,onNext,onPrev]);react.useEffect((()=>()=>{cancelSearch()}),[cancelSearch]);const searchbox=react.useMemo((()=>{var _searchStatus$rowsSea,_searchStatus$results,_searchStatus$results2;let resultString;void 0!==searchStatus&&(resultString=searchStatus.results>=1e3?"over 1000":`${searchStatus.results} result${1!==searchStatus.results?"s":""}`,searchStatus.selectedIndex>=0&&(resultString=`${searchStatus.selectedIndex+1} of ${resultString}`));const cancelEvent=ev=>{ev.stopPropagation()},progressStyle={width:`${Math.floor((null!==(_searchStatus$rowsSea=null==searchStatus?void 0:searchStatus.rowsSearched)&&void 0!==_searchStatus$rowsSea?_searchStatus$rowsSea:0)/rows*100)}%`};return react.createElement(SearchWrapper,{showSearch:showSearch,onMouseDown:cancelEvent,onMouseMove:cancelEvent,onMouseUp:cancelEvent,onClick:cancelEvent},react.createElement("div",{className:"search-bar-inner"},react.createElement("input",{"data-testid":"search-input",ref:inputRef,onChange:onSearchChange,value:searchString,tabIndex:showSearch?void 0:-1,onKeyDownCapture:onSearchKeyDown}),react.createElement("button",{tabIndex:showSearch?void 0:-1,onClick:onPrev,disabled:0===(null!==(_searchStatus$results=null==searchStatus?void 0:searchStatus.results)&&void 0!==_searchStatus$results?_searchStatus$results:0)},upArrow),react.createElement("button",{tabIndex:showSearch?void 0:-1,onClick:onNext,disabled:0===(null!==(_searchStatus$results2=null==searchStatus?void 0:searchStatus.results)&&void 0!==_searchStatus$results2?_searchStatus$results2:0)},downArrow),void 0!==onSearchClose&&react.createElement("button",{"data-testid":"search-close-button",tabIndex:showSearch?void 0:-1,onClick:onClose},closeX)),void 0!==searchStatus&&react.createElement(react.Fragment,null,react.createElement("div",{className:"search-status"},react.createElement("div",{"data-testid":"search-result-area"},resultString)),react.createElement("div",{className:"search-progress",style:progressStyle})))}),[onClose,onNext,onPrev,onSearchChange,onSearchClose,onSearchKeyDown,rows,searchStatus,searchString,showSearch]);return react.createElement(react.Fragment,null,react.createElement(scrolling_data_grid.a,{cellXOffset:p.cellXOffset,cellYOffset:p.cellYOffset,columns:p.columns,enableGroups:p.enableGroups,freezeColumns:p.freezeColumns,getCellContent:p.getCellContent,groupHeaderHeight:p.groupHeaderHeight,headerHeight:p.headerHeight,lastRowSticky:p.lastRowSticky,lockColumns:p.lockColumns,rowHeight:p.rowHeight,onMouseMove:p.onMouseMove,rows:p.rows,verticalBorder:p.verticalBorder,canvasRef:p.canvasRef,className:p.className,disabledRows:p.disabledRows,drawCustomCell:p.drawCustomCell,drawHeader:p.drawHeader,experimental:p.experimental,getGroupDetails:p.getGroupDetails,gridRef:p.gridRef,headerIcons:p.headerIcons,isDraggable:p.isDraggable,maxColumnWidth:p.maxColumnWidth,onCellFocused:p.onCellFocused,onColumnMoved:p.onColumnMoved,onColumnResized:p.onColumnResized,onDragStart:p.onDragStart,onHeaderMenuClick:p.onHeaderMenuClick,onItemHovered:p.onItemHovered,onKeyUp:p.onKeyUp,onMouseDown:p.onMouseDown,onMouseUp:p.onMouseUp,onRowMoved:p.onRowMoved,onVisibleRegionChanged:p.onVisibleRegionChanged,overscrollX:p.overscrollX,rightElement:p.rightElement,rightElementSticky:p.rightElementSticky,scrollRef:p.scrollRef,scrollToEnd:p.scrollToEnd,selectedCell:p.selectedCell,selectedColumns:p.selectedColumns,selectedRows:p.selectedRows,showMinimap:p.showMinimap,smoothScrollX:p.smoothScrollX,smoothScrollY:p.smoothScrollY,translateX:p.translateX,translateY:p.translateY,onKeyDown:p.onKeyDown,prelightCells:searchResults}),searchbox)};try{datagridsearch.displayName="datagridsearch",datagridsearch.__docgenInfo={description:"",displayName:"datagridsearch",props:{getCellsForSelection:{defaultValue:null,description:"",name:"getCellsForSelection",required:!1,type:{name:"(selection: Rectangle) => readonly (readonly GridCell[])[]"}},onSearchResultsChanged:{defaultValue:null,description:"",name:"onSearchResultsChanged",required:!1,type:{name:"(results: readonly (readonly [number, number])[], navIndex: number) => void"}},searchColOffset:{defaultValue:null,description:"",name:"searchColOffset",required:!0,type:{name:"number"}},showSearch:{defaultValue:null,description:"",name:"showSearch",required:!1,type:{name:"boolean"}},onSearchClose:{defaultValue:null,description:"",name:"onSearchClose",required:!1,type:{name:"() => void"}},smoothScrollX:{defaultValue:null,description:"",name:"smoothScrollX",required:!1,type:{name:"boolean"}},smoothScrollY:{defaultValue:null,description:"",name:"smoothScrollY",required:!1,type:{name:"boolean"}},rowHeight:{defaultValue:null,description:"",name:"rowHeight",required:!0,type:{name:"number | ((index: number) => number)"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},cellXOffset:{defaultValue:null,description:"",name:"cellXOffset",required:!0,type:{name:"number"}},cellYOffset:{defaultValue:null,description:"",name:"cellYOffset",required:!0,type:{name:"number"}},translateX:{defaultValue:null,description:"",name:"translateX",required:!1,type:{name:"number"}},translateY:{defaultValue:null,description:"",name:"translateY",required:!1,type:{name:"number"}},freezeColumns:{defaultValue:null,description:"",name:"freezeColumns",required:!0,type:{name:"number"}},lastRowSticky:{defaultValue:null,description:"",name:"lastRowSticky",required:!0,type:{name:"boolean"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"readonly GridColumn[]"}},rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"number"}},groupHeaderHeight:{defaultValue:null,description:"",name:"groupHeaderHeight",required:!0,type:{name:"number"}},enableGroups:{defaultValue:null,description:"",name:"enableGroups",required:!0,type:{name:"boolean"}},canvasRef:{defaultValue:null,description:"",name:"canvasRef",required:!1,type:{name:"MutableRefObject<HTMLCanvasElement>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},getCellContent:{defaultValue:null,description:"",name:"getCellContent",required:!0,type:{name:"(cell: readonly [number, number]) => InnerGridCell"}},getGroupDetails:{defaultValue:null,description:"",name:"getGroupDetails",required:!1,type:{name:"GroupDetailsCallback"}},onHeaderMenuClick:{defaultValue:null,description:"",name:"onHeaderMenuClick",required:!1,type:{name:"(col: number, screenPosition: Rectangle) => void"}},selectedRows:{defaultValue:null,description:"",name:"selectedRows",required:!1,type:{name:"CompactSelection"}},selectedColumns:{defaultValue:null,description:"",name:"selectedColumns",required:!1,type:{name:"CompactSelection"}},selectedCell:{defaultValue:null,description:"",name:"selectedCell",required:!1,type:{name:"GridSelection"}},disabledRows:{defaultValue:null,description:"",name:"disabledRows",required:!1,type:{name:"CompactSelection"}},onItemHovered:{defaultValue:null,description:"",name:"onItemHovered",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseMove:{defaultValue:null,description:"",name:"onMouseMove",required:!0,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"(args: GridMouseEventArgs, isOutside: boolean) => void"}},onCellFocused:{defaultValue:null,description:"",name:"onCellFocused",required:!1,type:{name:"(args: readonly [number, number]) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: GridKeyEventArgs) => void"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"(event: GridKeyEventArgs) => void"}},verticalBorder:{defaultValue:null,description:"",name:"verticalBorder",required:!0,type:{name:"(col: number) => boolean"}},isDraggable:{defaultValue:null,description:"",name:"isDraggable",required:!1,type:{name:"boolean"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"(args: GridDragEventArgs) => void"}},drawCustomCell:{defaultValue:null,description:"",name:"drawCustomCell",required:!1,type:{name:"DrawCustomCellCallback"}},drawHeader:{defaultValue:null,description:"",name:"drawHeader",required:!1,type:{name:"DrawHeaderCallback"}},experimental:{defaultValue:null,description:"",name:"experimental",required:!1,type:{name:"{ readonly paddingRight?: number; readonly paddingBottom?: number; readonly disableFirefoxRescaling?: boolean; readonly isSubGrid?: boolean; }"}},headerIcons:{defaultValue:null,description:"",name:"headerIcons",required:!1,type:{name:"SpriteMap"}},onRowMoved:{defaultValue:null,description:"",name:"onRowMoved",required:!1,type:{name:"(startIndex: number, endIndex: number) => void"}},onColumnMoved:{defaultValue:null,description:"",name:"onColumnMoved",required:!1,type:{name:"(startIndex: number, endIndex: number) => void"}},onColumnResized:{defaultValue:null,description:"",name:"onColumnResized",required:!1,type:{name:"(column: GridColumn, newSize: number) => void"}},gridRef:{defaultValue:null,description:"",name:"gridRef",required:!1,type:{name:"MutableRefObject<DataGridRef>"}},maxColumnWidth:{defaultValue:null,description:"",name:"maxColumnWidth",required:!1,type:{name:"number"}},lockColumns:{defaultValue:null,description:"",name:"lockColumns",required:!0,type:{name:"number"}},onVisibleRegionChanged:{defaultValue:null,description:"",name:"onVisibleRegionChanged",required:!1,type:{name:"(range: Rectangle, tx?: number, ty?: number) => void"}},scrollToEnd:{defaultValue:null,description:"",name:"scrollToEnd",required:!1,type:{name:"boolean"}},scrollRef:{defaultValue:null,description:"",name:"scrollRef",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},overscrollX:{defaultValue:null,description:"",name:"overscrollX",required:!1,type:{name:"number"}},rightElementSticky:{defaultValue:null,description:"",name:"rightElementSticky",required:!1,type:{name:"boolean"}},rightElement:{defaultValue:null,description:"",name:"rightElement",required:!1,type:{name:"ReactNode"}},showMinimap:{defaultValue:null,description:"",name:"showMinimap",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-search/data-grid-search.tsx#datagridsearch"]={docgenInfo:datagridsearch.__docgenInfo,name:"datagridsearch",path:"packages/core/src/data-grid-search/data-grid-search.tsx#datagridsearch"})}catch(__react_docgen_typescript_loader_error){}var browser_detect=__webpack_require__(105),styled_components_browser_esm=__webpack_require__(7),data_grid_lib=__webpack_require__(10);const GroupRename=p=>{const{bounds:bounds,group:group,onClose:onClose,canvasBounds:canvasBounds,onFinish:onFinish}=p,[value,setValue]=react_default.a.useState(group);return react_default.a.createElement(_StyledClickOutsideContainer,{style:{position:"absolute",left:bounds.x-canvasBounds.left+1,top:bounds.y-canvasBounds.top,width:bounds.width-2,height:bounds.height},onClickOutside:onClose},react_default.a.createElement(_StyledInput,{"data-testid":"group-rename-input",value:value,onBlur:onClose,onFocus:e=>e.target.setSelectionRange(0,value.length),onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"===e.key?onFinish(value):"Escape"===e.key&&onClose()},autoFocus:!0,$_css:Math.max(16,bounds.height-10)}))};var _StyledClickOutsideContainer=Object(styled_components_browser_esm.c)(click_outside_container_ClickOutsideContainer).withConfig({displayName:"group-rename___StyledClickOutsideContainer",componentId:"sc-1luhmq4-0"})(["padding:0 8px;display:flex;align-items:center;background-color:",";"],(t=>t.theme.bgHeader)),_StyledInput=Object(styled_components_browser_esm.c)("input").withConfig({displayName:"group-rename___StyledInput",componentId:"sc-1luhmq4-1"})(["flex-grow:1;border:none;outline:none;background-color:",";border-radius:9px;padding:0 8px;box-shadow:0 0 0 1px ",";color:",";min-height:","px;font:"," ",";"],(t=>t.theme.bgHeaderHasFocus),(t=>t.theme.borderColor),(t=>t.theme.textGroupHeader),(p=>p.$_css),(t=>t.theme.headerFontStyle),(t=>t.theme.fontFamily));function data_editor_extends(){return data_editor_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},data_editor_extends.apply(this,arguments)}const loadingCell={kind:data_grid_types.b.Loading,allowOverlay:!1},DataEditor=react.forwardRef(((p,forwardedRef)=>{var _gridSelection$cell,_p$experimental;const[gridSelectionInner,setGridSelectionInner]=react.useState(),[selectedColumnsInner,setSelectedColumnsInner]=react.useState(data_grid_types.a.empty()),[selectedRowsInner,setSelectedRowsInner]=react.useState(data_grid_types.a.empty()),[overlay,setOverlay]=react.useState(),canvasRef=react.useRef(null),mouseState=react.useRef(),scrollRef=react.useRef(null),scrollTimer=react.useRef(),lastSent=react.useRef(),{isDraggable:isDraggable=!1,getCellsForSelection:getCellsForSelection,rowMarkers:rowMarkers="none",rowHeight:rowHeight=34,headerHeight:headerHeight=36,rowMarkerWidth:rowMarkerWidthRaw,imageEditorOverride:imageEditorOverride,markdownDivCreateNode:markdownDivCreateNode}=p,{columns:columns,rows:rows,getCellContent:getCellContent,onCellClicked:onCellClicked,onHeaderClicked:onHeaderClicked,onGroupHeaderClicked:onGroupHeaderClicked,onGroupHeaderRenamed:onGroupHeaderRenamed,onCellEdited:onCellEdited,enableDownfill:enableDownfill=!1,onRowAppended:onRowAppended,onColumnMoved:onColumnMoved,drawCell:drawCell,drawCustomCell:drawCustomCell,onDeleteRows:onDeleteRows,onDragStart:onDragStart,onMouseMove:onMouseMove,onPaste:onPaste,groupHeaderHeight:groupHeaderHeight=headerHeight,freezeColumns:freezeColumns=0,rowSelectionMode:rowSelectionMode="auto",onHeaderMenuClick:onHeaderMenuClick,getGroupDetails:getGroupDetails,onItemHovered:onItemHovered,onVisibleRegionChanged:onVisibleRegionChanged,selectedColumns:selectedColumnsOuter,onSelectedColumnsChange:setSelectedColumnsOuter,selectedRows:selectedRowsOuter,onSelectedRowsChange:setSelectedRowsOuter,gridSelection:gridSelectionOuter,onGridSelectionChange:onGridSelectionChange,provideEditor:provideEditor,trailingRowOptions:trailingRowOptions,verticalBorder:verticalBorder,...rest}=p,rowMarkerWidth=null!=rowMarkerWidthRaw?rowMarkerWidthRaw:rows>1e4?48:rows>1e3?44:rows>100?36:32,hasRowMarkers="none"!==rowMarkers,rowMarkerOffset=hasRowMarkers?1:0,showTrailingBlankRow=void 0!==onRowAppended,lastRowSticky=!0===(null==trailingRowOptions?void 0:trailingRowOptions.sticky),gridSelectionOuterMangled=react.useMemo((()=>void 0===gridSelectionOuter?void 0:{cell:[gridSelectionOuter.cell[0]+rowMarkerOffset,gridSelectionOuter.cell[1]],range:{...gridSelectionOuter.range,x:gridSelectionOuter.range.x+rowMarkerOffset}}),[gridSelectionOuter,rowMarkerOffset]),gridSelection=null!=gridSelectionOuterMangled?gridSelectionOuterMangled:gridSelectionInner,setGridSelection=react.useCallback((newVal=>{void 0!==onGridSelectionChange?onGridSelectionChange(void 0===newVal?void 0:{cell:[newVal.cell[0]-rowMarkerOffset,newVal.cell[1]],range:{...newVal.range,x:newVal.range.x-rowMarkerOffset}}):setGridSelectionInner(newVal)}),[onGridSelectionChange,rowMarkerOffset]),selectedRows=null!=selectedRowsOuter?selectedRowsOuter:selectedRowsInner,setSelectedRows=null!=setSelectedRowsOuter?setSelectedRowsOuter:setSelectedRowsInner,mangledOuterCols=null==selectedColumnsOuter?void 0:selectedColumnsOuter.offset(rowMarkerOffset),selectedColumns=null!=mangledOuterCols?mangledOuterCols:selectedColumnsInner,setSelectedColumns=react.useCallback(((newColumns,trigger)=>{void 0!==setSelectedColumnsOuter?null==setSelectedColumnsOuter||setSelectedColumnsOuter(newColumns.offset(-rowMarkerOffset),trigger):setSelectedColumnsInner(newColumns)}),[rowMarkerOffset,setSelectedColumnsOuter]),enableGroups=react.useMemo((()=>columns.some((c=>void 0!==c.group))),[columns]),totalHeaderHeight=enableGroups?headerHeight+groupHeaderHeight:headerHeight,[visibleRegion,setVisibleRegion]=react.useState({x:0,y:0,width:1,height:1}),cellXOffset=visibleRegion.x+rowMarkerOffset,cellYOffset=visibleRegion.y,gridRef=react.useRef(null),focus=react.useCallback((immediate=>{var _gridRef$current;!0===immediate?null===(_gridRef$current=gridRef.current)||void 0===_gridRef$current||_gridRef$current.focus():window.requestAnimationFrame((()=>{var _gridRef$current2;null===(_gridRef$current2=gridRef.current)||void 0===_gridRef$current2||_gridRef$current2.focus()}))}),[]),mangledRows=showTrailingBlankRow?rows+1:rows,mangledOnCellEdited=react.useCallback(((cell,newValue)=>{null==onCellEdited||onCellEdited([cell[0]-rowMarkerOffset,cell[1]],newValue)}),[onCellEdited,rowMarkerOffset]),mangledCols=react.useMemo((()=>"none"===rowMarkers?columns:[{title:"",width:rowMarkerWidth,icon:void 0,hasMenu:!1,style:"normal"},...columns]),[columns,rowMarkerWidth,rowMarkers]),getMangedCellContent=react.useCallback((_ref=>{let[col,row]=_ref;const isTrailing=showTrailingBlankRow&&row===mangledRows-1;if(0===col&&hasRowMarkers)return isTrailing?loadingCell:{kind:data_grid_types.d.Marker,allowOverlay:!1,checked:selectedRows.hasIndex(row),markerKind:rowMarkers,row:row};if(isTrailing){var _trailingRowOptions$h;const isFirst=col===rowMarkerOffset,display=isFirst&&null!==(_trailingRowOptions$h=null==trailingRowOptions?void 0:trailingRowOptions.hint)&&void 0!==_trailingRowOptions$h?_trailingRowOptions$h:"";return{kind:data_grid_types.d.NewRow,hint:display,isFirst:isFirst,allowOverlay:!1}}return getCellContent([col-rowMarkerOffset,row])}),[showTrailingBlankRow,mangledRows,hasRowMarkers,selectedRows,rowMarkers,rowMarkerOffset,null==trailingRowOptions?void 0:trailingRowOptions.hint,getCellContent]),reselect=react.useCallback(((bounds,initialValue)=>{if(void 0===gridSelection)return;const[col,row]=gridSelection.cell,c=getMangedCellContent([col,row]);if(c.kind!==data_grid_types.b.Boolean&&c.allowOverlay){let content=c;if(void 0!==initialValue)switch(content.kind){case data_grid_types.b.Text:content={...content,data:initialValue};break;case data_grid_types.b.Number:content={...content,data:Object(support.c)((()=>Number.parseFloat(initialValue)),0)};break;case data_grid_types.b.Markdown:case data_grid_types.b.Uri:content={...content,data:initialValue}}setOverlay({target:bounds,content:content,cell:[col,row],highlight:void 0===initialValue,forceEditMode:void 0!==initialValue})}}),[getMangedCellContent,gridSelection]),focusOnRowFromTrailingBlankRow=react.useCallback(((col,row)=>{var _gridRef$current3;const bounds=null===(_gridRef$current3=gridRef.current)||void 0===_gridRef$current3?void 0:_gridRef$current3.getBounds(col,row);if(void 0===bounds||null===scrollRef.current)return;let content=getMangedCellContent([col,row]);if(content.allowOverlay){switch(content.kind){case data_grid_types.b.Text:content={...content,data:""};break;case data_grid_types.b.Number:content={...content,data:void 0};break;case data_grid_types.b.Markdown:case data_grid_types.b.Uri:content={...content,data:""}}setOverlay({target:bounds,content:content,highlight:!0,cell:[col,row],forceEditMode:!0})}}),[getMangedCellContent]),scrollTo=react.useCallback((function(col,row){let dir=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"both";if(null!==scrollRef.current){const grid=gridRef.current,canvas=canvasRef.current;if(null!==grid&&null!==canvas){const bounds=grid.getBounds(col,row),scrollBounds=canvas.getBoundingClientRect();if(void 0!==bounds){let scrollX=0,scrollY=0;const sLeft=scrollBounds.left+rowMarkerOffset*rowMarkerWidth,sRight=scrollBounds.right,sTop=scrollBounds.top+totalHeaderHeight;let trailingRowHeight=0;lastRowSticky&&(trailingRowHeight="number"==typeof rowHeight?rowHeight:rowHeight(rows));const sBottom=scrollBounds.bottom-trailingRowHeight;sLeft>bounds.x?scrollX=bounds.x-sLeft:sRight<bounds.x+bounds.width&&(scrollX=bounds.x+bounds.width-sRight),sTop>bounds.y?scrollY=bounds.y-sTop:sBottom<bounds.y+bounds.height&&(scrollY=bounds.y+bounds.height-sBottom),"vertical"===dir?scrollX=0:"horizontal"===dir&&(scrollY=0),0===scrollX&&0===scrollY||scrollRef.current.scrollTo(scrollX+scrollRef.current.scrollLeft,scrollY+scrollRef.current.scrollTop)}}}}),[totalHeaderHeight,lastRowSticky,rowHeight,rowMarkerOffset,rowMarkerWidth,rows]);react.useImperativeHandle(forwardedRef,(()=>({updateCells:function(){for(var _gridRef$current4,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return null===(_gridRef$current4=gridRef.current)||void 0===_gridRef$current4?void 0:_gridRef$current4.damage(...args)},getBounds:function(){for(var _gridRef$current5,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return null===(_gridRef$current5=gridRef.current)||void 0===_gridRef$current5?void 0:_gridRef$current5.getBounds(...args)},scrollTo:scrollTo})),[scrollTo]);const focusCallback=react.useRef(focusOnRowFromTrailingBlankRow),getCellContentRef=react.useRef(getCellContent),rowsRef=react.useRef(rows);focusCallback.current=focusOnRowFromTrailingBlankRow,getCellContentRef.current=getCellContent,rowsRef.current=rows;const appendRow=react.useCallback((async col=>{const appendResult=null==onRowAppended?void 0:onRowAppended();let r,bottom=!0;void 0!==appendResult&&(r=await appendResult,"top"===r&&(bottom=!1),"number"==typeof r&&(bottom=!1));let backoff=0;const doFocus=()=>{if(rowsRef.current<=rows)return backoff<500&&window.setTimeout(doFocus,backoff),void(backoff=50+2*backoff);const row="number"==typeof r?r:bottom?rows:0;scrollTo(col,row),setGridSelection({cell:[col,row],range:{x:col,y:row,width:1,height:1}});const cell=getCellContentRef.current([col-rowMarkerOffset,row]);cell.allowOverlay&&Object(data_grid_types.g)(cell)&&!0!==cell.readonly&&window.setTimeout((()=>{focusCallback.current(col,row)}),0)};doFocus()}),[onRowAppended,rowMarkerOffset,rows,scrollTo,setGridSelection]),lastSelectedRowRef=react.useRef(),lastSelectedColRef=react.useRef(),onMouseDown=react.useCallback((args=>{mouseState.current={previousSelection:gridSelection};const isMultiKey=browser_detect.b.value?args.metaKey:args.ctrlKey;if("cell"===args.kind){lastSelectedColRef.current=void 0;const[col,row]=args.location;if(0===col&&hasRowMarkers){if(!0===showTrailingBlankRow&&row===rows||"number"===rowMarkers)return;setGridSelection(void 0),setOverlay(void 0),focus(),setSelectedColumns(data_grid_types.a.empty(),"selection");const isSelected=selectedRows.hasIndex(row),lastHighlighted=lastSelectedRowRef.current;if(args.shiftKey&&void 0!==lastHighlighted&&selectedRows.hasIndex(lastHighlighted)){const newSlice=[Math.min(lastHighlighted,row),Math.max(lastHighlighted,row)+1];setSelectedRows(isMultiKey||"multi"===rowSelectionMode?selectedRows.add(newSlice):data_grid_types.a.fromSingleSelection(newSlice))}else isMultiKey||args.isTouch||"multi"===rowSelectionMode?isSelected?setSelectedRows(selectedRows.remove(row)):(setSelectedRows(selectedRows.add(row)),lastSelectedRowRef.current=row):isSelected&&1===selectedRows.length?setSelectedRows(data_grid_types.a.empty()):(setSelectedRows(data_grid_types.a.fromSingleSelection(row)),lastSelectedRowRef.current=row)}else if(col>=rowMarkerOffset&&showTrailingBlankRow&&row===rows)appendRow(col);else if((null==gridSelection?void 0:gridSelection.cell[0])!==col||gridSelection.cell[1]!==row){const isLastStickyRow=lastRowSticky&&row===rows,startedFromLastSticky=lastRowSticky&&void 0!==gridSelection&&gridSelection.cell[1]===rows;if(args.shiftKey&&void 0!==gridSelection&&!startedFromLastSticky){if(isLastStickyRow)return;const[sCol,sRow]=gridSelection.cell,left=Math.min(col,sCol),right=Math.max(col,sCol),top=Math.min(row,sRow),bottom=Math.max(row,sRow);setGridSelection({...gridSelection,range:{x:left,y:top,width:right-left+1,height:bottom-top+1}}),lastSelectedRowRef.current=void 0,focus()}else setGridSelection({cell:[col,row],range:{x:col,y:row,width:1,height:1}}),setSelectedColumns(data_grid_types.a.empty(),"selection"),setSelectedRows(data_grid_types.a.empty()),lastSelectedRowRef.current=void 0,setOverlay(void 0),focus()}}else if("header"===args.kind){const[col]=args.location;if(setGridSelection(void 0),setOverlay(void 0),hasRowMarkers&&0===col)lastSelectedRowRef.current=void 0,lastSelectedColRef.current=void 0,selectedRows.length!==rows?setSelectedRows(data_grid_types.a.fromSingleSelection([0,rows])):setSelectedRows(data_grid_types.a.empty()),focus();else{const lastCol=lastSelectedColRef.current;if(args.shiftKey&&void 0!==lastCol&&selectedColumns.hasIndex(lastCol)){const newSlice=[Math.min(lastCol,col),Math.max(lastCol,col)+1];setSelectedColumns(isMultiKey?selectedColumns.add(newSlice):data_grid_types.a.fromSingleSelection(newSlice),"header")}else isMultiKey?(selectedColumns.hasIndex(col)?setSelectedColumns(selectedColumns.remove(col),"header"):setSelectedColumns(selectedColumns.add(col),"header"),lastSelectedColRef.current=col):(setSelectedColumns(data_grid_types.a.fromSingleSelection(col),"header"),lastSelectedColRef.current=col);setSelectedRows(data_grid_types.a.empty()),lastSelectedRowRef.current=void 0,focus()}}else if("out-of-bounds"===args.kind)setGridSelection(void 0),setOverlay(void 0),focus(),setSelectedColumns(data_grid_types.a.empty(),"selection"),setSelectedRows(data_grid_types.a.empty()),lastSelectedRowRef.current=void 0,lastSelectedColRef.current=void 0;else if("group-header"===args.kind){const[col]=args.location;if(col<rowMarkerOffset)return;const needle=mangledCols[col];let start=col,end=col;for(let i=col-1;i>=rowMarkerOffset&&Object(data_grid_lib.n)(needle.group,mangledCols[i].group);i--)start--;for(let i=col+1;i<mangledCols.length&&Object(data_grid_lib.n)(needle.group,mangledCols[i].group);i++)end++;if(setSelectedRows(data_grid_types.a.empty()),setGridSelection(void 0),focus(),isMultiKey)if(selectedColumns.hasAll([start,end+1])){let newVal=selectedColumns;for(let index=start;index<=end;index++)newVal=newVal.remove(index);setSelectedColumns(newVal,"group")}else setSelectedColumns(selectedColumns.add([start,end+1]),"group");else setSelectedColumns(data_grid_types.a.fromSingleSelection([start,end+1]),"group")}}),[gridSelection,hasRowMarkers,rowMarkerOffset,showTrailingBlankRow,rows,rowMarkers,setGridSelection,focus,setSelectedColumns,selectedRows,rowSelectionMode,setSelectedRows,appendRow,lastRowSticky,selectedColumns,mangledCols]),[renameGroup,setRenameGroup]=react.useState(),onMouseUp=react.useCallback(((args,isOutside)=>{var _mouse$previousSelect;const mouse=mouseState.current;if(mouseState.current=void 0,isOutside)return;let prevented=!1;const preventDefault=()=>{prevented=!0};if(void 0!==scrollTimer.current&&window.clearInterval(scrollTimer.current),"header"===args.kind&&(null==onHeaderClicked||onHeaderClicked(args.location[0]-rowMarkerOffset,{...args,preventDefault:preventDefault})),"group-header"===args.kind&&(null==onGroupHeaderClicked||onGroupHeaderClicked(args.location[0]-rowMarkerOffset,{...args,preventDefault:preventDefault})),"cell"===args.kind&&(null==onCellClicked||onCellClicked([args.location[0]-rowMarkerOffset,args.location[1]],{...args,preventDefault:preventDefault}),void 0!==gridSelection&&void 0!==(null==mouse||null===(_mouse$previousSelect=mouse.previousSelection)||void 0===_mouse$previousSelect?void 0:_mouse$previousSelect.cell)&&!prevented)){const[col,row]=args.location,[selectedCol,selectedRow]=gridSelection.cell,[prevCol,prevRow]=mouse.previousSelection.cell,c=getMangedCellContent([col,row]),r=c.kind===data_grid_types.b.Custom?void 0:data_grid_cells.a[c.kind];if(void 0!==r&&void 0!==r.onClick){const newVal=r.onClick(c,args.localEventX,args.localEventY,args.bounds);var _gridRef$current6;if(void 0!==newVal&&!Object(data_grid_types.f)(newVal)&&Object(data_grid_types.e)(newVal))mangledOnCellEdited(args.location,newVal),null===(_gridRef$current6=gridRef.current)||void 0===_gridRef$current6||_gridRef$current6.damage([{cell:args.location}])}col===selectedCol&&col===prevCol&&row===selectedRow&&row===prevRow&&reselect(args.bounds)}}),[getMangedCellContent,gridSelection,mangledOnCellEdited,onCellClicked,onGroupHeaderClicked,onHeaderClicked,reselect,rowMarkerOffset]),onHeaderMenuClickInner=react.useCallback(((col,screenPosition)=>{null==onHeaderMenuClick||onHeaderMenuClick(col-rowMarkerOffset,screenPosition)}),[onHeaderMenuClick,rowMarkerOffset]),onVisibleRegionChangedImpl=react.useCallback(((region,tx,ty)=>{const newRegion={...region,x:region.x-rowMarkerOffset,height:showTrailingBlankRow&&region.y+region.height>=rows?region.height-1:region.height,tx:tx,ty:ty};setVisibleRegion(newRegion),null==onVisibleRegionChanged||onVisibleRegionChanged(newRegion,tx,ty)}),[onVisibleRegionChanged,rowMarkerOffset,rows,showTrailingBlankRow]),onColumnMovedImpl=react.useCallback(((startIndex,endIndex)=>{null==onColumnMoved||onColumnMoved(startIndex-rowMarkerOffset,endIndex-rowMarkerOffset),setSelectedColumns(data_grid_types.a.fromSingleSelection(endIndex),"drag")}),[onColumnMoved,rowMarkerOffset,setSelectedColumns]),onDragStartImpl=react.useCallback((args=>{null==onDragStart||onDragStart({...args,location:[args.location[0]-rowMarkerOffset,args.location[1]]})}),[onDragStart,rowMarkerOffset]),onMouseMoveImpl=react.useCallback((args=>{const a={...args,location:[args.location[0]-rowMarkerOffset,args.location[1]]};null==onMouseMove||onMouseMove(a)}),[onMouseMove,rowMarkerOffset]),onItemHoveredImpl=react.useCallback((args=>{if(void 0!==mouseState.current&&void 0!==gridSelection&&!isDraggable){const[selectedCol,selectedRow]=gridSelection.cell;let[col,row]=args.location;const startedFromLastStickyRow=lastRowSticky&&selectedRow===rows;if(lastRowSticky&&row===rows||startedFromLastStickyRow)return;0===col&&hasRowMarkers&&(col=1);const deltaX=col-selectedCol,deltaY=(null!=row?row:0)-selectedRow,newRange={x:deltaX>=0?selectedCol:col,y:deltaY>=0?selectedRow:null!=row?row:0,width:Math.abs(deltaX)+1,height:Math.abs(deltaY)+1};if(setGridSelection({...gridSelection,range:newRange}),"out-of-bounds"===args.kind&&null!==scrollRef.current){const[horizontal,vertical]=args.direction;let scrollX=0,scrollY=0;-1===horizontal?scrollX=columns[columns.length-1].width:1===horizontal&&(scrollX=-columns[0].width),0!==vertical&&(scrollY="number"==typeof rowHeight?rowHeight*vertical:rowHeight(null!=row?row:0)*vertical),void 0!==scrollTimer.current&&window.clearInterval(scrollTimer.current),scrollTimer.current=window.setInterval((()=>{var _scrollRef$current;null===(_scrollRef$current=scrollRef.current)||void 0===_scrollRef$current||_scrollRef$current.scrollBy(-100*horizontal,scrollY)}),200),scrollRef.current.scrollBy(scrollX,scrollY)}else void 0!==scrollTimer.current&&window.clearInterval(scrollTimer.current)}null==onItemHovered||onItemHovered({...args,location:[args.location[0]-rowMarkerOffset,args.location[1]]})}),[gridSelection,isDraggable,onItemHovered,rowMarkerOffset,lastRowSticky,rows,hasRowMarkers,setGridSelection,columns,rowHeight]),copyToClipboard=react.useCallback((cells=>{function escape(str){return/\n|"|\t/.test(str)&&(str=`"${str.replace(/"/g,'""')}"`),str}const formatCell=cell=>{switch(cell.kind){case data_grid_types.b.Text:case data_grid_types.b.Number:return escape(cell.displayData);case data_grid_types.b.Markdown:case data_grid_types.b.RowID:case data_grid_types.b.Uri:return escape(cell.data);case data_grid_types.b.Image:case data_grid_types.b.Bubble:return cell.data.reduce(((pv,cv)=>`${escape(pv)},${escape(cv)}`));case data_grid_types.b.Boolean:return cell.data?"TRUE":"FALSE";case data_grid_types.b.Loading:return"#LOADING";case data_grid_types.b.Protected:return"************";case data_grid_types.b.Drilldown:return cell.data.map((i=>i.text)).reduce(((pv,cv)=>`${escape(pv)},${escape(cv)}`));case data_grid_types.b.Custom:return escape(cell.copyData);default:Object(support.b)(cell)}},str=cells.map((row=>row.map(formatCell).join("\t"))).join("\n");window.navigator.clipboard.writeText(str)}),[]),adjustSelection=react.useCallback((direction=>{var _oldRange$x,_oldRange$y,_oldRange$width,_oldRange$height;if(void 0===gridSelection)return;const[x,y]=direction,[col,row]=gridSelection.cell,oldRange=gridSelection.range;let left=null!==(_oldRange$x=null==oldRange?void 0:oldRange.x)&&void 0!==_oldRange$x?_oldRange$x:col,top=null!==(_oldRange$y=null==oldRange?void 0:oldRange.y)&&void 0!==_oldRange$y?_oldRange$y:row,width=null!==(_oldRange$width=null==oldRange?void 0:oldRange.width)&&void 0!==_oldRange$width?_oldRange$width:1,height=null!==(_oldRange$height=null==oldRange?void 0:oldRange.height)&&void 0!==_oldRange$height?_oldRange$height:1;let isTop=0===top-row;y<0&&1===height&&(isTop=!1);const heightDiff=isTop?y:-1*y;let isLeft=0===left-col;x<0&&1===width&&(isLeft=!1);const widthDiff=isLeft?x:-1*x;if(isTop){const maxHeight=rows-top;height+=heightDiff,height=Math.min(maxHeight,height),scrollTo(0,top+height-1,"vertical")}else top-=heightDiff,height=Math.abs(top-row)+1,scrollTo(0,top,"vertical");isLeft?(width+=widthDiff,scrollTo(left+width-1,0,"horizontal")):(left-=widthDiff,left=Math.max(rowMarkerOffset,left),width=Math.abs(left-col)+1,scrollTo(left,0,"horizontal")),setGridSelection({...gridSelection,range:{x:left,y:top,width:width,height:height}})}),[gridSelection,rowMarkerOffset,rows,scrollTo,setGridSelection]),updateSelectedCell=react.useCallback((function(col,row){let fromEditingTrailingRow=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const rowMax=mangledRows-(fromEditingTrailingRow?0:1);return col=Object(fp.clamp)(rowMarkerOffset,columns.length-1+rowMarkerOffset,col),row=Object(fp.clamp)(0,rowMax,row),(col!==(null==gridSelection?void 0:gridSelection.cell[0])||row!==(null==gridSelection?void 0:gridSelection.cell[1]))&&(setGridSelection({cell:[col,row],range:{x:col,y:row,width:1,height:1}}),void 0!==lastSent.current&&lastSent.current[0]===col&&lastSent.current[1]===row&&(lastSent.current=void 0),scrollTo(col,row),!0)}),[mangledRows,rowMarkerOffset,columns.length,null==gridSelection?void 0:gridSelection.cell,setGridSelection,scrollTo]),onFinishEditing=react.useCallback(((newValue,movement)=>{void 0!==(null==overlay?void 0:overlay.cell)&&void 0!==newValue&&(null==mangledOnCellEdited||mangledOnCellEdited(overlay.cell,newValue),window.requestAnimationFrame((()=>{var _gridRef$current7;null===(_gridRef$current7=gridRef.current)||void 0===_gridRef$current7||_gridRef$current7.damage([{cell:overlay.cell}])}))),focus(!0),setOverlay(void 0);const[movX,movY]=movement;if(void 0!==gridSelection&&(0!==movX||0!==movY)){const isEditingTrailingRow=gridSelection.cell[1]===mangledRows-1&&void 0!==newValue;updateSelectedCell(gridSelection.cell[0]+movX,gridSelection.cell[1]+movY,isEditingTrailingRow)}}),[null==overlay?void 0:overlay.cell,focus,gridSelection,mangledOnCellEdited,mangledRows,updateSelectedCell]),[selCol,selRow]=null!==(_gridSelection$cell=null==gridSelection?void 0:gridSelection.cell)&&void 0!==_gridSelection$cell?_gridSelection$cell:[],onCellFocused=react.useCallback((cell=>{selCol===cell[0]&&selRow===cell[1]||(setGridSelection({cell:cell,range:{x:cell[0],y:cell[1],width:1,height:1}}),setSelectedRows(data_grid_types.a.empty()))}),[selCol,selRow,setGridSelection,setSelectedRows]),onKeyDown=react.useCallback((event=>{(async()=>{const overlayOpen=void 0!==overlay,shiftKey=event.shiftKey,isOSX=browser_detect.b.value,isPrimaryKey=isOSX?event.metaKey:event.ctrlKey,isDeleteKey="Delete"===event.key||isOSX&&"Backspace"===event.key;if("Escape"===event.key)return overlayOpen?void setOverlay(void 0):(setGridSelection(void 0),setSelectedRows(data_grid_types.a.empty()),void setSelectedColumns(data_grid_types.a.empty(),"selection"));if(isDeleteKey&&0!==selectedRows.length&&void 0===gridSelection)return event.cancel(),focus(),null==onDeleteRows||onDeleteRows(Array.from(selectedRows)),void setSelectedRows(data_grid_types.a.empty());function deleteRange(range){var _gridRef$current8;focus();const damaged=[];for(let x=range.x;x<range.x+range.width;x++)for(let y=range.y;y<range.y+range.height;y++){const cellValue=getCellContent([x-rowMarkerOffset,y]);if(Object(data_grid_types.e)(cellValue)&&cellValue.allowOverlay||cellValue.kind===data_grid_types.b.Boolean){var _r$onDelete;const r=data_grid_cells.a[cellValue.kind],newVal=null===(_r$onDelete=r.onDelete)||void 0===_r$onDelete?void 0:_r$onDelete.call(r,cellValue);void 0!==newVal&&(mangledOnCellEdited([x,y],newVal),damaged.push([x,y]))}}null===(_gridRef$current8=gridRef.current)||void 0===_gridRef$current8||_gridRef$current8.damage(damaged.map((x=>({cell:x}))))}if(isDeleteKey&&selectedColumns.length>0&&void 0===gridSelection){event.cancel();for(const col of selectedColumns)deleteRange({x:col,y:0,width:1,height:rows});return}if(void 0===gridSelection)return;let[col,row]=gridSelection.cell;if("Enter"===event.key&&void 0!==event.bounds)overlayOpen?(setOverlay(void 0),row++):row===rows&&showTrailingBlankRow?window.setTimeout((()=>{appendRow(col)}),0):(reselect(event.bounds),event.cancel());else if(68===event.keyCode&&isPrimaryKey&&gridSelection.range.height>1&&enableDownfill){var _gridRef$current9;const damage=[],r=gridSelection.range;for(let x=0;x<r.width;x++){const fillCol=x+r.x,fillVal=getMangedCellContent([fillCol,r.y]);if(!Object(data_grid_types.f)(fillVal)&&Object(data_grid_types.e)(fillVal))for(let y=1;y<r.height;y++){const target=[fillCol,y+r.y];damage.push(target),null==mangledOnCellEdited||mangledOnCellEdited(target,{...fillVal})}}null===(_gridRef$current9=gridRef.current)||void 0===_gridRef$current9||_gridRef$current9.damage(damage.map((c=>({cell:c})))),event.cancel()}else if("ArrowDown"===event.key)setOverlay(void 0),shiftKey?adjustSelection([0,isPrimaryKey?Number.MAX_SAFE_INTEGER:1]):row+=isPrimaryKey?Number.MAX_SAFE_INTEGER:1;else if("ArrowUp"===event.key)setOverlay(void 0),shiftKey?adjustSelection([0,isPrimaryKey?Number.MIN_SAFE_INTEGER:-1]):row+=isPrimaryKey?Number.MIN_SAFE_INTEGER:-1;else if("ArrowRight"===event.key)setOverlay(void 0),shiftKey?adjustSelection([isPrimaryKey?Number.MAX_SAFE_INTEGER:1,0]):col+=isPrimaryKey?Number.MAX_SAFE_INTEGER:1;else if("ArrowLeft"===event.key)setOverlay(void 0),shiftKey?adjustSelection([isPrimaryKey?Number.MIN_SAFE_INTEGER:-1,0]):col+=isPrimaryKey?Number.MIN_SAFE_INTEGER:-1;else if("Tab"===event.key)setOverlay(void 0),shiftKey?col--:col++;else if(isDeleteKey){event.cancel();deleteRange(gridSelection.range)}else if(!event.metaKey&&!event.ctrlKey&&String.fromCharCode(event.keyCode).match(/(\w|\s)/g)&&void 0!==event.bounds&&Object(data_grid_types.g)(getCellContent([col-rowMarkerOffset,Math.max(0,row-1)]))){if((!lastRowSticky||row!==rows)&&(visibleRegion.y>row||row>visibleRegion.y+visibleRegion.height||visibleRegion.x>col||col>visibleRegion.x+visibleRegion.width))return;let key=String.fromCharCode(event.keyCode);event.shiftKey||(key=key.toLowerCase()),reselect(event.bounds,key),event.cancel()}updateSelectedCell(col,row)&&event.cancel()})()}),[overlay,selectedRows,gridSelection,selectedColumns,enableDownfill,getCellContent,rowMarkerOffset,updateSelectedCell,setGridSelection,setSelectedRows,setSelectedColumns,focus,onDeleteRows,mangledOnCellEdited,rows,showTrailingBlankRow,appendRow,reselect,getMangedCellContent,adjustSelection,lastRowSticky,visibleRegion.y,visibleRegion.height,visibleRegion.x,visibleRegion.width]);Object(utils.g)("paste",react.useCallback((async()=>{var _scrollRef$current2,_canvasRef$current;function pasteToCell(inner,target,toPaste){if(!Object(data_grid_types.f)(inner)&&Object(data_grid_types.g)(inner)&&!0!==inner.readonly)switch(inner.kind){case data_grid_types.b.Text:case data_grid_types.b.Markdown:case data_grid_types.b.Uri:return null==mangledOnCellEdited||mangledOnCellEdited(target,{...inner,data:toPaste}),!0;case data_grid_types.b.Number:{const newNumber=Number.parseFloat(toPaste);return!Number.isNaN(newNumber)&&(null==mangledOnCellEdited||mangledOnCellEdited(target,{...inner,data:newNumber}),!0)}default:Object(support.b)(inner)}return!1}const focused=!0===(null===(_scrollRef$current2=scrollRef.current)||void 0===_scrollRef$current2?void 0:_scrollRef$current2.contains(document.activeElement))||!0===(null===(_canvasRef$current=canvasRef.current)||void 0===_canvasRef$current?void 0:_canvasRef$current.contains(document.activeElement));let target=null==gridSelection?void 0:gridSelection.cell;var _selectedColumns$firs,_selectedRows$first;void 0===target&&1===selectedColumns.length&&(target=[null!==(_selectedColumns$firs=selectedColumns.first())&&void 0!==_selectedColumns$firs?_selectedColumns$firs:0,0]);void 0===target&&1===selectedRows.length&&(target=[rowMarkerOffset,null!==(_selectedRows$first=selectedRows.first())&&void 0!==_selectedRows$first?_selectedRows$first:0]);if(focused&&void 0!==target){var _gridRef$current10;const text=await navigator.clipboard.readText(),[gridCol,gridRow]=target;if(void 0===onPaste){return void pasteToCell(getMangedCellContent(target),target,text)}const data=function unquote(str){function descape(s){return s.startsWith('"')&&s.endsWith('"')&&(s=s.slice(1,-1).replace(/""/g,'"')),s}let State;!function(State){State[State.None=0]="None",State[State.inString=1]="inString",State[State.inStringPostQuote=2]="inStringPostQuote"}(State||(State={}));const result=[];let current=[],start=0,state=State.None;str=str.trim().replace(/\r\n/g,"\n");let index=0;for(const char of str){switch(state){case State.None:"\t"===char||"\n"===char?(current.push(str.slice(start,index)),start=index+1,"\n"===char&&(result.push(current),current=[])):'"'===char&&(state=State.inString);break;case State.inString:'"'===char&&(state=State.inStringPostQuote);break;case State.inStringPostQuote:'"'===char?state=State.inString:"\t"===char||"\n"===char?(current.push(descape(str.slice(start,index))),start=index+1,"\n"===char&&(result.push(current),current=[]),state=State.None):state=State.None}index++}return start<str.length&&current.push(descape(str.slice(start,str.length))),result.push(current),result}(text);if(!1===onPaste||"function"==typeof onPaste&&!0!==(null==onPaste?void 0:onPaste(target,data)))return;const damage=[];for(let row=0;row<data.length;row++){const dataRow=data[row];if(row+gridRow>=rows)break;for(let col=0;col<dataRow.length;col++){const dataItem=dataRow[col],index=[col+gridCol,row+gridRow];pasteToCell(getMangedCellContent(index),index,dataItem)&&damage.push(index)}}null===(_gridRef$current10=gridRef.current)||void 0===_gridRef$current10||_gridRef$current10.damage(damage.map((c=>({cell:c}))))}}),[getMangedCellContent,gridSelection,mangledOnCellEdited,onPaste,rowMarkerOffset,rows,selectedColumns,selectedRows]),window,!1,!0),Object(utils.g)("copy",react.useCallback((()=>{var _scrollRef$current3,_canvasRef$current2;if((!0===(null===(_scrollRef$current3=scrollRef.current)||void 0===_scrollRef$current3?void 0:_scrollRef$current3.contains(document.activeElement))||!0===(null===(_canvasRef$current2=canvasRef.current)||void 0===_canvasRef$current2?void 0:_canvasRef$current2.contains(document.activeElement)))&&void 0!==getCellsForSelection)if(void 0!==gridSelection)copyToClipboard(getCellsForSelection({...gridSelection.range,x:gridSelection.range.x-rowMarkerOffset}));else if(void 0!==selectedRows&&selectedRows.length>0){const cells=Array.from(selectedRows).map((rowIndex=>getCellsForSelection({x:0,y:rowIndex,width:columns.length,height:1})[0]));copyToClipboard(cells)}else if(selectedColumns.length>=1){const results=[];for(const col of selectedColumns)results.push(getCellsForSelection({x:col-rowMarkerOffset,y:0,width:1,height:rows}));1===results.length&&copyToClipboard(results[0]);const toCopy=results.reduce(((pv,cv)=>pv.map(((row,index)=>[...row,...cv[index]]))));copyToClipboard(toCopy)}}),[columns.length,copyToClipboard,getCellsForSelection,gridSelection,rowMarkerOffset,rows,selectedColumns,selectedRows]),window,!0,!1);const onSearchResultsChanged=react.useCallback(((results,navIndex)=>{if(0===results.length||-1===navIndex)return;const[col,row]=results[navIndex];void 0!==lastSent.current&&lastSent.current[0]===col&&lastSent.current[1]===row||(lastSent.current=[col,row],updateSelectedCell(col,row))}),[updateSelectedCell]);react.useEffect((()=>{if(void 0===gridSelection)return;const[col,row]=gridSelection.cell;void 0!==mangledCols[col]&&updateSelectedCell(col,row)}),[mangledCols,rows,gridSelection,updateSelectedCell]);const disabledRows=react.useMemo((()=>!0===showTrailingBlankRow&&!0===(null==trailingRowOptions?void 0:trailingRowOptions.tint)?data_grid_types.a.fromSingleSelection(mangledRows-1):data_grid_types.a.empty()),[mangledRows,showTrailingBlankRow,null==trailingRowOptions?void 0:trailingRowOptions.tint]),theme=Object(styled_components_browser_esm.d)(),mergedTheme=react.useMemo((()=>({...Object(styles.a)(),...theme})),[theme]),mangledVerticalBorder=react.useCallback((col=>{var _verticalBorder;return"boolean"==typeof verticalBorder?verticalBorder:null===(_verticalBorder=null==verticalBorder?void 0:verticalBorder(col-rowMarkerOffset))||void 0===_verticalBorder||_verticalBorder}),[rowMarkerOffset,verticalBorder]),mangledGetGroupDetails=react.useCallback((group=>{var _getGroupDetails;let result=null!==(_getGroupDetails=null==getGroupDetails?void 0:getGroupDetails(group))&&void 0!==_getGroupDetails?_getGroupDetails:{name:group};var _result$actions;void 0!==onGroupHeaderRenamed&&""!==group&&(result={icon:result.icon,name:result.name,overrideTheme:result.overrideTheme,actions:[...null!==(_result$actions=result.actions)&&void 0!==_result$actions?_result$actions:[],{title:"Rename",icon:"renameIcon",onClick:e=>setRenameGroup({group:result.name,bounds:e.bounds})}]});return result}),[getGroupDetails,onGroupHeaderRenamed]),drawCustomCellMangled=react.useMemo((()=>void 0!==drawCell?drawCell:void 0!==drawCustomCell?a=>drawCustomCell(a.ctx,a.cell,a.theme,a.rect,a.hoverAmount):void 0),[drawCell,drawCustomCell]),renameGroupNode=react.useMemo((()=>{if(void 0===renameGroup||null===canvasRef.current)return null;const{bounds:bounds,group:group}=renameGroup,canvasBounds=canvasRef.current.getBoundingClientRect();return react.createElement(GroupRename,{bounds:bounds,group:group,canvasBounds:canvasBounds,onClose:()=>setRenameGroup(void 0),onFinish:newVal=>{setRenameGroup(void 0),null==onGroupHeaderRenamed||onGroupHeaderRenamed(group,newVal)}})}),[onGroupHeaderRenamed,renameGroup]),mangledFreezeColumns=Math.min(mangledCols.length,freezeColumns+(hasRowMarkers?1:0));return react.createElement(styled_components_browser_esm.a,{theme:mergedTheme},react.createElement(data_grid_search,data_editor_extends({},rest,{enableGroups:enableGroups,canvasRef:canvasRef,cellXOffset:cellXOffset,cellYOffset:cellYOffset,columns:mangledCols,drawCustomCell:drawCustomCellMangled,disabledRows:disabledRows,freezeColumns:mangledFreezeColumns,lockColumns:rowMarkerOffset,getCellContent:getMangedCellContent,getGroupDetails:mangledGetGroupDetails,headerHeight:headerHeight,groupHeaderHeight:enableGroups?groupHeaderHeight:0,lastRowSticky:lastRowSticky,onCellFocused:onCellFocused,onColumnMoved:void 0===onColumnMoved?void 0:onColumnMovedImpl,onDragStart:onDragStartImpl,onHeaderMenuClick:onHeaderMenuClickInner,onItemHovered:onItemHoveredImpl,onMouseMove:onMouseMoveImpl,onKeyDown:onKeyDown,onMouseDown:onMouseDown,onMouseUp:onMouseUp,onSearchResultsChanged:onSearchResultsChanged,onVisibleRegionChanged:onVisibleRegionChangedImpl,rowHeight:rowHeight,rows:mangledRows,scrollRef:scrollRef,searchColOffset:rowMarkerOffset,selectedCell:gridSelection,selectedColumns:selectedColumns,selectedRows:selectedRows,translateX:visibleRegion.tx,translateY:visibleRegion.ty,verticalBorder:mangledVerticalBorder,gridRef:gridRef})),renameGroupNode,void 0!==overlay&&react.createElement(data_grid_overlay_editor,data_editor_extends({},overlay,{className:!0===(null===(_p$experimental=p.experimental)||void 0===_p$experimental?void 0:_p$experimental.isSubGrid)?"click-outside-ignore":void 0,provideEditor:provideEditor,imageEditorOverride:imageEditorOverride,onFinishEditing:onFinishEditing,markdownDivCreateNode:markdownDivCreateNode})))}));try{DataEditor.displayName="DataEditor",DataEditor.__docgenInfo={description:"",displayName:"DataEditor",props:{onDeleteRows:{defaultValue:null,description:"",name:"onDeleteRows",required:!1,type:{name:"(rows: readonly number[]) => void"}},onCellEdited:{defaultValue:null,description:"",name:"onCellEdited",required:!1,type:{name:"(cell: readonly [number, number], newValue: EditableGridCell) => void"}},onRowAppended:{defaultValue:null,description:"",name:"onRowAppended",required:!1,type:{name:'() => void | Promise<number | "top" | "bottom">'}},onHeaderClicked:{defaultValue:null,description:"",name:"onHeaderClicked",required:!1,type:{name:"(colIndex: number, event: HeaderClickedEventArgs) => void"}},onGroupHeaderClicked:{defaultValue:null,description:"",name:"onGroupHeaderClicked",required:!1,type:{name:"(colIndex: number, event: GroupHeaderClickedEventArgs) => void"}},onGroupHeaderRenamed:{defaultValue:null,description:"",name:"onGroupHeaderRenamed",required:!1,type:{name:"(groupName: string, newVal: string) => void"}},onCellClicked:{defaultValue:null,description:"",name:"onCellClicked",required:!1,type:{name:"(cell: readonly [number, number], event: CellClickedEventArgs) => void"}},trailingRowOptions:{defaultValue:null,description:"",name:"trailingRowOptions",required:!1,type:{name:"{ readonly tint?: boolean; readonly hint?: string; readonly sticky?: boolean; }"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!1,type:{name:"number"}},groupHeaderHeight:{defaultValue:null,description:"",name:"groupHeaderHeight",required:!1,type:{name:"number"}},rowMarkers:{defaultValue:null,description:"",name:"rowMarkers",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"checkbox"'},{value:'"both"'},{value:'"none"'}]}},rowMarkerWidth:{defaultValue:null,description:"",name:"rowMarkerWidth",required:!1,type:{name:"number"}},rowHeight:{defaultValue:null,description:"",name:"rowHeight",required:!1,type:{name:"number | ((index: number) => number)"}},onMouseMove:{defaultValue:null,description:"",name:"onMouseMove",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},imageEditorOverride:{defaultValue:null,description:"",name:"imageEditorOverride",required:!1,type:{name:"ImageEditorType"}},markdownDivCreateNode:{defaultValue:null,description:"",name:"markdownDivCreateNode",required:!1,type:{name:"(content: string) => DocumentFragment"}},provideEditor:{defaultValue:null,description:"",name:"provideEditor",required:!1,type:{name:"ProvideEditorCallback<GridCell>"}},onSelectedRowsChange:{defaultValue:null,description:"",name:"onSelectedRowsChange",required:!1,type:{name:"(newRows: CompactSelection) => void"}},selectedColumns:{defaultValue:null,description:"",name:"selectedColumns",required:!1,type:{name:"CompactSelection"}},onSelectedColumnsChange:{defaultValue:null,description:"",name:"onSelectedColumnsChange",required:!1,type:{name:"(newColumns: CompactSelection, trigger: HeaderSelectionTrigger) => void"}},drawCustomCell:{defaultValue:null,description:"@deprecated Use drawCell instead. This will be removed in a future version.",name:"drawCustomCell",required:!1,type:{name:"(ctx: CanvasRenderingContext2D, cell: GridCell, theme: Theme, rect: Rectangle, hoverAmount: number) => boolean"}},drawCell:{defaultValue:null,description:"",name:"drawCell",required:!1,type:{name:"DrawCustomCellCallback"}},gridSelection:{defaultValue:null,description:"",name:"gridSelection",required:!1,type:{name:"GridSelection"}},onGridSelectionChange:{defaultValue:null,description:"",name:"onGridSelectionChange",required:!1,type:{name:"(newSelection: GridSelection) => void"}},onVisibleRegionChanged:{defaultValue:null,description:"",name:"onVisibleRegionChanged",required:!1,type:{name:"(range: Rectangle, tx?: number, ty?: number) => void"}},getCellContent:{defaultValue:null,description:"",name:"getCellContent",required:!0,type:{name:"ReplaceReturnType<(cell: readonly [number, number]) => InnerGridCell, GridCell>"}},rowSelectionMode:{defaultValue:null,description:"",name:"rowSelectionMode",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"multi"'}]}},enableDownfill:{defaultValue:null,description:"",name:"enableDownfill",required:!1,type:{name:"boolean"}},freezeColumns:{defaultValue:null,description:"",name:"freezeColumns",required:!1,type:{name:"number"}},verticalBorder:{defaultValue:null,description:"",name:"verticalBorder",required:!1,type:{name:"boolean | ((col: number) => boolean)"}},onPaste:{defaultValue:null,description:"",name:"onPaste",required:!1,type:{name:"boolean | ((target: readonly [number, number], values: readonly (readonly string[])[]) => boolean)"}},smoothScrollX:{defaultValue:null,description:"",name:"smoothScrollX",required:!1,type:{name:"boolean"}},smoothScrollY:{defaultValue:null,description:"",name:"smoothScrollY",required:!1,type:{name:"boolean"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"readonly GridColumn[]"}},rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"number"}},getGroupDetails:{defaultValue:null,description:"",name:"getGroupDetails",required:!1,type:{name:"GroupDetailsCallback"}},onHeaderMenuClick:{defaultValue:null,description:"",name:"onHeaderMenuClick",required:!1,type:{name:"(col: number, screenPosition: Rectangle) => void"}},selectedRows:{defaultValue:null,description:"",name:"selectedRows",required:!1,type:{name:"CompactSelection"}},onItemHovered:{defaultValue:null,description:"",name:"onItemHovered",required:!1,type:{name:"(args: GridMouseEventArgs) => void"}},isDraggable:{defaultValue:null,description:"",name:"isDraggable",required:!1,type:{name:"boolean"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"(args: GridDragEventArgs) => void"}},drawHeader:{defaultValue:null,description:"",name:"drawHeader",required:!1,type:{name:"DrawHeaderCallback"}},experimental:{defaultValue:null,description:"",name:"experimental",required:!1,type:{name:"{ readonly paddingRight?: number; readonly paddingBottom?: number; readonly disableFirefoxRescaling?: boolean; readonly isSubGrid?: boolean; }"}},headerIcons:{defaultValue:null,description:"",name:"headerIcons",required:!1,type:{name:"SpriteMap"}},onRowMoved:{defaultValue:null,description:"",name:"onRowMoved",required:!1,type:{name:"(startIndex: number, endIndex: number) => void"}},onColumnMoved:{defaultValue:null,description:"",name:"onColumnMoved",required:!1,type:{name:"(startIndex: number, endIndex: number) => void"}},onColumnResized:{defaultValue:null,description:"",name:"onColumnResized",required:!1,type:{name:"(column: GridColumn, newSize: number) => void"}},maxColumnWidth:{defaultValue:null,description:"",name:"maxColumnWidth",required:!1,type:{name:"number"}},scrollToEnd:{defaultValue:null,description:"",name:"scrollToEnd",required:!1,type:{name:"boolean"}},overscrollX:{defaultValue:null,description:"",name:"overscrollX",required:!1,type:{name:"number"}},rightElementSticky:{defaultValue:null,description:"",name:"rightElementSticky",required:!1,type:{name:"boolean"}},rightElement:{defaultValue:null,description:"",name:"rightElement",required:!1,type:{name:"ReactNode"}},showMinimap:{defaultValue:null,description:"",name:"showMinimap",required:!1,type:{name:"boolean"}},getCellsForSelection:{defaultValue:null,description:"",name:"getCellsForSelection",required:!1,type:{name:"(selection: Rectangle) => readonly (readonly GridCell[])[]"}},showSearch:{defaultValue:null,description:"",name:"showSearch",required:!1,type:{name:"boolean"}},onSearchClose:{defaultValue:null,description:"",name:"onSearchClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor.tsx#DataEditor"]={docgenInfo:DataEditor.__docgenInfo,name:"DataEditor",path:"packages/core/src/data-editor/data-editor.tsx#DataEditor"})}catch(__react_docgen_typescript_loader_error){}},373:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ResizableColumns",(function(){return ResizableColumns})),__webpack_require__.d(__webpack_exports__,"AddData",(function(){return AddData})),__webpack_require__.d(__webpack_exports__,"AddDataToTop",(function(){return AddDataToTop})),__webpack_require__.d(__webpack_exports__,"AddDataToMiddle",(function(){return AddDataToMiddle})),__webpack_require__.d(__webpack_exports__,"SmallEditableGrid",(function(){return SmallEditableGrid})),__webpack_require__.d(__webpack_exports__,"OneMillionRows",(function(){return OneMillionRows})),__webpack_require__.d(__webpack_exports__,"SillyNumbers",(function(){return SillyNumbers})),__webpack_require__.d(__webpack_exports__,"ObserveVisibleRegion",(function(){return ObserveVisibleRegion})),__webpack_require__.d(__webpack_exports__,"OneHundredThousandCols",(function(){return OneHundredThousandCols})),__webpack_require__.d(__webpack_exports__,"TenMillionCells",(function(){return TenMillionCells})),__webpack_require__.d(__webpack_exports__,"SmoothScrollingGrid",(function(){return SmoothScrollingGrid})),__webpack_require__.d(__webpack_exports__,"AddColumns",(function(){return AddColumns})),__webpack_require__.d(__webpack_exports__,"AutomaticRowMarkers",(function(){return AutomaticRowMarkers})),__webpack_require__.d(__webpack_exports__,"UnevenRows",(function(){return UnevenRows})),__webpack_require__.d(__webpack_exports__,"DrawCustomCells",(function(){return DrawCustomCells})),__webpack_require__.d(__webpack_exports__,"RearrangeColumns",(function(){return RearrangeColumns})),__webpack_require__.d(__webpack_exports__,"RowAndHeaderSizes",(function(){return RowAndHeaderSizes})),__webpack_require__.d(__webpack_exports__,"MultiSelectColumns",(function(){return MultiSelectColumns})),__webpack_require__.d(__webpack_exports__,"AllCellKinds",(function(){return AllCellKinds})),__webpack_require__.d(__webpack_exports__,"ThemeSupport",(function(){return ThemeSupport})),__webpack_require__.d(__webpack_exports__,"ThemePerColumn",(function(){return ThemePerColumn})),__webpack_require__.d(__webpack_exports__,"BuiltInSearch",(function(){return BuiltInSearch})),__webpack_require__.d(__webpack_exports__,"HeaderMenus",(function(){return HeaderMenus})),__webpack_require__.d(__webpack_exports__,"CustomHeaderIcons",(function(){return CustomHeaderIcons})),__webpack_require__.d(__webpack_exports__,"RightElement",(function(){return RightElement})),__webpack_require__.d(__webpack_exports__,"RapidUpdates",(function(){return RapidUpdates})),__webpack_require__.d(__webpack_exports__,"CopySupport",(function(){return CopySupport})),__webpack_require__.d(__webpack_exports__,"PasteSupport",(function(){return PasteSupport})),__webpack_require__.d(__webpack_exports__,"FreezeColumns",(function(){return FreezeColumns})),__webpack_require__.d(__webpack_exports__,"ReorderRows",(function(){return ReorderRows})),__webpack_require__.d(__webpack_exports__,"ColumnGroups",(function(){return ColumnGroups})),__webpack_require__.d(__webpack_exports__,"ColumnGroupCollapse",(function(){return ColumnGroupCollapse})),__webpack_require__.d(__webpack_exports__,"Minimap",(function(){return Minimap})),__webpack_require__.d(__webpack_exports__,"Tooltips",(function(){return Tooltips})),__webpack_require__.d(__webpack_exports__,"CustomHeader",(function(){return CustomHeader}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_data_editor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(81),faker__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(22),faker__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(faker__WEBPACK_IMPORTED_MODULE_4__),styled_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7),react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72),_stories_story_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(58),_common_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(20),react_laag__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(267),lodash_range__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(123),lodash_range__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_10__),lodash_isArray__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(151),lodash_isArray__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(lodash_isArray__WEBPACK_IMPORTED_MODULE_11__),_common_support__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(46);function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function lossyCopyData(source,target){const sourceData=source.data;return typeof sourceData==typeof target.data?{...target,data:sourceData}:target.kind===_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Uri?lodash_isArray__WEBPACK_IMPORTED_MODULE_11___default()(sourceData)?{...target,data:sourceData[0]}:{...target,data:null!==(_sourceData$toString=null==sourceData?void 0:sourceData.toString())&&void 0!==_sourceData$toString?_sourceData$toString:""}:target.kind===_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Boolean?lodash_isArray__WEBPACK_IMPORTED_MODULE_11___default()(sourceData)?{...target,data:void 0!==sourceData[0]}:{...target,data:(x=sourceData,!!x)}:target.kind===_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Image?lodash_isArray__WEBPACK_IMPORTED_MODULE_11___default()(sourceData)?{...target,data:[sourceData[0]]}:{...target,data:[null!==(_sourceData$toString2=null==sourceData?void 0:sourceData.toString())&&void 0!==_sourceData$toString2?_sourceData$toString2:""]}:target.kind===_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Number?{...target,data:0}:target.kind===_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text||target.kind===_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Markdown?lodash_isArray__WEBPACK_IMPORTED_MODULE_11___default()(sourceData)?{...target,data:null!==(_sourceData$0$toStrin=sourceData[0].toString())&&void 0!==_sourceData$0$toStrin?_sourceData$0$toStrin:""}:{...target,data:null!==(_source$data$toString=null===(_source$data=source.data)||void 0===_source$data?void 0:_source$data.toString())&&void 0!==_source$data$toString?_source$data$toString:""}:void Object(_common_support__WEBPACK_IMPORTED_MODULE_12__.b)(target);var _sourceData$toString,_sourceData$toString2,_source$data$toString,_source$data,_sourceData$0$toStrin,x}function getGridColumn(columnWithMock){const{getContent:getContent,...rest}=columnWithMock;return rest}faker__WEBPACK_IMPORTED_MODULE_4___default.a.seed(1337),__webpack_exports__.default={title:"DataEditor",decorators:[Story=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_stories_story_utils__WEBPACK_IMPORTED_MODULE_7__.b,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Story,null))]};const BeautifulStyle=styled_components__WEBPACK_IMPORTED_MODULE_5__.c.div.withConfig({displayName:"data-editor-beautifulstories__BeautifulStyle",componentId:"sc-14o9vi7-0"})(["background-color:#2790b9;background:linear-gradient(90deg,#2790b9,#2070a9);color:white;padding:32px 48px;display:flex;flex-direction:column;height:100vh;font-family:sans-serif;&.double{height:200vh;}& > h1{font-size:50px;font-weight:600;flex-shrink:0;margin:0 0 12px 0;}.sizer{flex-grow:1;background-color:white;border-radius:12px;box-shadow:rgba(9,30,66,0.25) 0px 4px 8px -2px,rgba(9,30,66,0.08) 0px 0px 0px 1px;.sizer-clip{border-radius:12px;overflow:hidden;transform:translateZ(0);height:100%;}}"]),PropName=styled_components__WEBPACK_IMPORTED_MODULE_5__.c.span.withConfig({displayName:"data-editor-beautifulstories__PropName",componentId:"sc-14o9vi7-1"})(["font-family:monospace;font-weight:500;color:#ffe394;"]),Description=styled_components__WEBPACK_IMPORTED_MODULE_5__.c.p.withConfig({displayName:"data-editor-beautifulstories__Description",componentId:"sc-14o9vi7-2"})(["font-size:18px;flex-shrink:0;margin:0 0 20px 0;"]),MoreInfo=styled_components__WEBPACK_IMPORTED_MODULE_5__.c.p.withConfig({displayName:"data-editor-beautifulstories__MoreInfo",componentId:"sc-14o9vi7-3"})(["font-size:14px;flex-shrink:0;margin:0 0 20px 0;button{background-color:#f4f4f4;color:#2b2b2b;padding:2px 6px;font-family:monospace;font-size:14px;border-radius:4px;box-shadow:0px 1px 2px #00000040;margin:0 0.1em;border:none;cursor:pointer;}"]),BeautifulWrapper=p=>{const{title:title,children:children,description:description,className:className}=p;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulStyle,{className:className},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h1",null,title),description,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sizer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sizer-clip"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_6__.a,null,(props=>{var _props$width,_props$height;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_3__.a,{width:null!==(_props$width=props.width)&&void 0!==_props$width?_props$width:100,height:null!==(_props$height=props.height)&&void 0!==_props$height?_props$height:100},children)})))))};function getResizableColumns(amount,group){const defaultColumns=[{title:"First name",group:group?"Name":void 0,width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderString,hasMenu:!1,getContent:()=>{const firstName=faker__WEBPACK_IMPORTED_MODULE_4___default.a.name.firstName();return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text,displayData:firstName,data:firstName,allowOverlay:!0,readonly:!0}}},{title:"Last name",group:group?"Name":void 0,width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderString,hasMenu:!1,getContent:()=>{const lastName=faker__WEBPACK_IMPORTED_MODULE_4___default.a.name.lastName();return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text,displayData:lastName,data:lastName,allowOverlay:!0,readonly:!0}}},{title:"Avatar",width:120,group:group?"Info":void 0,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderImage,hasMenu:!1,getContent:()=>{const n=Math.round(100*Math.random());return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Image,data:[`https://picsum.photos/id/${n}/900/900`],displayData:[`https://picsum.photos/id/${n}/40/40`],allowOverlay:!0,allowAdd:!1,readonly:!0}}},{title:"Email",width:120,group:group?"Info":void 0,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderString,hasMenu:!1,getContent:()=>{const email=faker__WEBPACK_IMPORTED_MODULE_4___default.a.internet.email();return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text,displayData:email,data:email,allowOverlay:!0,readonly:!0}}},{title:"Title",width:120,group:group?"Info":void 0,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderString,hasMenu:!1,getContent:()=>{const company=faker__WEBPACK_IMPORTED_MODULE_4___default.a.name.jobTitle();return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text,displayData:company,data:company,allowOverlay:!0,readonly:!0}}},{title:"More Info",width:120,group:group?"Info":void 0,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderUri,hasMenu:!1,getContent:()=>{const url=faker__WEBPACK_IMPORTED_MODULE_4___default.a.internet.url();return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Markdown,displayData:url,data:url,allowOverlay:!0,readonly:!0}}}];if(amount<defaultColumns.length)return defaultColumns.slice(0,amount);const extraColumnsAmount=amount-defaultColumns.length,extraColumns=[...new Array(extraColumnsAmount)].map(((_,index)=>function createTextColumnInfo(index,group){return{title:`Column ${index}`,group:group?`Group ${Math.round(index/3)}`:void 0,width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderString,hasMenu:!1,getContent:()=>{const text=faker__WEBPACK_IMPORTED_MODULE_4___default.a.lorem.word();return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text,data:text,displayData:text,allowOverlay:!0,readonly:!0}}}}(index+defaultColumns.length,group)));return[...defaultColumns,...extraColumns]}class ContentCache{constructor(){this.cachedContent=new Map}get(col,row){const colCache=this.cachedContent.get(col);if(void 0!==colCache)return colCache.get(row)}set(col,row,value){void 0===this.cachedContent.get(col)&&this.cachedContent.set(col,new Map);this.cachedContent.get(col).set(row,value)}}function useMockDataGenerator(numCols){let readonly=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],group=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const cache=react__WEBPACK_IMPORTED_MODULE_0__.useRef(new ContentCache),[colsMap,setColsMap]=react__WEBPACK_IMPORTED_MODULE_0__.useState((()=>getResizableColumns(numCols,group)));react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{setColsMap(getResizableColumns(numCols,group))}),[group,numCols]);const onColumnResized=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((column,newSize)=>{setColsMap((prevColsMap=>{const index=prevColsMap.findIndex((ci=>ci.title===column.title)),newArray=[...prevColsMap];return newArray.splice(index,1,{...prevColsMap[index],width:newSize}),newArray}))}),[]),cols=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>colsMap.map(getGridColumn)),[colsMap]),getCellContent=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((_ref=>{let[col,row]=_ref,val=cache.current.get(col,row);return void 0===val&&(val=colsMap[col].getContent(),readonly||Object(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.h)(val)&&(val={...val,readonly:readonly}),cache.current.set(col,row,val)),val}),[colsMap,readonly]),getCellsForSelection=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((selection=>{const result=[];for(let y=selection.y;y<selection.y+selection.height;y++){const row=[];for(let x=selection.x;x<selection.x+selection.width;x++)row.push(getCellContent([x,y]));result.push(row)}return result}),[getCellContent]),setCellValueRaw=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((_ref2,val)=>{let[col,row]=_ref2;cache.current.set(col,row,val)}),[]),setCellValue=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((_ref3,val)=>{let[col,row]=_ref3,current=cache.current.get(col,row);if(void 0===current&&(current=colsMap[col].getContent()),Object(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.e)(val)&&Object(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.e)(current)){const copied=lossyCopyData(val,current);cache.current.set(col,row,{...copied,displayData:"string"==typeof copied.data?copied.data:copied.displayData,lastUpdated:performance.now()})}}),[colsMap]);return{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue,getCellsForSelection:getCellsForSelection,setCellValueRaw:setCellValueRaw}}const defaultProps={smoothScrollX:!0,smoothScrollY:!0,isDraggable:!1,rowMarkers:"none"},ResizableColumns=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized}=useMockDataGenerator(6);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Resizable columns",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can resize columns by dragging their edges, as long as you respond to the"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"onColumnResized")," prop."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"By setting the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"overscrollX")," property extra space can be allocated at the end of the grid to allow for easier resizing of the final column. You can highlight multiple columns to resize them all at once."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,overscrollX:200,rows:50,onColumnResized:onColumnResized})))};function clearCell(cell){switch(cell.kind){case _data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Boolean:return{...cell,data:!1};case _data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Image:return{...cell,data:[],displayData:[]};case _data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Drilldown:case _data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Bubble:return{...cell,data:[]};case _data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Uri:case _data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Markdown:return{...cell,data:""};case _data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text:return{...cell,data:"",displayData:""};case _data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Number:return{...cell,data:0,displayData:""}}return cell}ResizableColumns.parameters={options:{showPanel:!1}};const AddData=()=>{const{cols:cols,getCellContent:getCellContent,setCellValueRaw:setCellValueRaw,setCellValue:setCellValue}=useMockDataGenerator(60,!1),[numRows,setNumRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState(50),onRowAppended=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{const newRow=numRows;for(let c=0;c<6;c++){const cell=getCellContent([c,newRow]);setCellValueRaw([c,newRow],clearCell(cell))}setNumRows((cv=>cv+1))}),[getCellContent,numRows,setCellValueRaw]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Add data",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Data can be added by clicking on the trailing row."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Keyboard is also supported, just navigate past the last row and press ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"Enter")))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,rowMarkers:"both",onCellEdited:setCellValue,trailingRowOptions:{hint:"New row...",sticky:!0,tint:!0},rows:numRows,onRowAppended:onRowAppended})))};AddData.parameters={options:{showPanel:!1}};const AddDataToTop=()=>{const{cols:cols,getCellContent:getCellContent,setCellValueRaw:setCellValueRaw,setCellValue:setCellValue}=useMockDataGenerator(60,!1),[numRows,setNumRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState(50),onRowAppended=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((async()=>{for(let y=numRows;y>0;y--)for(let x=0;x<6;x++)setCellValueRaw([x,y],getCellContent([x,y-1]));for(let c=0;c<6;c++){const cell=getCellContent([c,0]);setCellValueRaw([c,0],clearCell(cell))}return setNumRows((cv=>cv+1)),"top"}),[getCellContent,numRows,setCellValueRaw]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Add data",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can return a different location to have the new row append take place."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,rowMarkers:"both",onCellEdited:setCellValue,trailingRowOptions:{hint:"New row...",sticky:!0,tint:!0},rows:numRows,onRowAppended:onRowAppended})))};AddDataToTop.parameters={options:{showPanel:!1}};const AddDataToMiddle=p=>{const{cols:cols,getCellContent:getCellContent,setCellValueRaw:setCellValueRaw,setCellValue:setCellValue}=useMockDataGenerator(60,!1),[numRows,setNumRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState(50),index=p.insertIndex,onRowAppended=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((async()=>{for(let y=numRows;y>index;y--)for(let x=0;x<6;x++)setCellValueRaw([x,y],getCellContent([x,y-1]));for(let c=0;c<6;c++){const cell=getCellContent([c,index]);setCellValueRaw([c,index],clearCell(cell))}return setNumRows((cv=>cv+1)),index}),[getCellContent,numRows,setCellValueRaw,index]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Add data to middle",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can return a different location to have the new row append take place."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Note that ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"insertIndex"),' is zero-based while the number column on the left side of the grid is one-based, so inserting at index "4" creates a new row at "5"'))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,rowMarkers:"both",onCellEdited:setCellValue,trailingRowOptions:{hint:"New row...",sticky:!0,tint:!0},rows:numRows,onRowAppended:onRowAppended})))};AddDataToMiddle.args={insertIndex:10},AddDataToMiddle.argTypes={insertIndex:{control:{type:"range",min:1,max:48}}},AddDataToMiddle.parameters={options:{showPanel:!0}};const SmallEditableGrid=()=>{const{cols:cols,getCellContent:getCellContent,setCellValue:setCellValue}=useMockDataGenerator(6,!1);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Editable Grid",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Data grid supports overlay editors for changing values. There are bespoke editors for numbers, strings, images, booleans, markdown, and uri.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,rowMarkers:"both",columns:cols,rows:20,onCellEdited:setCellValue})))};SmallEditableGrid.parameters={options:{showPanel:!1}};const OneMillionRows=()=>{const{cols:cols,getCellContent:getCellContent,getCellsForSelection:getCellsForSelection}=useMockDataGenerator(6);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"One Million Rows",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Data grid supports over 1 million rows. Your limit is mostly RAM.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,getCellsForSelection:getCellsForSelection,columns:cols,rowHeight:31,rows:1e6,rowMarkers:"number"})))};OneMillionRows.parameters={options:{showPanel:!1}};const SillyNumbers=()=>{const{cols:cols,getCellContent:getCellContent,getCellsForSelection:getCellsForSelection}=useMockDataGenerator(6);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"100 Million Rows",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"100 million rows is silly. Once we cross about 33 million pixels in height we can no longer trust the browser to scroll accurately.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,getCellsForSelection:getCellsForSelection,columns:cols,rowHeight:31,rows:1e8,rowMarkers:"number"})))};SillyNumbers.parameters={options:{showPanel:!1}};const ObserveVisibleRegion=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(100),[visibleRegion,setVisibleRegion]=react__WEBPACK_IMPORTED_MODULE_0__.useState({x:0,y:0,width:0,height:0});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Observe Visible Region",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"The visible region can be observed using ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"onVisibleRegionChanged")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Then current visible region is x:",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,visibleRegion.x)," y:",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,visibleRegion.y)," width:",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,visibleRegion.width)," height:",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,visibleRegion.height)))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,rows:1e3,onVisibleRegionChanged:setVisibleRegion})))};OneMillionRows.parameters={options:{showPanel:!1}};const OneHundredThousandCols=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(1e5);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"One Hundred Thousand Columns",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Data grid supports way more columns than you will ever need. Also this is rendering 10 million cells but that's not important.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,rows:1e3})))};OneHundredThousandCols.parameters={options:{showPanel:!1}};const TenMillionCells=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(100);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Ten Million Cells",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Data grid supports over 10 million cells. Go nuts with it.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{rowMarkers:"number",getCellContent:getCellContent,columns:cols,rows:1e5})))};TenMillionCells.parameters={options:{showPanel:!1}};const SmoothScrollingGrid=p=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(30);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Smooth scrolling",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can enable smooth scrolling with the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"smoothScrollX")," and"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"smoothScrollY")," props. Disabling smooth scrolling can dramatically increase performance and improve visual stability during rapid scrolling.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{smoothScrollX:p.smoothScrollX,smoothScrollY:p.smoothScrollY,getCellContent:getCellContent,columns:cols,rows:1e4})))};SmoothScrollingGrid.args={smoothScrollX:!1,smoothScrollY:!1},SmoothScrollingGrid.parameters={options:{showPanel:!0}};const AddColumns=p=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(p.columnsCount);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Add and remove columns",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can add and remove columns at your disposal"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Use the story's controls to change the number of columns"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,rows:1e4})))};AddColumns.args={columnsCount:10},AddColumns.argTypes={columnsCount:{control:{type:"range",min:6,max:200}}},AddColumns.parameters={options:{showPanel:!0}};const AutomaticRowMarkers=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(6),[selectedRows,setSelectedRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.a.empty());return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Automatic Row Markers",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can enable row markers with rich selection behavior using the"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"rowMarkers")," prop."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Use ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"")," + click to make range selections, and ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"Ctrl")," (",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"")," on Mac) + click to add/remove individual rows."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{selectedRows:selectedRows,onSelectedRowsChange:setSelectedRows,rowMarkers:"both",getCellContent:getCellContent,columns:cols,rows:1e3})))};AutomaticRowMarkers.parameters={options:{showPanel:!1}};const UnevenRows=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(6);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Uneven Rows",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Rows can be made uneven by passing a callback to the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"rowHeight")," prop")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{rowHeight:r=>r%3==0?30:r%2?50:60,getCellContent:getCellContent,columns:cols,rows:1e3})))};AutomaticRowMarkers.parameters={options:{showPanel:!1}};const DrawCustomCells=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(6);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Draw custom cells",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can draw custom cell contents however you want using the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"drawCustomCell")," ","prop")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,drawCustomCell:(ctx,cell,_theme,rect)=>{if(cell.kind!==_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text)return!1;const hasX=cell.displayData.toLowerCase().includes("x");ctx.save();const{x:x,y:y,width:width,height:height}=rect,data=cell.displayData;return ctx.fillStyle=hasX?"#bfffcd":"#ffe6e6",ctx.fillRect(x+1,y+1,width-1,height-1),ctx.fillStyle=hasX?"#0fc035":"#e01e1e",ctx.font="bold 14px sans-serif",ctx.fillText(data,x+8+.5,y+height/2+4.5),ctx.restore(),!0},rows:1e3})))};DrawCustomCells.parameters={options:{showPanel:!1}};const RearrangeColumns=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(60),[sortableCols,setSortableCols]=react__WEBPACK_IMPORTED_MODULE_0__.useState((()=>(num=200,cols.map((c=>({...c,width:c.width+rand()%100})))))),onColMoved=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((startIndex,endIndex)=>{setSortableCols((old=>{const newCols=[...old],[toMove]=newCols.splice(startIndex,1);return newCols.splice(endIndex,0,toMove),newCols}))}),[]),getCellContentMangled=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((_ref4=>{let[col,row]=_ref4;const remappedCol=cols.findIndex((c=>c.title===sortableCols[col].title));return getCellContent([remappedCol,row])}),[cols,getCellContent,sortableCols]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Rearrange Columns",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Columns can be rearranged by drag and dropping, as long as you respond to the"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"onColumnMoved")," callback.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{freezeColumns:1,rowMarkers:"both",getCellContent:getCellContentMangled,columns:sortableCols,onColumnMoved:onColMoved,rows:1e3})))};RearrangeColumns.parameters={options:{showPanel:!1}};const RowAndHeaderSizes=p=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(6),[selectedRows,setSelectedRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Row and Header sizes",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"The row size can be controlled with ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"rowHeight")," and the header size with"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"headerHeight"),"."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Use the story's controls to resize them"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{rowHeight:p.rowHeight,headerHeight:p.headerHeight,selectedRows:selectedRows,onSelectedRowsChange:setSelectedRows,rowMarkers:"number",getCellContent:getCellContent,columns:cols,rows:1e3})))};RowAndHeaderSizes.args={rowHeight:34,headerHeight:34},RowAndHeaderSizes.argTypes={rowHeight:{control:{type:"range",min:20,max:200}},headerHeight:{control:{type:"range",min:20,max:200}}},RowAndHeaderSizes.parameters={options:{showPanel:!0}};const KeyName=styled_components__WEBPACK_IMPORTED_MODULE_5__.c.kbd.withConfig({displayName:"data-editor-beautifulstories__KeyName",componentId:"sc-14o9vi7-4"})(["background-color:#f4f4f4;color:#2b2b2b;padding:2px 6px;font-family:monospace;font-size:14px;border-radius:4px;box-shadow:0px 1px 2px #00000040;margin:0 0.1em;"]),MultiSelectColumns=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(100),[sel,setSel]=react__WEBPACK_IMPORTED_MODULE_0__.useState(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.a.empty());return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Multi select columns",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can select multiple columns by using the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"selectedColumns")," and"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"onSelectedColumnsChange")," props"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Here you can multi select columns by using ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"Ctrl")," (on Windows) or"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"")," (on Mac)"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,rowMarkers:"both",columns:cols,rows:1e5,selectedColumns:sel,onSelectedColumnsChange:setSel})))};function getColumnsForCellTypes(){return[{title:"Row ID",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderRowID,hasMenu:!1,getContent:()=>({kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.RowID,data:faker__WEBPACK_IMPORTED_MODULE_4___default.a.datatype.uuid(),allowOverlay:!1})},{title:"Protected",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderCode,hasMenu:!1,getContent:()=>({kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Protected,data:faker__WEBPACK_IMPORTED_MODULE_4___default.a.finance.bitcoinAddress(),allowOverlay:!1})},{title:"Loading",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderString,hasMenu:!1,getContent:()=>({kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Loading,allowOverlay:!1})},{title:"Text",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderCode,hasMenu:!1,getContent:()=>{const name=faker__WEBPACK_IMPORTED_MODULE_4___default.a.name.firstName();return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text,data:name,displayData:name,allowOverlay:!0}}},{title:"Number",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderNumber,hasMenu:!1,getContent:()=>{const age=faker__WEBPACK_IMPORTED_MODULE_4___default.a.datatype.number(100);return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Number,data:age,displayData:`${age}`,allowOverlay:!0}}},{title:"Boolean",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderBoolean,hasMenu:!1,getContent:()=>{const checked=Math.random()>.5;return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Boolean,data:checked,allowOverlay:!1,showUnchecked:!0,allowEdit:!0}}},{title:"Image",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderImage,hasMenu:!1,getContent:()=>({kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Image,data:[`${faker__WEBPACK_IMPORTED_MODULE_4___default.a.image.animals(40,40)}?random=${faker__WEBPACK_IMPORTED_MODULE_4___default.a.datatype.number(1e5)}`],allowOverlay:!0,allowAdd:!1,readonly:!0})},{title:"Uri",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderUri,hasMenu:!1,getContent:()=>{const url=faker__WEBPACK_IMPORTED_MODULE_4___default.a.internet.url();return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Uri,data:url,allowOverlay:!0}}},{title:"Markdown",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderMarkdown,hasMenu:!1,getContent:()=>{const markdown=`# Title\nHello my name is *${faker__WEBPACK_IMPORTED_MODULE_4___default.a.name.firstName()}*\n\n## TODO:\nTry out [Glide](https://www.glideapps.com/)\n`;return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Markdown,data:markdown,allowOverlay:!0}}},{title:"Bubble",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderArray,hasMenu:!1,getContent:()=>({kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Bubble,data:[faker__WEBPACK_IMPORTED_MODULE_4___default.a.lorem.word(),faker__WEBPACK_IMPORTED_MODULE_4___default.a.lorem.word(),faker__WEBPACK_IMPORTED_MODULE_4___default.a.lorem.word()],allowOverlay:!0})},{title:"Drilldown",width:120,icon:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderArray,hasMenu:!1,getContent:()=>({kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Drilldown,data:[{text:faker__WEBPACK_IMPORTED_MODULE_4___default.a.address.cityName(),img:`${faker__WEBPACK_IMPORTED_MODULE_4___default.a.image.nature(40,40)}?random=${faker__WEBPACK_IMPORTED_MODULE_4___default.a.datatype.number(1e5)}`},{text:faker__WEBPACK_IMPORTED_MODULE_4___default.a.address.cityName(),img:`${faker__WEBPACK_IMPORTED_MODULE_4___default.a.image.nature(40,40)}?random=${faker__WEBPACK_IMPORTED_MODULE_4___default.a.datatype.number(1e5)}`}],allowOverlay:!0})}]}function useAllMockedKinds(){const cache=react__WEBPACK_IMPORTED_MODULE_0__.useRef(new ContentCache),[colsMap,setColsMap]=react__WEBPACK_IMPORTED_MODULE_0__.useState(getColumnsForCellTypes),onColumnResized=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((column,newSize)=>{setColsMap((prevColsMap=>{const index=prevColsMap.findIndex((ci=>ci.title===column.title)),newArray=[...prevColsMap];return newArray.splice(index,1,{...prevColsMap[index],width:newSize}),newArray}))}),[]);return{cols:react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>colsMap.map(getGridColumn)),[colsMap]),getCellContent:react__WEBPACK_IMPORTED_MODULE_0__.useCallback((_ref5=>{let[col,row]=_ref5,val=cache.current.get(col,row);return void 0===val&&(val=colsMap[col].getContent(),cache.current.set(col,row,val)),val}),[colsMap]),onColumnResized:onColumnResized,setCellValue:react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((_ref6,val)=>{let[col,row]=_ref6,current=cache.current.get(col,row);if(void 0===current&&(current=colsMap[col].getContent()),Object(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.e)(val)&&Object(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.e)(current)){var _copied$data$toString,_copied$data;const copied=lossyCopyData(val,current);cache.current.set(col,row,{...copied,displayData:null!==(_copied$data$toString=null===(_copied$data=copied.data)||void 0===_copied$data?void 0:_copied$data.toString())&&void 0!==_copied$data$toString?_copied$data$toString:""})}}),[colsMap])}}MultiSelectColumns.parameters={options:{showPanel:!1}};const AllCellKinds=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue}=useAllMockedKinds();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Lotsa cell kinds",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Data grid supports plenty cell kinds. Anything under ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"GridCellKind"),".")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,onCellEdited:setCellValue,onColumnResized:onColumnResized,rows:1e3})))};AllCellKinds.parameters={options:{showPanel:!1}};const darkTheme={accentColor:"#8c96ff",accentLight:"rgba(202, 206, 255, 0.253)",textDark:"#ffffff",textMedium:"#b8b8b8",textLight:"#a0a0a0",textBubble:"#ffffff",bgIconHeader:"#b8b8b8",fgIconHeader:"#000000",textHeader:"#a1a1a1",textHeaderSelected:"#000000",bgCell:"#16161b",bgCellMedium:"#202027",bgHeader:"#212121",bgHeaderHasFocus:"#474747",bgHeaderHovered:"#404040",bgBubble:"#212121",bgBubbleSelected:"#000000",bgSearchResult:"#423c24",borderColor:"rgba(225,225,225,0.2)",drilldownBorder:"rgba(225,225,225,0.4)",linkColor:"#4F5DFF",headerFontStyle:"bold 14px",baseFontStyle:"13px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif"},hotdogStand={accentColor:"#8c96ff",accentLight:"rgba(202, 206, 255, 0.253)",textDark:"#ffffff",textMedium:"rgba(255, 255, 255, 0.9)",textLight:"rgba(255, 255, 255, 0.7)",textBubble:"#000000",bgIconHeader:"#880000",fgIconHeader:"#ff5555",textHeader:"rgba(0, 0, 0, 0.9)",textHeaderSelected:"#000000",bgCell:"#ff0000",bgCellMedium:"#ff4d4d",bgHeader:"#f3f300",bgHeaderHasFocus:"#eeee00",bgHeaderHovered:"#e0e000",bgBubble:"#ffff00",bgBubbleSelected:"#ffff00",bgSearchResult:"#423c24",borderColor:"#ffff00",drilldownBorder:"#ffff00",linkColor:"#4F5DFF",headerFontStyle:"bold 14px",baseFontStyle:"13px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif"},ThemeSupport=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue}=useAllMockedKinds(),[theme,setTheme]=react__WEBPACK_IMPORTED_MODULE_0__.useState({}),[numRows,setNumRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState(1e3),onRowAppended=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{const newRow=numRows;setNumRows((cv=>cv+1));for(let c=0;c<6;c++)setCellValue([c,newRow],{displayData:"",data:""})}),[numRows,setCellValue]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(styled_components__WEBPACK_IMPORTED_MODULE_5__.a,{theme:theme},react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Theme support",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"DataGrid respects the theme provided by styled-components theme provider."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:()=>setTheme({})},"Light")," or"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:()=>setTheme(darkTheme)},"Dark")," even"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:()=>setTheme(hotdogStand)},"Hotdog Stand")))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,onRowAppended:onRowAppended,trailingRowOptions:{tint:!0,sticky:!0},onCellEdited:setCellValue,onColumnResized:onColumnResized,rows:numRows}))))};ThemeSupport.parameters={options:{showPanel:!1}};const ThemePerColumn=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue}=useAllMockedKinds(),realCols=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const c=[...cols];return c[3]={...c[3],themeOverride:{textDark:"#009CA6",bgIconHeader:"#009CA6",accentColor:"#009CA6",accentLight:"#009CA620",fgIconHeader:"#FFFFFF"}},c[9]={...c[9],themeOverride:{textDark:"#009CA6",bgIconHeader:"#009CA6",accentColor:"#009CA6",accentLight:"#009CA620",fgIconHeader:"#FFFFFF"}},c[10]={...c[10],themeOverride:{textDark:"#009CA6",bgIconHeader:"#009CA6",accentColor:"#009CA6",accentLight:"#009CA620",fgIconHeader:"#FFFFFF"}},c}),[cols]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Theme per column",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Each column can provide theme overrides for rendering that column."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:realCols,onCellEdited:setCellValue,onColumnResized:onColumnResized,rows:1e3})))};ThemePerColumn.parameters={options:{showPanel:!1}};const BuiltInSearch=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue}=useAllMockedKinds(),[showSearch,setShowSearch]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);return Object(_common_utils__WEBPACK_IMPORTED_MODULE_8__.g)("keydown",react__WEBPACK_IMPORTED_MODULE_0__.useCallback((event=>{(event.ctrlKey||event.metaKey)&&"f"===event.key&&(setShowSearch((cv=>!cv)),event.stopPropagation(),event.preventDefault())}),[]),window,!1,!0),react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Search is easy",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Search for any data in your grid by setting ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"showSearch"),"."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"In this story, ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"Ctrl")," (",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"")," on Mac) + ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,null,"f")," ","toggles the search bar. Make sure you're focused on the Data Grid!"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,onCellEdited:setCellValue,onColumnResized:onColumnResized,showSearch:showSearch,onSearchClose:()=>setShowSearch(!1),rows:1e4})))};BuiltInSearch.parameters={options:{showPanel:!1}};const SimpleMenu=styled_components__WEBPACK_IMPORTED_MODULE_5__.c.div.withConfig({displayName:"data-editor-beautifulstories__SimpleMenu",componentId:"sc-14o9vi7-5"})(['width:175px;padding:8px 0;border-radius:6px;box-shadow:0px 0px 1px rgba(62,65,86,0.7),0px 6px 12px rgba(62,65,86,0.35);display:flex;flex-direction:column;background-color:white;font-size:13px;font-weight:600;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;.danger{color:rgba(255,40,40,0.8);:hover{color:rgba(255,40,40,1);}}> div{padding:6px 8px;color:rgba(0,0,0,0.7);:hover{background-color:rgba(0,0,0,0.05);color:rgba(0,0,0,0.9);}transition:background-color 100ms;cursor:pointer;}']),HeaderMenus=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue}=useAllMockedKinds(),realCols=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>cols.map((c=>({...c,hasMenu:!0})))),[cols]),[menu,setMenu]=react__WEBPACK_IMPORTED_MODULE_0__.useState(),isOpen=void 0!==menu,{layerProps:layerProps,renderLayer:renderLayer}=Object(react_laag__WEBPACK_IMPORTED_MODULE_9__.a)({isOpen:isOpen,auto:!0,placement:"bottom-end",triggerOffset:2,onOutsideClick:()=>setMenu(void 0),trigger:{getBounds:()=>{var _menu$bounds$x,_menu$bounds$y,_menu$bounds$width,_menu$bounds$height,_menu$bounds$x2,_menu$bounds$width2,_menu$bounds$y2,_menu$bounds$height2;return{left:null!==(_menu$bounds$x=null==menu?void 0:menu.bounds.x)&&void 0!==_menu$bounds$x?_menu$bounds$x:0,top:null!==(_menu$bounds$y=null==menu?void 0:menu.bounds.y)&&void 0!==_menu$bounds$y?_menu$bounds$y:0,width:null!==(_menu$bounds$width=null==menu?void 0:menu.bounds.width)&&void 0!==_menu$bounds$width?_menu$bounds$width:0,height:null!==(_menu$bounds$height=null==menu?void 0:menu.bounds.height)&&void 0!==_menu$bounds$height?_menu$bounds$height:0,right:(null!==(_menu$bounds$x2=null==menu?void 0:menu.bounds.x)&&void 0!==_menu$bounds$x2?_menu$bounds$x2:0)+(null!==(_menu$bounds$width2=null==menu?void 0:menu.bounds.width)&&void 0!==_menu$bounds$width2?_menu$bounds$width2:0),bottom:(null!==(_menu$bounds$y2=null==menu?void 0:menu.bounds.y)&&void 0!==_menu$bounds$y2?_menu$bounds$y2:0)+(null!==(_menu$bounds$height2=null==menu?void 0:menu.bounds.height)&&void 0!==_menu$bounds$height2?_menu$bounds$height2:0)}}}}),onHeaderMenuClick=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((col,bounds)=>{setMenu({col:col,bounds:bounds})}),[]),onHeaderClicked=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{console.log("Header clicked")}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Header menus",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Headers on the data grid can be configured to support menus. We provide the events and the triangle, you provide the menu."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,onHeaderMenuClick:onHeaderMenuClick,onHeaderClicked:onHeaderClicked,columns:realCols,onCellEdited:setCellValue,onColumnResized:onColumnResized,rows:1e3})),isOpen&&renderLayer(react__WEBPACK_IMPORTED_MODULE_0__.createElement(SimpleMenu,layerProps,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onClick:()=>setMenu(void 0)},"These do nothing"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onClick:()=>setMenu(void 0)},"Add column right"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onClick:()=>setMenu(void 0)},"Add column left"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"danger",onClick:()=>setMenu(void 0)},"Delete"))))};HeaderMenus.parameters={options:{showPanel:!1}};const CustomHeaderIcons=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue}=useAllMockedKinds(),realCols=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const c=[...cols];return c[3]={...c[3],title:"CUSTOM ICON",icon:"custom",width:200},c}),[cols]),headerIcons=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>({custom:p=>`<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <rect x="2.00015" y="2" width="16" height="16" rx="4" fill="${p.bgColor}"/>\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M4.69759 6.00977C4.23735 6.00977 3.86426 6.38286 3.86426 6.8431C3.86426 7.30334 4.23735 7.67643 4.69759 7.67643H8.86426C9.3245 7.67643 9.69759 7.30334 9.69759 6.8431C9.69759 6.38286 9.32449 6.00977 8.86426 6.00977H4.69759Z" fill="${p.fgColor}"/>\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M7.61426 4.76009C7.61426 4.29985 7.24116 3.92676 6.78092 3.92676C6.32069 3.92676 5.94759 4.29985 5.94759 4.76009L5.94759 8.92676C5.94759 9.387 6.32069 9.76009 6.78092 9.76009C7.24116 9.76009 7.61426 9.38699 7.61426 8.92676L7.61426 4.76009Z" fill="${p.fgColor}"/>\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.0336 6.00977C10.5734 6.00977 10.2003 6.38286 10.2003 6.8431C10.2003 7.30334 10.5734 7.67643 11.0336 7.67643H15.2003C15.6605 7.67643 16.0336 7.30334 16.0336 6.8431C16.0336 6.38286 15.6605 6.00977 15.2003 6.00977H11.0336Z" fill="${p.fgColor}"/>\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.89704 10.9916C5.5716 10.6662 5.04397 10.6662 4.71853 10.9916C4.39309 11.317 4.39309 11.8447 4.71853 12.1701L7.66481 15.1164C7.99024 15.4418 8.51788 15.4418 8.84332 15.1164C9.16876 14.791 9.16876 14.2633 8.84332 13.9379L5.89704 10.9916Z" fill="${p.fgColor}"/>\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M8.84332 12.1703C9.16875 11.8449 9.16875 11.3172 8.84332 10.9918C8.51788 10.6664 7.99024 10.6664 7.6648 10.9918L4.71853 13.9381C4.39309 14.2635 4.39309 14.7912 4.71853 15.1166C5.04396 15.442 5.5716 15.442 5.89704 15.1166L8.84332 12.1703Z" fill="${p.fgColor}"/>\n                <path d="M10.2003 11.804C10.2003 11.3438 10.5734 10.9707 11.0336 10.9707H15.2003C15.6605 10.9707 16.0336 11.3438 16.0336 11.804C16.0336 12.2643 15.6605 12.6374 15.2003 12.6374H11.0336C10.5734 12.6374 10.2003 12.2643 10.2003 11.804Z" fill="${p.fgColor}"/>\n                <path d="M10.2003 14.304C10.2003 13.8438 10.5734 13.4707 11.0336 13.4707H15.2003C15.6605 13.4707 16.0336 13.8438 16.0336 14.304C16.0336 14.7643 15.6605 15.1374 15.2003 15.1374H11.0336C10.5734 15.1374 10.2003 14.7643 10.2003 14.304Z" fill="${p.fgColor}"/>\n            </svg>`})),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Custom header icons",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"You can provide overrides for the default icons by passing the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"headerIcons")," ","prop."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:realCols,onCellEdited:setCellValue,onColumnResized:onColumnResized,headerIcons:headerIcons,rows:1e3})))};CustomHeaderIcons.parameters={options:{showPanel:!1}};const RightElement=()=>{const{cols:cols,getCellContent:getCellContent,setCellValue:setCellValue}=useMockDataGenerator(12,!1),[numRows,setNumRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState(30),onRowAppended=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{const newRow=numRows;setNumRows((cv=>cv+1));for(let c=0;c<6;c++)setCellValue([c,newRow],{displayData:"",data:""})}),[numRows,setCellValue]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Right Element",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"A DOM element may be added as a trailer to the grid by using the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"rightElement")," ","prop.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,rowMarkers:"both",onCellEdited:setCellValue,trailingRowOptions:{hint:"New row...",sticky:!0,tint:!0},rows:numRows,onRowAppended:onRowAppended,rightElementSticky:!0,rightElement:react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{height:"100%",padding:"20px 20px 40px 20px",width:200,color:"black",whiteSpace:"pre-wrap",backgroundColor:"rgba(240, 240, 250, 0.2)",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.15)",backdropFilter:"blur(12px)"}},"This is a real DOM element. You can put whatever you want here. You can also size it as big as you want. ","\n\n","It also does not have to be sticky.")})))};RightElement.parameters={options:{showPanel:!1}};let num=1;function rand(){return num=16807*num%2147483647}const RapidUpdates=()=>{const{cols:cols,getCellContent:getCellContent,setCellValueRaw:setCellValueRaw}=useMockDataGenerator(100),ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),countRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(0),displayCountRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{let rafID=0;const sendUpdate=()=>{var _ref$current;const cells=[],now=performance.now();for(let x=0;x<5e3;x++){const col=Math.max(10,rand()%100),row=rand()%1e4;setCellValueRaw([col,row],{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text,data:x.toString(),displayData:`${x}k`,themeOverride:x%5!=0?{bgCell:"#f2fff4",textDark:"#00d41c"}:{bgCell:"#fff6f6",textDark:"#d40000"},allowOverlay:!0,lastUpdated:now}),cells.push({cell:[col,row]})}countRef.current+=5e3,null!==displayCountRef.current&&(displayCountRef.current.textContent=`${countRef.current}`),null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.updateCells(cells),rafID=window.requestAnimationFrame(sendUpdate)};return sendUpdate(),()=>{cancelAnimationFrame(rafID)}}),[setCellValueRaw]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Rapid updating",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Data grid can support many thousands of updates per seconds. The data grid can easily update data faster than a human can read it, more importantly the faster the data grid can update, the more time your code can spend doing more valuable work."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Updates processed: ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(KeyName,{ref:displayCountRef})," We could do this faster but we wrote a really crappy data store for this demo which is actually slowing down the data grid."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{ref:ref,getCellContent:getCellContent,columns:cols,rows:1e4})))};RapidUpdates.parameters={options:{showPanel:!1}};const CopySupport=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue,getCellsForSelection:getCellsForSelection}=useMockDataGenerator(10,!1);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Copy support",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Large amounts of data can be copied and customized using"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"getCellsForSelection"),"."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"The data is copied into a format ready to be pasted into Excel or Google Sheets"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",{placeholder:"Copy something below and paste it here...",style:{width:"100%",marginBottom:20,borderRadius:9,minHeight:200,padding:10}}))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,rowMarkers:"both",getCellsForSelection:getCellsForSelection,columns:cols,onCellEdited:setCellValue,onColumnResized:onColumnResized,rows:400})))};CopySupport.parameters={options:{showPanel:!1}};const PasteSupport=()=>{const{cols:cols,getCellContent:getCellContent,onColumnResized:onColumnResized,setCellValue:setCellValue,getCellsForSelection:getCellsForSelection}=useMockDataGenerator(50,!1);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Paste support",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"The data grid can handle paste automatically by returning true from ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"onPaste"),". You can also return false and handle paste yourself. If paste is undefined the DataEditor will do its best to paste to the current cell."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Paste supports the copy format of Google Sheets and Excel. Below is an example of data copied from excel with some escaped text."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("textarea",{value:'Sunday\tDogs\thttps://google.com\nMonday\tCats\thttps://google.com\nTuesday\tTurtles\thttps://google.com\nWednesday\tBears\thttps://google.com\nThursday\t"L  ions"\thttps://google.com\nFriday\tPigs\thttps://google.com\nSaturday\t"Turkeys and some ""quotes"" and\na new line char ""more quotes"" plus a tab  ."\thttps://google.com',style:{width:"100%",marginBottom:20,borderRadius:9,minHeight:200,padding:10}}))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,rowMarkers:"both",getCellsForSelection:getCellsForSelection,columns:cols,onCellEdited:setCellValue,onColumnResized:onColumnResized,onPaste:!0,rows:400})))};PasteSupport.parameters={options:{showPanel:!1}};const FreezeColumns=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(100);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Freeze columns",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Columns at the start of your grid can be frozen in place by settings"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"freezeColumns")," to a number greater than 0.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{rowMarkers:"both",freezeColumns:1,getCellContent:getCellContent,columns:cols,verticalBorder:c=>c>0,rows:1e3})))};FreezeColumns.parameters={options:{showPanel:!1}};const ReorderRows=()=>{const cols=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>[{title:"Col A",width:150},{title:"Col B",width:150}]),[]),[rowData,setRowData]=react__WEBPACK_IMPORTED_MODULE_0__.useState((()=>lodash_range__WEBPACK_IMPORTED_MODULE_10___default()(0,50).map((x=>[`A: ${x}`,`B: ${x}`])))),getCellContent=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((_ref7=>{let[col,row]=_ref7;return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.b.Text,allowOverlay:!1,data:rowData[row][col],displayData:rowData[row][col]}}),[rowData]),reorderRows=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((from,to)=>{setRowData((cv=>{const d=[...cv],removed=d.splice(from,1);return d.splice(to,0,...removed),d}))}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Reorder Rows",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Rows can be re-arranged by using the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"onRowMoved")," callback. When set the first row can be used to drag and drop."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{rowMarkers:"number",onRowMoved:reorderRows,getCellContent:getCellContent,columns:cols,rows:50})))};ReorderRows.parameters={options:{showPanel:!1}};const ColumnGroups=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(20,!0,!0);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Column Grouping",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Columns in the data grid may be grouped by setting their ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"group")," property.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,onGroupHeaderRenamed:(x,y)=>window.alert(`Please rename group ${x} to ${y}`),columns:cols,rows:1e3,getGroupDetails:g=>({name:g,icon:""===g?void 0:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.c.HeaderCode}),rowMarkers:"both"})))};ColumnGroups.parameters={options:{showPanel:!1}};const ColumnGroupCollapse=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(100,!0,!0),groupHeaderArgs=function useCollapsableColumnGroups(cols){const[collapsed,setCollapsed]=react__WEBPACK_IMPORTED_MODULE_0__.useState([]),onGroupHeaderClicked=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((colIndex=>{var _cols$colIndex$group;const group=null!==(_cols$colIndex$group=cols[colIndex].group)&&void 0!==_cols$colIndex$group?_cols$colIndex$group:"";setCollapsed((cv=>cv.includes(group)?cv.filter((g=>g!==group)):[...cv,group]))}),[cols]),[selectedColumns,setSelectedColumns]=react__WEBPACK_IMPORTED_MODULE_0__.useState(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_1__.a.empty()),setCols=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((newVal,trigger)=>{"group"!==trigger&&setSelectedColumns(newVal)}),[]);return{columns:react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>cols.map((c=>{var _c$group;return collapsed.includes(null!==(_c$group=c.group)&&void 0!==_c$group?_c$group:"")?{...c,width:8,hasMenu:!0}:{...c,hasMenu:!0}}))),[collapsed,cols]),onGroupHeaderClicked:onGroupHeaderClicked,selectedColumns:selectedColumns,onSelectedColumnsChange:setCols}}(cols);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Group collapse",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Through clever usage of ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"onGroupHeaderClicked")," you can implement group collapsing. This is a very basic version however it is possible to go much further."),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MoreInfo,null,"Cells under a certain size will not attempt to render to save some frames."))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,groupHeaderArgs,{getCellContent:getCellContent,groupHeaderHeight:24,rows:1e3,rowMarkers:"both"})))};ColumnGroupCollapse.parameters={options:{showPanel:!1}};const Minimap=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(1e3,!0,!0);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Minimap",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"A minimap can be enabled by setting the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"showMinimap")," property.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,showMinimap:!0,rows:3e3,rowMarkers:"both"})))};Minimap.parameters={options:{showPanel:!1}};const zeroBounds={left:0,top:0,width:0,height:0,bottom:0,right:0},Tooltips=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(6),[tooltip,setTooltip]=react__WEBPACK_IMPORTED_MODULE_0__.useState(),onItemHovered=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((args=>{"cell"===args.kind?setTooltip({val:`Tooltip for ${args.location[0]}, ${args.location[1]}`,bounds:{left:args.bounds.x,top:args.bounds.y,width:args.bounds.width,height:args.bounds.height,right:args.bounds.x+args.bounds.width,bottom:args.bounds.y+args.bounds.height}}):setTooltip(void 0)}),[]),isOpen=void 0!==tooltip,{renderLayer:renderLayer,layerProps:layerProps}=Object(react_laag__WEBPACK_IMPORTED_MODULE_9__.a)({isOpen:isOpen,triggerOffset:4,auto:!0,container:"portal",trigger:{getBounds:()=>{var _tooltip$bounds;return null!==(_tooltip$bounds=null==tooltip?void 0:tooltip.bounds)&&void 0!==_tooltip$bounds?_tooltip$bounds:zeroBounds}}});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Tooltips",className:"double",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Using the ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(PropName,null,"onItemHovered")," event makes it easy to create tooltips. This story is intentionally forced to scroll vertically so layout in scrolling documents can be confirmed.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{onItemHovered:onItemHovered,getCellContent:getCellContent,columns:cols,rows:1e3}))),isOpen&&renderLayer(react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",_extends({},layerProps,{style:{...layerProps.style,padding:"8px 12px",color:"white",font:"500 13px Inter",backgroundColor:"rgba(0, 0, 0, 0.85)",borderRadius:9}}),tooltip.val)))};Tooltips.parameters={options:{showPanel:!1}};const CustomHeader=()=>{const{cols:cols,getCellContent:getCellContent}=useMockDataGenerator(1e3,!0,!0),drawHeader=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((args=>{const{ctx:ctx,rect:rect}=args;ctx.rect(rect.x,rect.y,rect.width,rect.height);const lg=ctx.createLinearGradient(0,rect.y,0,rect.y+rect.height);return lg.addColorStop(0,"#ff00d934"),lg.addColorStop(1,"#00a2ff34"),ctx.fillStyle=lg,ctx.fill(),!1}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeautifulWrapper,{title:"Custom Header",description:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Description,null,"Make it as fancy as you like.")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_2__.a,_extends({},defaultProps,{getCellContent:getCellContent,columns:cols,drawHeader:drawHeader,rows:3e3,rowMarkers:"both"})))};CustomHeader.parameters={options:{showPanel:!1}};try{ResizableColumns.displayName="ResizableColumns",ResizableColumns.__docgenInfo={description:"",displayName:"ResizableColumns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ResizableColumns"]={docgenInfo:ResizableColumns.__docgenInfo,name:"ResizableColumns",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ResizableColumns"})}catch(__react_docgen_typescript_loader_error){}try{AddData.displayName="AddData",AddData.__docgenInfo={description:"",displayName:"AddData",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AddData"]={docgenInfo:AddData.__docgenInfo,name:"AddData",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AddData"})}catch(__react_docgen_typescript_loader_error){}try{AddDataToTop.displayName="AddDataToTop",AddDataToTop.__docgenInfo={description:"",displayName:"AddDataToTop",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AddDataToTop"]={docgenInfo:AddDataToTop.__docgenInfo,name:"AddDataToTop",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AddDataToTop"})}catch(__react_docgen_typescript_loader_error){}try{AddDataToMiddle.displayName="AddDataToMiddle",AddDataToMiddle.__docgenInfo={description:"",displayName:"AddDataToMiddle",props:{insertIndex:{defaultValue:null,description:"",name:"insertIndex",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AddDataToMiddle"]={docgenInfo:AddDataToMiddle.__docgenInfo,name:"AddDataToMiddle",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AddDataToMiddle"})}catch(__react_docgen_typescript_loader_error){}try{OneMillionRows.displayName="OneMillionRows",OneMillionRows.__docgenInfo={description:"",displayName:"OneMillionRows",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#OneMillionRows"]={docgenInfo:OneMillionRows.__docgenInfo,name:"OneMillionRows",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#OneMillionRows"})}catch(__react_docgen_typescript_loader_error){}try{SillyNumbers.displayName="SillyNumbers",SillyNumbers.__docgenInfo={description:"",displayName:"SillyNumbers",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#SillyNumbers"]={docgenInfo:SillyNumbers.__docgenInfo,name:"SillyNumbers",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#SillyNumbers"})}catch(__react_docgen_typescript_loader_error){}try{ObserveVisibleRegion.displayName="ObserveVisibleRegion",ObserveVisibleRegion.__docgenInfo={description:"",displayName:"ObserveVisibleRegion",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ObserveVisibleRegion"]={docgenInfo:ObserveVisibleRegion.__docgenInfo,name:"ObserveVisibleRegion",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ObserveVisibleRegion"})}catch(__react_docgen_typescript_loader_error){}try{OneHundredThousandCols.displayName="OneHundredThousandCols",OneHundredThousandCols.__docgenInfo={description:"",displayName:"OneHundredThousandCols",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#OneHundredThousandCols"]={docgenInfo:OneHundredThousandCols.__docgenInfo,name:"OneHundredThousandCols",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#OneHundredThousandCols"})}catch(__react_docgen_typescript_loader_error){}try{TenMillionCells.displayName="TenMillionCells",TenMillionCells.__docgenInfo={description:"",displayName:"TenMillionCells",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#TenMillionCells"]={docgenInfo:TenMillionCells.__docgenInfo,name:"TenMillionCells",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#TenMillionCells"})}catch(__react_docgen_typescript_loader_error){}try{SmoothScrollingGrid.displayName="SmoothScrollingGrid",SmoothScrollingGrid.__docgenInfo={description:"",displayName:"SmoothScrollingGrid",props:{smoothScrollX:{defaultValue:null,description:"",name:"smoothScrollX",required:!0,type:{name:"boolean"}},smoothScrollY:{defaultValue:null,description:"",name:"smoothScrollY",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#SmoothScrollingGrid"]={docgenInfo:SmoothScrollingGrid.__docgenInfo,name:"SmoothScrollingGrid",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#SmoothScrollingGrid"})}catch(__react_docgen_typescript_loader_error){}try{AddColumns.displayName="AddColumns",AddColumns.__docgenInfo={description:"",displayName:"AddColumns",props:{columnsCount:{defaultValue:null,description:"",name:"columnsCount",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AddColumns"]={docgenInfo:AddColumns.__docgenInfo,name:"AddColumns",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AddColumns"})}catch(__react_docgen_typescript_loader_error){}try{AutomaticRowMarkers.displayName="AutomaticRowMarkers",AutomaticRowMarkers.__docgenInfo={description:"",displayName:"AutomaticRowMarkers",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AutomaticRowMarkers"]={docgenInfo:AutomaticRowMarkers.__docgenInfo,name:"AutomaticRowMarkers",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AutomaticRowMarkers"})}catch(__react_docgen_typescript_loader_error){}try{UnevenRows.displayName="UnevenRows",UnevenRows.__docgenInfo={description:"",displayName:"UnevenRows",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#UnevenRows"]={docgenInfo:UnevenRows.__docgenInfo,name:"UnevenRows",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#UnevenRows"})}catch(__react_docgen_typescript_loader_error){}try{DrawCustomCells.displayName="DrawCustomCells",DrawCustomCells.__docgenInfo={description:"",displayName:"DrawCustomCells",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#DrawCustomCells"]={docgenInfo:DrawCustomCells.__docgenInfo,name:"DrawCustomCells",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#DrawCustomCells"})}catch(__react_docgen_typescript_loader_error){}try{RearrangeColumns.displayName="RearrangeColumns",RearrangeColumns.__docgenInfo={description:"",displayName:"RearrangeColumns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#RearrangeColumns"]={docgenInfo:RearrangeColumns.__docgenInfo,name:"RearrangeColumns",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#RearrangeColumns"})}catch(__react_docgen_typescript_loader_error){}try{RowAndHeaderSizes.displayName="RowAndHeaderSizes",RowAndHeaderSizes.__docgenInfo={description:"",displayName:"RowAndHeaderSizes",props:{rowHeight:{defaultValue:null,description:"",name:"rowHeight",required:!0,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#RowAndHeaderSizes"]={docgenInfo:RowAndHeaderSizes.__docgenInfo,name:"RowAndHeaderSizes",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#RowAndHeaderSizes"})}catch(__react_docgen_typescript_loader_error){}try{MultiSelectColumns.displayName="MultiSelectColumns",MultiSelectColumns.__docgenInfo={description:"",displayName:"MultiSelectColumns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#MultiSelectColumns"]={docgenInfo:MultiSelectColumns.__docgenInfo,name:"MultiSelectColumns",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#MultiSelectColumns"})}catch(__react_docgen_typescript_loader_error){}try{AllCellKinds.displayName="AllCellKinds",AllCellKinds.__docgenInfo={description:"",displayName:"AllCellKinds",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AllCellKinds"]={docgenInfo:AllCellKinds.__docgenInfo,name:"AllCellKinds",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#AllCellKinds"})}catch(__react_docgen_typescript_loader_error){}try{ThemeSupport.displayName="ThemeSupport",ThemeSupport.__docgenInfo={description:"",displayName:"ThemeSupport",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ThemeSupport"]={docgenInfo:ThemeSupport.__docgenInfo,name:"ThemeSupport",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ThemeSupport"})}catch(__react_docgen_typescript_loader_error){}try{ThemePerColumn.displayName="ThemePerColumn",ThemePerColumn.__docgenInfo={description:"",displayName:"ThemePerColumn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ThemePerColumn"]={docgenInfo:ThemePerColumn.__docgenInfo,name:"ThemePerColumn",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ThemePerColumn"})}catch(__react_docgen_typescript_loader_error){}try{BuiltInSearch.displayName="BuiltInSearch",BuiltInSearch.__docgenInfo={description:"",displayName:"BuiltInSearch",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#BuiltInSearch"]={docgenInfo:BuiltInSearch.__docgenInfo,name:"BuiltInSearch",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#BuiltInSearch"})}catch(__react_docgen_typescript_loader_error){}try{HeaderMenus.displayName="HeaderMenus",HeaderMenus.__docgenInfo={description:"",displayName:"HeaderMenus",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#HeaderMenus"]={docgenInfo:HeaderMenus.__docgenInfo,name:"HeaderMenus",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#HeaderMenus"})}catch(__react_docgen_typescript_loader_error){}try{CustomHeaderIcons.displayName="CustomHeaderIcons",CustomHeaderIcons.__docgenInfo={description:"",displayName:"CustomHeaderIcons",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#CustomHeaderIcons"]={docgenInfo:CustomHeaderIcons.__docgenInfo,name:"CustomHeaderIcons",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#CustomHeaderIcons"})}catch(__react_docgen_typescript_loader_error){}try{RightElement.displayName="RightElement",RightElement.__docgenInfo={description:"",displayName:"RightElement",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#RightElement"]={docgenInfo:RightElement.__docgenInfo,name:"RightElement",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#RightElement"})}catch(__react_docgen_typescript_loader_error){}try{RapidUpdates.displayName="RapidUpdates",RapidUpdates.__docgenInfo={description:"",displayName:"RapidUpdates",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#RapidUpdates"]={docgenInfo:RapidUpdates.__docgenInfo,name:"RapidUpdates",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#RapidUpdates"})}catch(__react_docgen_typescript_loader_error){}try{CopySupport.displayName="CopySupport",CopySupport.__docgenInfo={description:"",displayName:"CopySupport",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#CopySupport"]={docgenInfo:CopySupport.__docgenInfo,name:"CopySupport",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#CopySupport"})}catch(__react_docgen_typescript_loader_error){}try{PasteSupport.displayName="PasteSupport",PasteSupport.__docgenInfo={description:"",displayName:"PasteSupport",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#PasteSupport"]={docgenInfo:PasteSupport.__docgenInfo,name:"PasteSupport",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#PasteSupport"})}catch(__react_docgen_typescript_loader_error){}try{FreezeColumns.displayName="FreezeColumns",FreezeColumns.__docgenInfo={description:"",displayName:"FreezeColumns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#FreezeColumns"]={docgenInfo:FreezeColumns.__docgenInfo,name:"FreezeColumns",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#FreezeColumns"})}catch(__react_docgen_typescript_loader_error){}try{ReorderRows.displayName="ReorderRows",ReorderRows.__docgenInfo={description:"",displayName:"ReorderRows",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ReorderRows"]={docgenInfo:ReorderRows.__docgenInfo,name:"ReorderRows",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ReorderRows"})}catch(__react_docgen_typescript_loader_error){}try{ColumnGroups.displayName="ColumnGroups",ColumnGroups.__docgenInfo={description:"",displayName:"ColumnGroups",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ColumnGroups"]={docgenInfo:ColumnGroups.__docgenInfo,name:"ColumnGroups",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ColumnGroups"})}catch(__react_docgen_typescript_loader_error){}try{ColumnGroupCollapse.displayName="ColumnGroupCollapse",ColumnGroupCollapse.__docgenInfo={description:"",displayName:"ColumnGroupCollapse",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ColumnGroupCollapse"]={docgenInfo:ColumnGroupCollapse.__docgenInfo,name:"ColumnGroupCollapse",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#ColumnGroupCollapse"})}catch(__react_docgen_typescript_loader_error){}try{Minimap.displayName="Minimap",Minimap.__docgenInfo={description:"",displayName:"Minimap",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#Minimap"]={docgenInfo:Minimap.__docgenInfo,name:"Minimap",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#Minimap"})}catch(__react_docgen_typescript_loader_error){}try{Tooltips.displayName="Tooltips",Tooltips.__docgenInfo={description:"",displayName:"Tooltips",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#Tooltips"]={docgenInfo:Tooltips.__docgenInfo,name:"Tooltips",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#Tooltips"})}catch(__react_docgen_typescript_loader_error){}try{CustomHeader.displayName="CustomHeader",CustomHeader.__docgenInfo={description:"",displayName:"CustomHeader",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor-beautiful.stories.tsx#CustomHeader"]={docgenInfo:CustomHeader.__docgenInfo,name:"CustomHeader",path:"packages/core/src/data-editor/data-editor-beautiful.stories.tsx#CustomHeader"})}catch(__react_docgen_typescript_loader_error){}},395:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Bug70",(function(){return Bug70})),__webpack_require__.d(__webpack_exports__,"FilterColumns",(function(){return FilterColumns}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_storybook_addons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_stories_story_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(58),_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(72),_data_editor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(81),styled_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7);__webpack_exports__.default={title:"DataEditor/TestCases/Bugs",decorators:[(fn,context)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_4__.a,null,(props=>{var _props$width,_props$height,_props$width2,_props$height2;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_stories_story_utils__WEBPACK_IMPORTED_MODULE_2__.a,{width:null!==(_props$width=props.width)&&void 0!==_props$width?_props$width:1e3,height:null!==(_props$height=props.height)&&void 0!==_props$height?_props$height:800,context:context},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_6__.a,{width:null!==(_props$width2=props.width)&&void 0!==_props$width2?_props$width2:1e3,height:null!==(_props$height2=props.height)&&void 0!==_props$height2?_props$height2:800},fn()))}))]};const bug70Gen=_ref=>{let[,row]=_ref;return{allowOverlay:!0,kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Number,data:row,displayData:row.toString()}},ignore=()=>{},Bug70Style=styled_components__WEBPACK_IMPORTED_MODULE_7__.c.div.withConfig({displayName:"data-editor-reprosstories__Bug70Style",componentId:"sc-1y3fues-0"})(["display:flex;flex-direction:column;> a{margin-bottom:20px;}"]);function Bug70(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Bug70Style,{className:"App"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,"To cause error: scroll down at least one row, edit a cell in Col2, and hit Tab"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:"https://github.com/glideapps/glide-data-grid/issues/70",target:"_blank",rel:"noreferrer"},"Original report"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_6__.a,{width:500,height:500},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{rows:100,columns:[{title:"Col1",width:100},{title:"Col2",width:100}],getCellContent:bug70Gen,onCellEdited:ignore})))}const filterColumnsGen=_ref2=>{let[col,row]=_ref2;return{allowOverlay:!0,kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Text,data:`${col} - ${row}`,displayData:`${col} - ${row}`}},filteringColumns=[{title:"Col AAAA",width:120},{title:"Col AAA",width:120},{title:"Col AA",width:120},{title:"Col A",width:120},{title:"Col",width:120}];function FilterColumns(){const[searchText,setSearchText]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(""),cols=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.d)((()=>""===searchText?filteringColumns:filteringColumns.filter((c=>c.title.toLowerCase().includes(searchText.toLowerCase())))),[searchText]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{value:searchText,onChange:e=>{setSearchText(e.target.value)}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_6__.a,{width:1e3,height:500},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{rows:100,columns:cols,getCellContent:filterColumnsGen,smoothScrollX:!0,smoothScrollY:!0})))}},396:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Simplenotest",(function(){return Simplenotest})),__webpack_require__.d(__webpack_exports__,"RelationColumn",(function(){return RelationColumn})),__webpack_require__.d(__webpack_exports__,"Minimal",(function(){return Minimal})),__webpack_require__.d(__webpack_exports__,"Smooth",(function(){return Smooth})),__webpack_require__.d(__webpack_exports__,"ManualControl",(function(){return ManualControl})),__webpack_require__.d(__webpack_exports__,"Draggable",(function(){return Draggable})),__webpack_require__.d(__webpack_exports__,"IdealSize",(function(){return IdealSize})),__webpack_require__.d(__webpack_exports__,"DynamicAddRemoveColumns",(function(){return DynamicAddRemoveColumns})),__webpack_require__.d(__webpack_exports__,"RowSelectionStateLivesOutside",(function(){return RowSelectionStateLivesOutside})),__webpack_require__.d(__webpack_exports__,"ColSelectionStateLivesOutside",(function(){return ColSelectionStateLivesOutside})),__webpack_require__.d(__webpack_exports__,"GridSelectionOutOfRangeNoColumns",(function(){return GridSelectionOutOfRangeNoColumns})),__webpack_require__.d(__webpack_exports__,"ResizableColumns",(function(){return ResizableColumns})),__webpack_require__.d(__webpack_exports__,"GridSelectionOutOfRangeLessColumnsThanSelection",(function(){return GridSelectionOutOfRangeLessColumnsThanSelection})),__webpack_require__.d(__webpack_exports__,"GridAddNewRows",(function(){return GridAddNewRows})),__webpack_require__.d(__webpack_exports__,"GridNoTrailingBlankRow",(function(){return GridNoTrailingBlankRow})),__webpack_require__.d(__webpack_exports__,"MarkdownEdits",(function(){return MarkdownEdits})),__webpack_require__.d(__webpack_exports__,"CanEditBoolean",(function(){return CanEditBoolean})),__webpack_require__.d(__webpack_exports__,"SimpleEditable",(function(){return SimpleEditable}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_storybook_addons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_stories_story_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(58),_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(72),_data_editor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(81);function getDummyData(_ref){let[col,row]=_ref;return 0===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.RowID,data:`RowID ${col}, ${row}`,allowOverlay:!1}:1===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Bubble,data:[`Bub ${col}`,`Bub ${row}`,`Bub ${col}`,`Bub ${row}`,`Bub ${col}`,`Bub ${row}`,`Bub ${col}`,`Bub ${row}`,`Bub ${col}`,`Bub ${row}`],allowOverlay:!0}:2===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Image,data:["https://i.imgur.com/5J0BftG.jpg","https://preview.redd.it/7jlqkp2cyap51.jpg?width=575&auto=webp&s=26fa9ed15b16fb450ee08ed1f2f0ccb5e0223581"],allowOverlay:!0,allowAdd:!0}:3===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Markdown,data:"## Markdown has titles\n\nAnd supports newline chars and automatic wrapping text that just needs to be long enough to trigger it.\n\n\n[Google](https://google.com)\n\n- with\n- lists\n- that\n- can\n- be\n- pretty\n- long\n                    ",allowOverlay:!0}:4===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Number,displayData:"$10,352",allowOverlay:!0,data:10352,readonly:!0}:5===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Uri,data:"https://www.google.com",allowOverlay:!0}:6===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Boolean,data:row%3==0||row%5==0,showUnchecked:!0,allowEdit:!1,allowOverlay:!1}:7===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Text,displayData:" ",data:" ",allowOverlay:!0,readonly:!0}:8===col?{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Drilldown,data:[{text:"Test",img:"https://allthatsinteresting.com/wordpress/wp-content/uploads/2012/06/iconic-photos-1950-einstein.jpg"},{text:"No Image"}],allowOverlay:!0}:{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Text,displayData:`${col}, ${row} `,data:`${col}, ${row} `,allowOverlay:!0}}function getDummyCols(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].map((i=>({title:i.toString()+" is the longest header in the world",width:120+i%4*10,icon:"headerString",hasMenu:!0})))}function Simplenotest(){const[cols,setColumns]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(getDummyCols),onColumnResized=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)(((col,newSize)=>{const index=cols.indexOf(col),newCols=[...cols];newCols[index]={...newCols[index],width:newSize},setColumns(newCols)}),[cols]),getCellsForSelection=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)((selection=>{const cells=[];for(let yCoord=selection.y;yCoord<selection.y+selection.height;yCoord++){const rowCells=[];for(let xCoord=selection.x;xCoord<selection.x+selection.width;xCoord++)rowCells.push(getDummyData([xCoord,yCoord]));cells.push(rowCells)}return cells}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getDummyData,getCellsForSelection:getCellsForSelection,columns:cols,rows:1e3,onColumnResized:onColumnResized})}function getDummyRelationColumn(){return[{title:"Relation",width:360,icon:"headerString",hasMenu:!0}]}function getDummyRelationData(_ref2){let[col,row]=_ref2;return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Drilldown,data:[{text:`Image ${col}-${row}`,img:"https://allthatsinteresting.com/wordpress/wp-content/uploads/2012/06/iconic-photos-1950-einstein.jpg"},{text:`Text ${col}-${row}`},{text:`More text ${col}-${row}`}],allowOverlay:!0}}function RelationColumn(){const[cols,setColumns]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(getDummyRelationColumn),onColumnResized=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)(((col,newSize)=>{const index=cols.indexOf(col),newCols=[...cols];newCols[index]={...newCols[index],width:newSize},setColumns(newCols)}),[cols]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getDummyRelationData,columns:cols,rows:1e3,onColumnResized:onColumnResized,smoothScrollX:!0,smoothScrollY:!0})}__webpack_exports__.default={title:"DataEditor/TestCases",decorators:[(fn,context)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_4__.a,null,(props=>{var _props$width,_props$height,_props$width2,_props$height2;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_stories_story_utils__WEBPACK_IMPORTED_MODULE_2__.a,{width:null!==(_props$width=props.width)&&void 0!==_props$width?_props$width:1e3,height:null!==(_props$height=props.height)&&void 0!==_props$height?_props$height:800,context:context},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_6__.a,{width:null!==(_props$width2=props.width)&&void 0!==_props$width2?_props$width2:1e3,height:null!==(_props$height2=props.height)&&void 0!==_props$height2?_props$height2:800},fn()))}))]};const columns=[{title:"Number",width:100,icon:"headerArray",overlayIcon:"rowOwnerOverlay"},{title:"Square",width:100}];function getData(_ref3){let[col,row]=_ref3;const n=Math.pow(row,col+1);return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Number,data:n,displayData:n.toString(),allowOverlay:!1}}function Minimal(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getData,columns:columns,rows:1e3})}function Smooth(){const[cols,setCols]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(getDummyCols),onColumnResized=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)(((column,newSize)=>{const index=cols.indexOf(column);if(-1!==index){const newCol={...column,width:newSize},newCols=[...cols];newCols.splice(index,1,newCol),setCols(newCols)}}),[cols]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getDummyData,onColumnResized:onColumnResized,columns:cols,rows:1e3,smoothScrollY:!0,smoothScrollX:!0})}function ManualControl(){const[gridSelection,setGridSelection]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(void 0);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{gridSelection:gridSelection,onGridSelectionChange:newVal=>{var _newVal$cell$;(null!==(_newVal$cell$=null==newVal?void 0:newVal.cell[0])&&void 0!==_newVal$cell$?_newVal$cell$:0)%2==0&&setGridSelection(newVal)},getCellContent:getData,columns:columns,rows:1e3})}function Draggable(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{isDraggable:!0,onDragStart:args=>{args.setData("text","testing")},getCellContent:getData,columns:columns,rows:1e3})}function IdealSize(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{width:500,height:500,position:"relative"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor_container_data_grid_container__WEBPACK_IMPORTED_MODULE_6__.a,{width:500,height:500},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{isDraggable:!0,onDragStart:args=>{args.setData("text","testing")},getCellContent:getData,columns:[{title:"Number",width:250},{title:"Square",width:250}],smoothScrollX:!0,smoothScrollY:!0,rowHeight:50,headerHeight:50,rows:9})))}function DynamicAddRemoveColumns(_ref4){let{columnCount:columnCount}=_ref4;const cols=[{title:"Number",width:250},{title:"Square",width:250}];for(let i=2;i<columnCount;i++)cols.push({title:"Foo",width:250});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{isDraggable:!0,getCellContent:getData,columns:cols,smoothScrollX:!0,smoothScrollY:!0,rowHeight:50,headerHeight:50,rows:9})}function RowSelectionStateLivesOutside(){const[selected_rows,setSelectedRows]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(void 0);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{selectedRows:selected_rows,onSelectedRowsChange:newRows=>{void 0!==newRows&&setSelectedRows(newRows)},isDraggable:!0,onDragStart:args=>{args.setData("text","testing")},getCellContent:getData,columns:columns,rows:1e3})}function ColSelectionStateLivesOutside(){const[selected_cols,setSelectedCols]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.a.empty());return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{selectedColumns:selected_cols,onSelectedColumnsChange:newRows=>{void 0!==newRows&&setSelectedCols(newRows)},isDraggable:!0,onDragStart:args=>{args.setData("text","testing")},getCellContent:getData,columns:columns,rows:1e3})}function GridSelectionOutOfRangeNoColumns(){const dummyCols=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.d)((()=>getDummyCols().map((v=>({...v,width:300,title:"Making column smaller used to crash!"})))),[]),[selected,setSelected]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)({cell:[2,8],range:{width:1,height:1,x:2,y:8}}),[cols,setCols]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(dummyCols),onSelected=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)((newSel=>{setSelected(newSel)}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getDummyData,columns:cols,rows:1e3,onGridSelectionChange:onSelected,gridSelection:selected,onColumnResized:(_col,newSize)=>{setCols(newSize>300?dummyCols:[])}})}function getResizableColumnsInitSize(){return{"resize me 0":120,"resize me 1":120,"resize me 2":120,"resize me 3":120,"resize me 4":120,"resize me 5":120,"resize me 6":120,"resize me 7":120}}function ResizableColumns(){const[colSizes,setColSizes]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(getResizableColumnsInitSize),cols=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.d)((()=>function getResizableColumns(sizeMap){return Object.entries(sizeMap).map((_ref5=>{let[title,width]=_ref5;return{title:title,width:width,icon:"headerString",hasMenu:!0}}))}(colSizes)),[colSizes]),onColumnResized=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)(((column,newSize)=>{setColSizes((prevColSizes=>({...prevColSizes,[column.title]:newSize})))}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getDummyData,columns:cols,rows:20,isDraggable:!1,smoothScrollX:!0,smoothScrollY:!0,onColumnResized:onColumnResized})}function GridSelectionOutOfRangeLessColumnsThanSelection(){const dummyCols=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.d)((()=>getDummyCols().map((v=>({...v,width:300,title:"Making column smaller used to crash!"})))),[]),[selected,setSelected]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)({cell:[2,8],range:{width:1,height:1,x:2,y:8}}),[cols,setCols]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(dummyCols),onSelected=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)((newSel=>{setSelected(newSel)}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getDummyData,columns:cols,rows:1e3,onGridSelectionChange:onSelected,gridSelection:selected,onColumnResized:(_col,newSize)=>{setCols(newSize>300?dummyCols:[dummyCols[0]])}})}function GridAddNewRows(){const cols=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.d)(getDummyCols,[]),[rowsCount,setRowsCount]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(10),onRowAppended=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)((()=>{setRowsCount((r=>r+1))}),[]),[selected,setSelected]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(void 0),onSelected=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)((newSel=>{setSelected(newSel)}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getDummyData,columns:cols,rows:rowsCount,onRowAppended:onRowAppended,onGridSelectionChange:onSelected,gridSelection:selected})}function GridNoTrailingBlankRow(){const cols=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.d)(getDummyCols,[]),[selected,setSelected]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)(void 0),onSelected=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)((newSel=>{setSelected(newSel)}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:getDummyData,columns:cols,rows:100,onGridSelectionChange:onSelected,gridSelection:selected})}function MarkdownEdits(){const dummyCols=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.d)((()=>[{title:"MD short",width:50},{title:"MD long",width:50}]),[]),dummyCells=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)((_ref6=>{let[col,_row]=_ref6;if(0===col){return{data:"text",allowOverlay:!0,kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Markdown}}if(1===col){return{data:"text really really really long\n## H1\n\n- this\n- is\n- a\n- longer\n- example\n- to\n- test\n- scroll\n- of\n- preview\n                ",allowOverlay:!0,kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Markdown}}return{data:"text",allowOverlay:!0,kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Markdown}}),[]),[selected,setSelected]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)({cell:[2,8],range:{width:1,height:1,x:2,y:8}}),onSelected=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.c)((newSel=>{setSelected(newSel)}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{getCellContent:dummyCells,columns:dummyCols,rows:1e3,onGridSelectionChange:onSelected,gridSelection:selected})}DynamicAddRemoveColumns.args={columnCount:2};const CanEditBoolean=()=>{const[vals,setVals]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)([!1,!1]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{columns:[{title:"Editable",width:100},{title:"Readonly",width:100}],rows:1,getCellContent:_ref7=>{let[col]=_ref7;return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Boolean,allowEdit:0===col,allowOverlay:!1,data:vals[col],showUnchecked:!0}},onCellEdited:(_ref8,newVal)=>{let[col]=_ref8;newVal.kind===_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Boolean&&setVals((cv=>{const f=[...cv];return f.splice(col,1,newVal.data),f}))}})},SimpleEditable=()=>{const[vals,setVals]=Object(_storybook_addons__WEBPACK_IMPORTED_MODULE_1__.e)((()=>{const result=[];for(let i=0;i<2e3;i++)result.push(["Edit","Me"]);return result}));return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_editor__WEBPACK_IMPORTED_MODULE_5__.a,{columns:[{title:"Column A",width:250},{title:"Column B",width:250}],rows:vals.length,getCellContent:_ref9=>{let[col,row]=_ref9;return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Text,allowOverlay:!0,data:vals[row][col],displayData:vals[row][col]}},onCellEdited:(_ref10,newVal)=>{let[col,row]=_ref10;const newVals=[...vals],newRow=[...newVals[row]];"string"==typeof newVal.data&&(newRow[col]=newVal.data),newVals[row]=newRow,setVals(newVals)}})};try{DynamicAddRemoveColumns.displayName="DynamicAddRemoveColumns",DynamicAddRemoveColumns.__docgenInfo={description:"",displayName:"DynamicAddRemoveColumns",props:{columnCount:{defaultValue:null,description:"",name:"columnCount",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor/data-editor.stories.tsx#DynamicAddRemoveColumns"]={docgenInfo:DynamicAddRemoveColumns.__docgenInfo,name:"DynamicAddRemoveColumns",path:"packages/core/src/data-editor/data-editor.stories.tsx#DynamicAddRemoveColumns"})}catch(__react_docgen_typescript_loader_error){}},397:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Simplenotest",(function(){return Simplenotest})),__webpack_require__.d(__webpack_exports__,"SelectedCellnotest",(function(){return SelectedCellnotest})),__webpack_require__.d(__webpack_exports__,"SelectedRownotest",(function(){return SelectedRownotest})),__webpack_require__.d(__webpack_exports__,"SelectedColumnnotest",(function(){return SelectedColumnnotest}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_stories_story_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(58),_data_grid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(106),_data_grid_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1);function Simplenotest(){let x=0;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_grid__WEBPACK_IMPORTED_MODULE_2__.a,{width:600,height:500,cellXOffset:0,cellYOffset:0,onMouseMove:()=>{},groupHeaderHeight:34,enableGroups:!1,rows:1e3,headerHeight:44,rowHeight:34,columns:["One","Two","Three","Four","Five","Six","Seven"].map((t=>({title:t,width:122+(x+=10)}))),getCellContent:_ref=>{let[col,row]=_ref;return{kind:_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Text,displayData:`${col},${row} Testing things that are way too long`,data:`${col},${row} Testing things that are way too long`,allowOverlay:!1,owned:!0}},freezeColumns:0,verticalBorder:()=>!0,lastRowSticky:!1,isResizing:!1,isDragging:!1})}function SelectedCellnotest(){let x=0;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_grid__WEBPACK_IMPORTED_MODULE_2__.a,{width:600,height:500,cellXOffset:0,onMouseMove:()=>{},cellYOffset:0,groupHeaderHeight:34,enableGroups:!1,rows:1e3,headerHeight:44,rowHeight:34,columns:["One","Two","Three","Four","Five","Six","Seven"].map((t=>({title:t,width:122+(x+=10)}))),getCellContent:_ref2=>{let[col,row]=_ref2;return{kind:_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Text,displayData:`${col},${row} Testing things that are way too long`,data:`${col},${row} Testing things that are way too long`,allowOverlay:!1,owned:!0}},selectedCell:{cell:[2,2],range:{x:2,y:2,width:1,height:1}},freezeColumns:0,verticalBorder:()=>!0,lastRowSticky:!1,isResizing:!1,isDragging:!1})}function SelectedRownotest(){let x=0;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_grid__WEBPACK_IMPORTED_MODULE_2__.a,{onMouseMove:()=>{},width:600,height:500,cellXOffset:0,cellYOffset:0,groupHeaderHeight:34,enableGroups:!1,rows:1e3,headerHeight:44,rowHeight:34,columns:["One","Two","Three","Four","Five","Six","Seven"].map((t=>({title:t,width:122+(x+=10)}))),getCellContent:_ref3=>{let[col,row]=_ref3;return{kind:_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Text,displayData:`${col},${row} Testing things that are way too long`,data:`${col},${row} Testing things that are way too long`,allowOverlay:!1,owned:!0}},selectedRows:_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.a.fromSingleSelection([2,4]),freezeColumns:0,verticalBorder:()=>!0,lastRowSticky:!1,isResizing:!1,isDragging:!1})}__webpack_exports__.default={title:"Subcomponents/DataGrid",decorators:[(fn,context)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_stories_story_utils__WEBPACK_IMPORTED_MODULE_1__.a,{width:600,height:0,context:context},fn()))]};const SelectedColumnnotest=()=>{let x=0;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_data_grid__WEBPACK_IMPORTED_MODULE_2__.a,{onMouseMove:()=>{},width:600,height:500,cellXOffset:0,cellYOffset:0,groupHeaderHeight:34,enableGroups:!1,rows:1e3,headerHeight:44,rowHeight:34,columns:["One","Two","Three","Four","Five","Six","Seven"].map((t=>({title:t,width:122+(x+=10)}))),getCellContent:_ref4=>{let[col,row]=_ref4;return{kind:_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.b.Text,displayData:`${col},${row} Testing things that are way too long`,data:`${col},${row} Testing things that are way too long`,allowOverlay:!1,owned:!0}},selectedColumns:_data_grid_types__WEBPACK_IMPORTED_MODULE_3__.a.fromSingleSelection([2,4]),freezeColumns:0,verticalBorder:()=>!0,lastRowSticky:!1,isResizing:!1,isDragging:!1})}},403:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Simplenotest",(function(){return Simplenotest}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_stories_story_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(58),_scrolling_data_grid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(196),_common_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14),_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1);const InnerContainer=_common_styles__WEBPACK_IMPORTED_MODULE_3__.b.div`
    width: 100%;
    height: 100px;

    > * {
        position: absolute;
        width: 100%;
        height: 100%;
    }
`;function Simplenotest(){const[x,setX]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),[y,setY]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),[translateX,setTx]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),[translateY,setTy]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),onVisibleRegionChanged=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((range,tx,ty)=>{setX(range.x),setY(range.y),setTx(tx),setTy(ty)}),[]),columns=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{let j=0;return["One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten"].map((t=>({title:t,width:122+(j+=50)})))}),[]),getCellContent=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((_ref=>{let[col,row]=_ref;return{kind:_data_grid_data_grid_types__WEBPACK_IMPORTED_MODULE_4__.b.Text,displayData:`${col},${row} Testing things that are way too long`,data:`${col},${row} Testing things that are way too long`,allowOverlay:!0}}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_scrolling_data_grid__WEBPACK_IMPORTED_MODULE_2__.a,{onMouseMove:()=>{},rows:1e4,enableGroups:!1,cellXOffset:x,cellYOffset:y,translateX:translateX,translateY:translateY,lockColumns:0,groupHeaderHeight:34,headerHeight:44,lastRowSticky:!1,rowHeight:34,onVisibleRegionChanged:onVisibleRegionChanged,columns:columns,getCellContent:getCellContent,freezeColumns:0,verticalBorder:()=>!0,smoothScrollX:!0,smoothScrollY:!0})}__webpack_exports__.default={title:"Subcomponents/ScrollingDataGrid",decorators:[(fn,context)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_stories_story_utils__WEBPACK_IMPORTED_MODULE_1__.a,{width:1500,height:1e3,context:context},react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerContainer,null,fn())))]}},405:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"GridColumns",(function(){return GridColumns}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),data_grid_types=__webpack_require__(1),data_editor=__webpack_require__(3),story_utils=__webpack_require__(58),styles=__webpack_require__(14),marked=__webpack_require__(124),marked_default=__webpack_require__.n(marked),default_highlight=__webpack_require__(2485),monokai_sublime=__webpack_require__(420);const Wrapper=styles.b.div`
    overflow: hidden;
    position: relative;

    border-radius: 12px;

    width: 100%;
    height: ${p=>p.height}px;

    margin: 24px 0;

    > :first-child {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
    }
`,Highlight=p=>react_default.a.createElement(default_highlight.a,{style:monokai_sublime.a,showLineNumbers:!0,lineNumberStyle:{opacity:.5},language:"typescript"},p.children.trim()),Marked=p=>react_default.a.createElement("div",{className:"marked",dangerouslySetInnerHTML:{__html:marked_default()(p.children)}}),BeautifulStyle=styles.b.div`
    background-color: #2790b9;
    background: linear-gradient(90deg, #2790b9, #2070a9);
    color: white;

    padding: 32px 48px;

    display: flex;
    align-items: center;
    flex-direction: column;
    min-height: 100vh;

    font-family: sans-serif;

    & .inner {
        position: relative;
        max-width: 900px;

        > pre {
            font-size: 18px;
            border-radius: 9px;
            background: rgba(25, 26, 23, 0.8) !important;
        }
    }

    .marked {
        font-size: 16px;
        blockquote {
            margin: 0;
            padding: 1px 16px;

            border-radius: 9px;
            background-color: rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(0, 0, 0, 0.5);
        }

        code {
            color: #ffcc80;
        }

        h1 {
            font-size: 32px;
            font-weight: 600;
            padding-bottom: 12px;
            margin-top: 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
    }
`,PropName=styles.b.span`
    font-family: monospace;
    font-weight: 500;
    color: #ffe394;
`,Description=styles.b.p`
    font-size: 18px;
    flex-shrink: 0;
    margin: 0 0 20px 0;
`,MoreInfo=styles.b.p`
    font-size: 14px;
    flex-shrink: 0;
    margin: 0 0 20px 0;

    button {
        background-color: #f4f4f4;
        color: #2b2b2b;
        padding: 2px 6px;
        font-family: monospace;
        font-size: 14px;
        border-radius: 4px;
        box-shadow: 0px 1px 2px #00000040;
        margin: 0 0.1em;
        border: none;
        cursor: pointer;
    }
`,DocWrapper=p=>{const{children:children}=p;return react_default.a.createElement(BeautifulStyle,null,react_default.a.createElement("div",{className:"inner"},children))};try{Wrapper.displayName="Wrapper",Wrapper.__docgenInfo={description:"",displayName:"Wrapper",props:{height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/docs/doc-wrapper.tsx#Wrapper"]={docgenInfo:Wrapper.__docgenInfo,name:"Wrapper",path:"packages/core/src/docs/doc-wrapper.tsx#Wrapper"})}catch(__react_docgen_typescript_loader_error){}try{PropName.displayName="PropName",PropName.__docgenInfo={description:"",displayName:"PropName",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLSpanElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/docs/doc-wrapper.tsx#PropName"]={docgenInfo:PropName.__docgenInfo,name:"PropName",path:"packages/core/src/docs/doc-wrapper.tsx#PropName"})}catch(__react_docgen_typescript_loader_error){}try{Description.displayName="Description",Description.__docgenInfo={description:"",displayName:"Description",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLParagraphElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/docs/doc-wrapper.tsx#Description"]={docgenInfo:Description.__docgenInfo,name:"Description",path:"packages/core/src/docs/doc-wrapper.tsx#Description"})}catch(__react_docgen_typescript_loader_error){}try{MoreInfo.displayName="MoreInfo",MoreInfo.__docgenInfo={description:"",displayName:"MoreInfo",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLParagraphElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/docs/doc-wrapper.tsx#MoreInfo"]={docgenInfo:MoreInfo.__docgenInfo,name:"MoreInfo",path:"packages/core/src/docs/doc-wrapper.tsx#MoreInfo"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Docs",decorators:[Story=>react.createElement(story_utils.b,null,react.createElement(Story,null))]};const GridColumns=()=>{const basicGetCellContent=react.useCallback((cell=>({kind:data_grid_types.b.Text,allowOverlay:!1,displayData:cell.toString(),data:cell.toString()})),[]),cols=react.useMemo((()=>[{title:"First",width:150},{title:"Second",width:150}]),[]);return react.createElement(DocWrapper,null,react.createElement(Marked,null,"\n# Basic usage\n\n> The `GridColumn[]` passed to the `DataEditor` in the `columns` property should be memoized to avoid excessive re-rendering. These samples may not do this for the sake of brevity.\n\nThere are only two mandatory properties for each `GridColumn`: `title` and `width`. The width is a number which represents the width of the column in pixels."),react.createElement(Highlight,null,'\nconst columns: GridColumn[] = [\n    { title: "First", width: 150 },\n    { title: "Second", width: 150 }\n];\n\n<DataEditor {...rest} columns={columns} />\n'),react.createElement(Wrapper,{height:200},react.createElement(data_editor.a,{getCellContent:basicGetCellContent,columns:cols,rows:50})),react.createElement(Marked,null,"\n# Header icons\n\nDefault header icons are available. They can also be reaplced by passing a new map to the `headerIcons` property."),react.createElement(Highlight,null,'\nconst columns: GridColumn[] = [\n    { title: "Name", width: 250, icon: GridColumnIcon.HeaderString, \n      overlayIcon: GridColumnIcon.RowOwnerOverlay \n    },\n    { title: "Age", width: 100, icon: GridColumnIcon.HeaderNumber },\n    { title: "Avatar", width: 80, icon: GridColumnIcon.HeaderImage },\n];\n\n<DataEditor {...rest} columns={columns} />\n'),react.createElement(Wrapper,{height:200},react.createElement(data_editor.a,{getCellContent:basicGetCellContent,columns:[{title:"Name",width:250,icon:data_grid_types.c.HeaderString,overlayIcon:data_grid_types.c.RowOwnerOverlay},{title:"Age",width:120,icon:data_grid_types.c.HeaderNumber},{title:"Avatar",width:100,icon:data_grid_types.c.HeaderImage}],rows:50})),react.createElement(Marked,null,"\n# Header theming\n\nHeaders can be provided with individual theme overrides which themes both the header and its column cells."),react.createElement(Highlight,null,'\nconst columns: GridColumn[] = [\n    { title: "Name", width: 250, icon: GridColumnIcon.HeaderString },\n    { title: "Age", width: 100, icon: GridColumnIcon.HeaderNumber, themeOverride: {\n        bgIconHeader: "#00967d",\n        textDark: "#00c5a4",\n        textHeader: "#00c5a4",\n    } },\n    { title: "Avatar", width: 80, icon: GridColumnIcon.HeaderImage },\n];\n\n<DataEditor {...rest} columns={columns} />\n'),react.createElement(Wrapper,{height:200},react.createElement(data_editor.a,{getCellContent:basicGetCellContent,columns:[{title:"Name",width:250,icon:data_grid_types.c.HeaderString},{title:"Age",width:100,icon:data_grid_types.c.HeaderNumber,themeOverride:{bgIconHeader:"#00967d",textDark:"#00c5a4",textHeader:"#00c5a4"}},{title:"Avatar",width:80,icon:data_grid_types.c.HeaderImage}],rows:50})))};GridColumns.parameters={options:{showPanel:!1}};try{GridColumns.displayName="GridColumns",GridColumns.__docgenInfo={description:"",displayName:"GridColumns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/docs/grid-column.stories.tsx#GridColumns"]={docgenInfo:GridColumns.__docgenInfo,name:"GridColumns",path:"packages/core/src/docs/grid-column.stories.tsx#GridColumns"})}catch(__react_docgen_typescript_loader_error){}},427:function(module,exports,__webpack_require__){__webpack_require__(428),__webpack_require__(584),__webpack_require__(585),__webpack_require__(2481),__webpack_require__(2482),module.exports=__webpack_require__(724)},46:function(module,__webpack_exports__,__webpack_require__){"use strict";function proveType(_val){}function panic(){let message=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This should not happen";throw new Error(message)}function assert(fact){let message=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion failed";if(!fact)return panic(message)}function assertNever(_never){return panic("Hell froze over")}function maybe(fn,defaultValue){try{return fn()}catch{return defaultValue}}__webpack_require__.d(__webpack_exports__,"d",(function(){return proveType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return assert})),__webpack_require__.d(__webpack_exports__,"b",(function(){return assertNever})),__webpack_require__.d(__webpack_exports__,"c",(function(){return maybe}))},494:function(module,exports){},58:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BuilderThemeWrapper})),__webpack_require__.d(__webpack_exports__,"b",(function(){return SimpleThemeWrapper}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_common_styles__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(2230),__webpack_require__(14));const BuilderWrapper=styled_components__WEBPACK_IMPORTED_MODULE_1__.c.div.withConfig({displayName:"story-utils__BuilderWrapper",componentId:"sc-ctx130-0"})(["display:flex;height:100vh;& > .content{display:block;width:","px;min-height:","px;align-self:center;position:relative;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0,0,0,0);user-select:none;box-sizing:border-box;*,*::before,*::after{box-sizing:inherit;}}"],(p=>p.width),(p=>p.height)),SimpleWrapper=styled_components__WEBPACK_IMPORTED_MODULE_1__.c.div.withConfig({displayName:"story-utils__SimpleWrapper",componentId:"sc-ctx130-1"})(["text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;box-sizing:border-box;*,*::before,*::after{box-sizing:inherit;}"]);class BuilderThemeWrapper extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{constructor(){super(...arguments),this.builderTheme=Object(_common_styles__WEBPACK_IMPORTED_MODULE_3__.a)()}render(){const{context:context,...rest}=this.props;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(styled_components__WEBPACK_IMPORTED_MODULE_1__.a,{theme:this.builderTheme},react__WEBPACK_IMPORTED_MODULE_0__.createElement(BuilderWrapper,rest,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},this.props.children)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{id:"portal"}))}}const SimpleThemeWrapper=p=>{const[builderTheme]=react__WEBPACK_IMPORTED_MODULE_0__.useState(_common_styles__WEBPACK_IMPORTED_MODULE_3__.a);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(styled_components__WEBPACK_IMPORTED_MODULE_1__.a,{theme:builderTheme},react__WEBPACK_IMPORTED_MODULE_0__.createElement(SimpleWrapper,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content"},p.children)))};try{BuilderThemeWrapper.displayName="BuilderThemeWrapper",BuilderThemeWrapper.__docgenInfo={description:"",displayName:"BuilderThemeWrapper",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},useMoreTopPadding:{defaultValue:null,description:"",name:"useMoreTopPadding",required:!1,type:{name:"boolean"}},figmaDoc:{defaultValue:null,description:"",name:"figmaDoc",required:!1,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!1,type:{name:"StoryContext"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/stories/story-utils.tsx#BuilderThemeWrapper"]={docgenInfo:BuilderThemeWrapper.__docgenInfo,name:"BuilderThemeWrapper",path:"packages/core/src/stories/story-utils.tsx#BuilderThemeWrapper"})}catch(__react_docgen_typescript_loader_error){}try{SimpleThemeWrapper.displayName="SimpleThemeWrapper",SimpleThemeWrapper.__docgenInfo={description:"",displayName:"SimpleThemeWrapper",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/stories/story-utils.tsx#SimpleThemeWrapper"]={docgenInfo:SimpleThemeWrapper.__docgenInfo,name:"SimpleThemeWrapper",path:"packages/core/src/stories/story-utils.tsx#SimpleThemeWrapper"})}catch(__react_docgen_typescript_loader_error){}},585:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(188)},66:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CellRenderers}));var data_grid_types=__webpack_require__(1),data_grid_lib=__webpack_require__(10);const booleanCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:"false"},kind:data_grid_types.b.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,render:a=>Object(data_grid_lib.a)(a,a.cell.data,a.cell.allowEdit),onDelete:c=>({...c,data:!1}),onClick:(cell,x,y,bounds)=>{if(Math.abs(x-bounds.width/2)<=10&&Math.abs(y-bounds.height/2)<=10)return{...cell,data:!cell.data}}};var react=__webpack_require__(0),react_default=__webpack_require__.n(react),styles=__webpack_require__(14);const BubblesOverlayEditorStyle=styles.b.div`
    display: flex;
    flex-wrap: wrap;

    .boe-bubble {
        display: flex;
        justify-content: center;
        align-items: center;

        border-radius: 100px;

        padding: 0 8px;
        height: 20px;

        background-color: ${p=>p.theme.bgBubble};
        color: ${p=>p.theme.textDark};
        margin: 2px;
    }

    textarea {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;

        opacity: 0;
    }
`;try{BubblesOverlayEditorStyle.displayName="BubblesOverlayEditorStyle",BubblesOverlayEditorStyle.__docgenInfo={description:"",displayName:"BubblesOverlayEditorStyle",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/bubbles-overlay-editor-style.tsx#BubblesOverlayEditorStyle"]={docgenInfo:BubblesOverlayEditorStyle.__docgenInfo,name:"BubblesOverlayEditorStyle",path:"packages/core/src/data-grid-overlay-editor/private/bubbles-overlay-editor-style.tsx#BubblesOverlayEditorStyle"})}catch(__react_docgen_typescript_loader_error){}var bubbles_overlay_editor=p=>{const{bubbles:bubbles,onKeyDown:onKeyDown}=p;return react.createElement(BubblesOverlayEditorStyle,null,bubbles.map(((b,i)=>react.createElement("div",{key:i,className:"boe-bubble"},b))),react.createElement("textarea",{autoFocus:!0,onKeyDown:onKeyDown}))};try{bubblesoverlayeditor.displayName="bubblesoverlayeditor",bubblesoverlayeditor.__docgenInfo={description:"",displayName:"bubblesoverlayeditor",props:{bubbles:{defaultValue:null,description:"",name:"bubbles",required:!0,type:{name:"readonly string[]"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!0,type:{name:"(event: KeyboardEvent<Element>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/bubbles-overlay-editor.tsx#bubblesoverlayeditor"]={docgenInfo:bubblesoverlayeditor.__docgenInfo,name:"bubblesoverlayeditor",path:"packages/core/src/data-grid-overlay-editor/private/bubbles-overlay-editor.tsx#bubblesoverlayeditor"})}catch(__react_docgen_typescript_loader_error){}const bubbleCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:data_grid_types.b.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,render:a=>Object(data_grid_lib.b)(a,a.cell.data),getEditor:()=>p=>{const{onKeyDown:onKeyDown,value:value}=p;return react.createElement(bubbles_overlay_editor,{bubbles:value.data,onKeyDown:onKeyDown})}},DrilldownOverlayEditorStyle=styles.b.div`
    display: flex;
    flex-wrap: wrap;

    .doe-bubble {
        display: flex;
        justify-content: center;
        align-items: center;

        border-radius: 100px;

        padding: 0 8px;
        height: 24px;

        background-color: ${p=>p.theme.bgCell};
        color: ${p=>p.theme.textDark};
        margin: 2px;

        border-radius: 6px;

        box-shadow: 0 0 1px rgba(62, 65, 86, 0.4), 0 1px 3px rgba(62, 65, 86, 0.4);

        img {
            height: 16px;
            object-fit: contain;

            margin-right: 4px;
        }
    }

    textarea {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;

        opacity: 0;
    }
`;var drilldown_overlay_editor=p=>{const{drilldowns:drilldowns,onKeyDown:onKeyDown}=p;return react.createElement(DrilldownOverlayEditorStyle,null,drilldowns.map(((d,i)=>react.createElement("div",{key:i,className:"doe-bubble"},void 0!==d.img&&react.createElement("img",{src:d.img}),react.createElement("div",null,d.text)))),react.createElement("textarea",{autoFocus:!0,onKeyDown:onKeyDown}))};try{drilldownoverlayeditor.displayName="drilldownoverlayeditor",drilldownoverlayeditor.__docgenInfo={description:"",displayName:"drilldownoverlayeditor",props:{drilldowns:{defaultValue:null,description:"",name:"drilldowns",required:!0,type:{name:"readonly DrilldownCellData[]"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!0,type:{name:"(event: KeyboardEvent<Element>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/drilldown-overlay-editor.tsx#drilldownoverlayeditor"]={docgenInfo:drilldownoverlayeditor.__docgenInfo,name:"drilldownoverlayeditor",path:"packages/core/src/data-grid-overlay-editor/private/drilldown-overlay-editor.tsx#drilldownoverlayeditor"})}catch(__react_docgen_typescript_loader_error){}const drilldownCellRenderer={getAccessibilityString:c=>c.data.map((d=>d.text)).join(", "),kind:data_grid_types.b.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,render:a=>Object(data_grid_lib.c)(a,a.cell.data),getEditor:()=>p=>{const{onKeyDown:onKeyDown,value:value}=p;return react.createElement(drilldown_overlay_editor,{drilldowns:value.data,onKeyDown:onKeyDown})}},ImageOverlayEditorStyle=styles.b.div`
    display: flex;

    height: 100%;

    .centering-container {
        display: flex;
        justify-content: center;
        align-items: center;

        height: 100%;

        img,
        canvas {
            max-height: calc(100vh - var(--overlay-top) - 20px);
            object-fit: contain;
            user-select: none;
        }

        canvas {
            max-width: 380px;
        }
    }

    .edit-icon {
        position: absolute;
        top: 12px;
        right: 0;
        width: 48px;
        height: 48px;
        color: ${p=>p.theme.accentColor};

        cursor: pointer;

        display: flex;
        justify-content: center;
        align-items: center;

        > * {
            width: 24px;
            height: 24px;
        }
    }

    textarea {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;

        opacity: 0;
    }
`;try{ImageOverlayEditorStyle.displayName="ImageOverlayEditorStyle",ImageOverlayEditorStyle.__docgenInfo={description:"",displayName:"ImageOverlayEditorStyle",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/image-overlay-editor-style.tsx#ImageOverlayEditorStyle"]={docgenInfo:ImageOverlayEditorStyle.__docgenInfo,name:"ImageOverlayEditorStyle",path:"packages/core/src/data-grid-overlay-editor/private/image-overlay-editor-style.tsx#ImageOverlayEditorStyle"})}catch(__react_docgen_typescript_loader_error){}var js=__webpack_require__(192),utils=__webpack_require__(20);var image_overlay_editor=p=>{const{urls:urls,canWrite:canWrite,onKeyDown:onKeyDown,onEditClick:onEditClick,renderImage:renderImage}=p,filtered=urls.filter((u=>""!==u));if(0===filtered.length)return null;const allowMove=filtered.length>1;return react.createElement(ImageOverlayEditorStyle,{onKeyDown:onKeyDown},react.createElement(js.Carousel,{showArrows:allowMove,showThumbs:!1,swipeable:allowMove,emulateTouch:allowMove,infiniteLoop:allowMove},filtered.map((url=>{var _renderImage;const innerContent=null!==(_renderImage=null==renderImage?void 0:renderImage(url))&&void 0!==_renderImage?_renderImage:react.createElement("img",{draggable:!1,src:url});return react.createElement("div",{className:"centering-container",key:url},innerContent)}))),canWrite&&onEditClick&&react.createElement("button",{className:"edit-icon",onClick:onEditClick},react.createElement(utils.b,null)),react.createElement("textarea",{autoFocus:!0,onKeyDown:onKeyDown}))};try{imageoverlayeditor.displayName="imageoverlayeditor",imageoverlayeditor.__docgenInfo={description:"",displayName:"imageoverlayeditor",props:{urls:{defaultValue:null,description:"",name:"urls",required:!0,type:{name:"readonly string[]"}},canWrite:{defaultValue:null,description:"",name:"canWrite",required:!0,type:{name:"boolean"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newImage: string) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!0,type:{name:"(event: KeyboardEvent<Element>) => void"}},onEditClick:{defaultValue:null,description:"",name:"onEditClick",required:!1,type:{name:"() => void"}},renderImage:{defaultValue:null,description:"",name:"renderImage",required:!1,type:{name:"(url: string) => ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/image-overlay-editor.tsx#imageoverlayeditor"]={docgenInfo:imageoverlayeditor.__docgenInfo,name:"imageoverlayeditor",path:"packages/core/src/data-grid-overlay-editor/private/image-overlay-editor.tsx#imageoverlayeditor"})}catch(__react_docgen_typescript_loader_error){}const imageCellRenderer={getAccessibilityString:c=>c.data.join(", "),kind:data_grid_types.b.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,render:a=>{var _a$cell$displayData;return Object(data_grid_lib.d)(a,null!==(_a$cell$displayData=a.cell.displayData)&&void 0!==_a$cell$displayData?_a$cell$displayData:a.cell.data)},onDelete:c=>({...c,data:[]}),getEditor:()=>p=>{const{onKeyDown:onKeyDown,value:value,onFinishedEditing:onFinishedEditing,imageEditorOverride:imageEditorOverride}=p,ImageEditor=null!=imageEditorOverride?imageEditorOverride:image_overlay_editor;return react.createElement(ImageEditor,{urls:value.data,canWrite:value.allowAdd,onCancel:onFinishedEditing,onChange:newImage=>{onFinishedEditing({...value,data:[newImage]})},onKeyDown:onKeyDown})}},loadingCellRenderer={getAccessibilityString:()=>"",kind:data_grid_types.b.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,render:()=>{}};var marked=__webpack_require__(124),marked_default=__webpack_require__.n(marked);const MarkdownContainer=__webpack_require__(7).c.div.withConfig({displayName:"markdown-container__MarkdownContainer",componentId:"sc-rncfxa-0"})(["word-break:break-word;-webkit-touch-callout:default;padding-top:6px;> *{margin:0;}& *:last-child{margin-bottom:0;}& p img{width:100%;}"]);try{MarkdownContainer.displayName="MarkdownContainer",MarkdownContainer.__docgenInfo={description:"",displayName:"MarkdownContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/markdown-div/private/markdown-container.tsx#MarkdownContainer"]={docgenInfo:MarkdownContainer.__docgenInfo,name:"MarkdownContainer",path:"packages/core/src/markdown-div/private/markdown-container.tsx#MarkdownContainer"})}catch(__react_docgen_typescript_loader_error){}class markdown_div_MarkdownDiv extends react_default.a.PureComponent{constructor(){super(...arguments),this.targetElement=null,this.containerRefHook=element=>{this.targetElement=element,this.renderMarkdownIntoDiv()}}renderMarkdownIntoDiv(){const{targetElement:targetElement}=this;if(null===targetElement)return;const{contents:contents,createNode:createNode}=this.props,innerHTML=marked_default()(contents),childRange=document.createRange();childRange.selectNodeContents(targetElement),childRange.deleteContents();let newChild=null==createNode?void 0:createNode(innerHTML);if(void 0===newChild){const childDoc=document.createElement("template");childDoc.innerHTML=innerHTML,newChild=childDoc.content}targetElement.appendChild(newChild);const tags=targetElement.getElementsByTagName("a");for(let i=0;i<tags.length;i++){const tag=tags[i];tag.target="_blank",tag.rel="noreferrer noopener"}}render(){return this.renderMarkdownIntoDiv(),react_default.a.createElement(MarkdownContainer,{ref:this.containerRefHook})}}var growing_entry_style=__webpack_require__(96),support=__webpack_require__(46);function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var growing_entry=props=>{const{placeholder:placeholder,value:value,onKeyDown:onKeyDown,highlight:highlight,...rest}=props,{onChange:onChange,className:className}=rest,inputRef=react.useRef(null),useText=null!=value?value:"";return Object(support.a)(void 0!==onChange,"GrowingEntry must be a controlled input area"),react.useEffect((()=>{const ta=inputRef.current;if(null===ta)return;if(ta.disabled)return;const length=useText.toString().length;ta.focus(),ta.setSelectionRange(highlight?0:length,length)}),[]),react.createElement(growing_entry_style.a,null,react.createElement(growing_entry_style.c,{className:className},useText+"\n"),react.createElement(growing_entry_style.b,_extends({},rest,{ref:inputRef,onKeyDown:onKeyDown,value:useText,placeholder:placeholder,dir:"auto"})))};try{growingentry.displayName="growingentry",growingentry.__docgenInfo={description:"",displayName:"growingentry",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/growing-entry/growing-entry.tsx#growingentry"]={docgenInfo:growingentry.__docgenInfo,name:"growingentry",path:"packages/core/src/growing-entry/growing-entry.tsx#growingentry"})}catch(__react_docgen_typescript_loader_error){}const MarkdownOverlayEditorStyle=styles.b.div`
    min-width: ${p=>p.targetRect.width}px;
    width: 100%;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    position: relative;
    color: ${p=>p.theme.textDark};

    ${growing_entry_style.a} {
        flex-shrink: 1;
        min-width: 0;
    }

    .spacer {
        flex: 1;
    }

    .edit-icon {
        position: relative;
        cursor: pointer;

        display: flex;
        justify-content: center;
        align-items: center;

        color: ${p=>p.theme.accentColor};

        padding: 0;

        height: 24px;
        width: 24px;
        flex-shrink: 0;

        transition: all "0.125s ease";

        border-radius: 6px;

        > * {
            width: 16px;
            height: 16px;
        }
    }

    .edit-hover {
        :hover {
            background-color: ${p=>p.theme.accentLight};
            transition: background-color 150ms;
        }
    }

    .checkmark-hover {
        :hover {
            color: #ffffff;
            background-color: ${p=>p.theme.accentColor};
        }
    }

    .md-edit-textarea {
        position: relative;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;
        margin-top: 25px;
        opacity: 0;
        padding: 0;
    }

    .ml-6 {
        margin-left: 6px;
    }
`;try{MarkdownOverlayEditorStyle.displayName="MarkdownOverlayEditorStyle",MarkdownOverlayEditorStyle.__docgenInfo={description:"",displayName:"MarkdownOverlayEditorStyle",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},targetRect:{defaultValue:null,description:"",name:"targetRect",required:!0,type:{name:"Rectangle"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/markdown-overlay-editor-style.tsx#MarkdownOverlayEditorStyle"]={docgenInfo:MarkdownOverlayEditorStyle.__docgenInfo,name:"MarkdownOverlayEditorStyle",path:"packages/core/src/data-grid-overlay-editor/private/markdown-overlay-editor-style.tsx#MarkdownOverlayEditorStyle"})}catch(__react_docgen_typescript_loader_error){}const MarkdownOverlayEditor=p=>{const{markdown:markdown,onChange:onChange,onKeyDown:onKeyDown,forceEditMode:forceEditMode,createNode:createNode,targetRect:targetRect,readonly:readonly,onFinish:onFinish}=p,[editMode,setEditMode]=react.useState(""===markdown||forceEditMode),onEditClick=react.useCallback((()=>{setEditMode((e=>!e))}),[]),addLeftPad=markdown?"ml-6":"";return editMode?react.createElement(MarkdownOverlayEditorStyle,{targetRect:targetRect},react.createElement(growing_entry,{autoFocus:!0,highlight:!1,onKeyDown:onKeyDown,value:markdown,onChange:onChange}),react.createElement("div",{className:`edit-icon checkmark-hover ${addLeftPad}`,onClick:()=>onFinish()},react.createElement(utils.a,null))):react.createElement(MarkdownOverlayEditorStyle,{targetRect:targetRect},react.createElement(markdown_div_MarkdownDiv,{contents:markdown,createNode:createNode}),!readonly&&react.createElement(react.Fragment,null,react.createElement("div",{className:"spacer"}),react.createElement("div",{className:`edit-icon edit-hover ${addLeftPad}`,onClick:onEditClick},react.createElement(utils.b,null))),react.createElement("textarea",{className:"md-edit-textarea",autoFocus:!0,onKeyDown:onKeyDown}))};try{MarkdownOverlayEditor.displayName="MarkdownOverlayEditor",MarkdownOverlayEditor.__docgenInfo={description:"",displayName:"MarkdownOverlayEditor",props:{targetRect:{defaultValue:null,description:"",name:"targetRect",required:!0,type:{name:"Rectangle"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!0,type:{name:"string"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!0,type:{name:"(event: KeyboardEvent<HTMLTextAreaElement>) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(ev: ChangeEvent<HTMLTextAreaElement>) => void"}},forceEditMode:{defaultValue:null,description:"",name:"forceEditMode",required:!0,type:{name:"boolean"}},onFinish:{defaultValue:null,description:"",name:"onFinish",required:!0,type:{name:"() => void"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean"}},createNode:{defaultValue:null,description:"",name:"createNode",required:!1,type:{name:"(content: string) => DocumentFragment"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/markdown-overlay-editor.tsx#MarkdownOverlayEditor"]={docgenInfo:MarkdownOverlayEditor.__docgenInfo,name:"MarkdownOverlayEditor",path:"packages/core/src/data-grid-overlay-editor/private/markdown-overlay-editor.tsx#MarkdownOverlayEditor"})}catch(__react_docgen_typescript_loader_error){}const markdownCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:data_grid_types.b.Markdown,needsHover:!1,needsHoverPosition:!1,renderPrep:data_grid_lib.p,render:a=>Object(data_grid_lib.h)(a,a.cell.data),onDelete:c=>({...c,data:""}),getEditor:()=>p=>{const{onChange:onChange,onKeyDown:onKeyDown,value:value,target:target,onFinishedEditing:onFinishedEditing,markdownDivCreateNode:markdownDivCreateNode,forceEditMode:forceEditMode}=p;return react.createElement(MarkdownOverlayEditor,{onFinish:onFinishedEditing,targetRect:target,readonly:!0===value.readonly,markdown:value.data,onKeyDown:onKeyDown,onChange:e=>onChange({...value,data:e.target.value}),forceEditMode:forceEditMode,createNode:markdownDivCreateNode})}},markerCellRenderer={getAccessibilityString:c=>c.row.toString(),kind:data_grid_types.d.Marker,needsHover:!0,needsHoverPosition:!1,renderPrep:data_grid_lib.o,render:a=>Object(data_grid_lib.e)(a,a.cell.row,a.cell.checked,a.cell.markerKind)},newRowCellRenderer={getAccessibilityString:()=>"",kind:data_grid_types.d.NewRow,needsHover:!0,needsHoverPosition:!1,render:a=>Object(data_grid_lib.f)(a,a.cell.hint,a.cell.isFirst)},NumberOverlayEditorStyle=styles.b.div`
    display: flex;
    margin-top: 6px;
    color: ${p=>p.theme.textDark};

    > input {
        font-size: 13px;
        padding: 0;
        font-family: ${p=>p.theme.fontFamily};
        color: ${p=>p.theme.textDark};
    }
`;try{NumberOverlayEditorStyle.displayName="NumberOverlayEditorStyle",NumberOverlayEditorStyle.__docgenInfo={description:"",displayName:"NumberOverlayEditorStyle",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/number-overlay-editor-style.tsx#NumberOverlayEditorStyle"]={docgenInfo:NumberOverlayEditorStyle.__docgenInfo,name:"NumberOverlayEditorStyle",path:"packages/core/src/data-grid-overlay-editor/private/number-overlay-editor-style.tsx#NumberOverlayEditorStyle"})}catch(__react_docgen_typescript_loader_error){}var react_number_format_es=__webpack_require__(193);function getDecimalSeparator(){var _Intl$NumberFormat,_Intl$NumberFormat$fo,_Intl$NumberFormat$fo2;const result=null===(_Intl$NumberFormat=Intl.NumberFormat())||void 0===_Intl$NumberFormat||null===(_Intl$NumberFormat$fo=_Intl$NumberFormat.formatToParts(1.1))||void 0===_Intl$NumberFormat$fo||null===(_Intl$NumberFormat$fo2=_Intl$NumberFormat$fo.find((part=>"decimal"===part.type)))||void 0===_Intl$NumberFormat$fo2?void 0:_Intl$NumberFormat$fo2.value;return null!=result?result:"."}var number_overlay_editor=p=>{const{value:value,onChange:onChange,onKeyDown:onKeyDown,disabled:disabled,highlight:highlight}=p;return react.createElement(NumberOverlayEditorStyle,null,react.createElement(react_number_format_es.a,{autoFocus:!0,onFocus:e=>e.target.setSelectionRange(highlight?0:e.target.value.length,e.target.value.length),disabled:!0===disabled,thousandSeparator:"."===getDecimalSeparator()?",":".",decimalSeparator:getDecimalSeparator(),value:null!=value?value:"",onValueChange:onChange,onKeyDown:onKeyDown}))};try{numberoverlayeditor.displayName="numberoverlayeditor",numberoverlayeditor.__docgenInfo={description:"",displayName:"numberoverlayeditor",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"number"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!0,type:{name:"(ev: KeyboardEvent<HTMLInputElement>) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: NumberFormatValues) => void"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/number-overlay-editor.tsx#numberoverlayeditor"]={docgenInfo:numberoverlayeditor.__docgenInfo,name:"numberoverlayeditor",path:"packages/core/src/data-grid-overlay-editor/private/number-overlay-editor.tsx#numberoverlayeditor"})}catch(__react_docgen_typescript_loader_error){}const numberCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:data_grid_types.b.Number,needsHover:!1,needsHoverPosition:!1,useLabel:!0,renderPrep:data_grid_lib.p,render:a=>Object(data_grid_lib.h)(a,a.cell.displayData),onDelete:c=>({...c,data:void 0}),getEditor:()=>p=>{const{isHighlighted:isHighlighted,onChange:onChange,onKeyDown:onKeyDown,value:value}=p;return react.createElement(number_overlay_editor,{highlight:isHighlighted,disabled:!0===value.readonly,value:value.data,onKeyDown:onKeyDown,onChange:x=>onChange({...value,data:x.floatValue})})}},protectedCellRenderer={getAccessibilityString:()=>"",kind:data_grid_types.b.Protected,needsHover:!1,needsHoverPosition:!1,render:data_grid_lib.g},rowIDCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:data_grid_types.b.RowID,needsHover:!1,needsHoverPosition:!1,renderPrep:a=>Object(data_grid_lib.p)(a,a.theme.textLight),render:a=>Object(data_grid_lib.h)(a,a.cell.data)},textCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:data_grid_types.b.Text,needsHover:!1,needsHoverPosition:!1,renderPrep:data_grid_lib.p,useLabel:!0,render:a=>Object(data_grid_lib.h)(a,a.cell.displayData),onDelete:c=>({...c,data:""}),getEditor:()=>p=>{const{isHighlighted:isHighlighted,onChange:onChange,onKeyDown:onKeyDown,value:value}=p;return react.createElement(growing_entry,{highlight:isHighlighted,autoFocus:!0!==value.readonly,disabled:!0===value.readonly,onKeyDown:onKeyDown,value:value.data,onChange:e=>onChange({...value,data:e.target.value})})}},UriOverlayEditorStyle=styles.b.div`
    display: flex;

    flex-grow: 1;

    align-items: center;
    padding-top: 2px;

    .link-area {
        flex-grow: 1;
        flex-shrink: 1;

        margin-right: 8px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;

        color: ${p=>p.theme.linkColor};
        text-decoration: underline !important;
    }

    .edit-icon {
        flex-shrink: 0;
        width: 32px;
        color: ${p=>p.theme.accentColor};

        cursor: pointer;

        display: flex;
        justify-content: center;
        align-items: center;

        > * {
            width: 24px;
            height: 24px;
        }
    }

    textarea {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 0px;
        height: 0px;

        opacity: 0;
    }
`;try{UriOverlayEditorStyle.displayName="UriOverlayEditorStyle",UriOverlayEditorStyle.__docgenInfo={description:"",displayName:"UriOverlayEditorStyle",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/uri-overlay-editor-style.tsx#UriOverlayEditorStyle"]={docgenInfo:UriOverlayEditorStyle.__docgenInfo,name:"UriOverlayEditorStyle",path:"packages/core/src/data-grid-overlay-editor/private/uri-overlay-editor-style.tsx#UriOverlayEditorStyle"})}catch(__react_docgen_typescript_loader_error){}var uri_overlay_editor=p=>{const{uri:uri,onChange:onChange,onKeyDown:onKeyDown,forceEditMode:forceEditMode,readonly:readonly}=p,[editMode,setEditMode]=react.useState(""===uri||forceEditMode),onEditClick=react.useCallback((()=>{setEditMode(!0)}),[]);return editMode?react.createElement(growing_entry,{highlight:!0,autoFocus:!0,onKeyDown:onKeyDown,value:uri,onChange:onChange}):react.createElement(UriOverlayEditorStyle,null,react.createElement("a",{className:"link-area",href:uri,target:"_blank",rel:"noopener noreferrer"},uri),!readonly&&react.createElement("div",{className:"edit-icon",onClick:onEditClick},react.createElement(utils.b,null)),react.createElement("textarea",{autoFocus:!0,onKeyDown:onKeyDown}))};try{urioverlayeditor.displayName="urioverlayeditor",urioverlayeditor.__docgenInfo={description:"",displayName:"urioverlayeditor",props:{uri:{defaultValue:null,description:"",name:"uri",required:!0,type:{name:"string"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!0,type:{name:"(event: KeyboardEvent<HTMLTextAreaElement>) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(ev: ChangeEvent<HTMLTextAreaElement>) => void"}},forceEditMode:{defaultValue:null,description:"",name:"forceEditMode",required:!0,type:{name:"boolean"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-grid-overlay-editor/private/uri-overlay-editor.tsx#urioverlayeditor"]={docgenInfo:urioverlayeditor.__docgenInfo,name:"urioverlayeditor",path:"packages/core/src/data-grid-overlay-editor/private/uri-overlay-editor.tsx#urioverlayeditor"})}catch(__react_docgen_typescript_loader_error){}const uriCellRenderer={getAccessibilityString:c=>{var _c$data$toString,_c$data;return null!==(_c$data$toString=null===(_c$data=c.data)||void 0===_c$data?void 0:_c$data.toString())&&void 0!==_c$data$toString?_c$data$toString:""},kind:data_grid_types.b.Uri,needsHover:!1,needsHoverPosition:!1,useLabel:!0,renderPrep:data_grid_lib.p,render:a=>Object(data_grid_lib.h)(a,a.cell.data),onDelete:c=>({...c,data:""}),getEditor:()=>p=>{const{onChange:onChange,onKeyDown:onKeyDown,value:value,forceEditMode:forceEditMode}=p;return react.createElement(uri_overlay_editor,{forceEditMode:forceEditMode,uri:value.data,readonly:!0===value.readonly,onKeyDown:onKeyDown,onChange:e=>onChange({...value,data:e.target.value})})}},CellRenderers={[data_grid_types.d.Marker]:markerCellRenderer,[data_grid_types.d.NewRow]:newRowCellRenderer,[data_grid_types.b.Boolean]:booleanCellRenderer,[data_grid_types.b.Bubble]:bubbleCellRenderer,[data_grid_types.b.Drilldown]:drilldownCellRenderer,[data_grid_types.b.Image]:imageCellRenderer,[data_grid_types.b.Loading]:loadingCellRenderer,[data_grid_types.b.Markdown]:markdownCellRenderer,[data_grid_types.b.Number]:numberCellRenderer,[data_grid_types.b.Protected]:protectedCellRenderer,[data_grid_types.b.RowID]:rowIDCellRenderer,[data_grid_types.b.Text]:textCellRenderer,[data_grid_types.b.Uri]:uriCellRenderer}},724:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(188).configure)([__webpack_require__(725)],module,!1)}).call(this,__webpack_require__(185)(module))},725:function(module,exports,__webpack_require__){var map={"./packages/cells/node_modules/@glideapps/glide-data-grid/src/data-editor/data-editor-beautiful.stories.tsx":373,"./packages/cells/node_modules/@glideapps/glide-data-grid/src/data-editor/data-editor-repros.stories.tsx":395,"./packages/cells/node_modules/@glideapps/glide-data-grid/src/data-editor/data-editor.stories.tsx":396,"./packages/cells/node_modules/@glideapps/glide-data-grid/src/data-grid/data-grid.stories.tsx":397,"./packages/cells/node_modules/@glideapps/glide-data-grid/src/docs/grid-column.stories.tsx":405,"./packages/cells/node_modules/@glideapps/glide-data-grid/src/scrolling-data-grid/scrolling-data-grid.stories.tsx":403,"./packages/cells/src/cell.stories.tsx":2480,"./packages/core/src/data-editor/data-editor-beautiful.stories.tsx":373,"./packages/core/src/data-editor/data-editor-repros.stories.tsx":395,"./packages/core/src/data-editor/data-editor.stories.tsx":396,"./packages/core/src/data-grid/data-grid.stories.tsx":397,"./packages/core/src/docs/grid-column.stories.tsx":405,"./packages/core/src/scrolling-data-grid/scrolling-data-grid.stories.tsx":403};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=725},81:function(module,__webpack_exports__,__webpack_require__){"use strict";var _common_styles__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const Wrapper=_common_styles__WEBPACK_IMPORTED_MODULE_0__.b.div`
    overflow: hidden;
    position: relative;

    width: ${p=>p.width}px;
    height: ${p=>p.height}px;

    > :first-child {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
    }
`;__webpack_exports__.a=p=>{const{width:width,height:height,children:children,...rest}=p;return react__WEBPACK_IMPORTED_MODULE_1__.createElement(Wrapper,_extends({width:width,height:height},rest),children)};try{datagridcontainer.displayName="datagridcontainer",datagridcontainer.__docgenInfo={description:"",displayName:"datagridcontainer",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/data-editor-container/data-grid-container.tsx#datagridcontainer"]={docgenInfo:datagridcontainer.__docgenInfo,name:"datagridcontainer",path:"packages/core/src/data-editor-container/data-grid-container.tsx#datagridcontainer"})}catch(__react_docgen_typescript_loader_error){}},96:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return InputBox})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ShadowBox})),__webpack_require__.d(__webpack_exports__,"a",(function(){return GrowingEntryStyle}));var _common_styles__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7);const inputProps=Object(styled_components__WEBPACK_IMPORTED_MODULE_1__.b)(["font-size:13px;line-height:16px;font-family:",";color:",";padding:0;margin:0;"],(p=>p.theme.fontFamily),(p=>p.theme.textDark)),InputBox=_common_styles__WEBPACK_IMPORTED_MODULE_0__.b.textarea`
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    width: 100%;
    height: 100%;

    border-radius: 0px;

    resize: none;
    white-space: pre-wrap;
    min-width: 100%;
    overflow: hidden;
    border: 0;
    background-color: transparent;

    ::placeholder {
        color: ${p=>p.theme.textLight};
    }

    ${inputProps}
`,ShadowBox=_common_styles__WEBPACK_IMPORTED_MODULE_0__.b.div`
    visibility: hidden;
    white-space: pre-wrap;
    word-wrap: break-word;

    width: max-content;
    max-width: 100%;

    min-width: 100%;

    ${inputProps}

    padding-bottom: 2px;
`,GrowingEntryStyle=_common_styles__WEBPACK_IMPORTED_MODULE_0__.b.div`
    position: relative;
    margin-top: 6px;
`;try{InputBox.displayName="InputBox",InputBox.__docgenInfo={description:"",displayName:"InputBox",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLTextAreaElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/growing-entry/growing-entry-style.tsx#InputBox"]={docgenInfo:InputBox.__docgenInfo,name:"InputBox",path:"packages/core/src/growing-entry/growing-entry-style.tsx#InputBox"})}catch(__react_docgen_typescript_loader_error){}try{ShadowBox.displayName="ShadowBox",ShadowBox.__docgenInfo={description:"",displayName:"ShadowBox",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/growing-entry/growing-entry-style.tsx#ShadowBox"]={docgenInfo:ShadowBox.__docgenInfo,name:"ShadowBox",path:"packages/core/src/growing-entry/growing-entry-style.tsx#ShadowBox"})}catch(__react_docgen_typescript_loader_error){}try{GrowingEntryStyle.displayName="GrowingEntryStyle",GrowingEntryStyle.__docgenInfo={description:"",displayName:"GrowingEntryStyle",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/src/growing-entry/growing-entry-style.tsx#GrowingEntryStyle"]={docgenInfo:GrowingEntryStyle.__docgenInfo,name:"GrowingEntryStyle",path:"packages/core/src/growing-entry/growing-entry-style.tsx#GrowingEntryStyle"})}catch(__react_docgen_typescript_loader_error){}}},[[427,1,2]]]);